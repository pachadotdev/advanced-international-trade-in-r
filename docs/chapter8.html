<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Chapter 8. Import Quotas and Export Subsidies – Advanced International Trade in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./chapter9.html" rel="next">
<link href="./chapter7.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-ab1b8a046a59585b79c2897af2dd365a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./chapter8.html"><span class="chapter-title">Chapter 8. Import Quotas and Export Subsidies</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Advanced International Trade in R</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">About</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter2.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Chapter 2. The Heckscher-Ohlin Model</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter4.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Chapter 4. Trade in Intermediate Inputs and Wages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter5.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Chapter 5. Increasing Returns and the Gravity Equation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter7.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Chapter 7. Import Tariffs and Dumping</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter8.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">Chapter 8. Import Quotas and Export Subsidies</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter9.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Chapter 9. Political Economy of Trade Policy</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#empirical-exercise" id="toc-empirical-exercise" class="nav-link active" data-scroll-target="#empirical-exercise">Empirical exercise</a></li>
  <li><a href="#documentation" id="toc-documentation" class="nav-link" data-scroll-target="#documentation">Documentation</a></li>
  <li><a href="#exercise-1" id="toc-exercise-1" class="nav-link" data-scroll-target="#exercise-1">Exercise 1</a>
  <ul class="collapse">
  <li><a href="#feenstras-code" id="toc-feenstras-code" class="nav-link" data-scroll-target="#feenstras-code">Feenstra’s code</a></li>
  <li><a href="#my-code" id="toc-my-code" class="nav-link" data-scroll-target="#my-code">My code</a></li>
  </ul></li>
  <li><a href="#exercise-2" id="toc-exercise-2" class="nav-link" data-scroll-target="#exercise-2">Exercise 2</a>
  <ul class="collapse">
  <li><a href="#feenstras-code-1" id="toc-feenstras-code-1" class="nav-link" data-scroll-target="#feenstras-code-1">Feenstra’s code</a></li>
  <li><a href="#my-code-1" id="toc-my-code-1" class="nav-link" data-scroll-target="#my-code-1">My code</a></li>
  <li><a href="#extra-step-formatting-the-tables" id="toc-extra-step-formatting-the-tables" class="nav-link" data-scroll-target="#extra-step-formatting-the-tables">Extra step: formatting the tables</a></li>
  </ul></li>
  <li><a href="#exercise-3" id="toc-exercise-3" class="nav-link" data-scroll-target="#exercise-3">Exercise 3</a>
  <ul class="collapse">
  <li><a href="#feenstras-code-2" id="toc-feenstras-code-2" class="nav-link" data-scroll-target="#feenstras-code-2">Feenstra’s code</a></li>
  <li><a href="#my-code-2" id="toc-my-code-2" class="nav-link" data-scroll-target="#my-code-2">My code</a></li>
  <li><a href="#extra-step-formatting-the-tables-1" id="toc-extra-step-formatting-the-tables-1" class="nav-link" data-scroll-target="#extra-step-formatting-the-tables-1">Extra step: formatting the tables</a></li>
  </ul></li>
  <li><a href="#exercise-4" id="toc-exercise-4" class="nav-link" data-scroll-target="#exercise-4">Exercise 4</a>
  <ul class="collapse">
  <li><a href="#feenstras-code-3" id="toc-feenstras-code-3" class="nav-link" data-scroll-target="#feenstras-code-3">Feenstra’s code</a></li>
  <li><a href="#my-code-3" id="toc-my-code-3" class="nav-link" data-scroll-target="#my-code-3">My code</a></li>
  <li><a href="#extra-step-formatting-the-tables-2" id="toc-extra-step-formatting-the-tables-2" class="nav-link" data-scroll-target="#extra-step-formatting-the-tables-2">Extra step: formatting the tables</a></li>
  </ul></li>
  <li><a href="#exercise-5" id="toc-exercise-5" class="nav-link" data-scroll-target="#exercise-5">Exercise 5</a>
  <ul class="collapse">
  <li><a href="#feenstras-code-4" id="toc-feenstras-code-4" class="nav-link" data-scroll-target="#feenstras-code-4">Feenstra’s code</a></li>
  <li><a href="#my-code-4" id="toc-my-code-4" class="nav-link" data-scroll-target="#my-code-4">My code</a></li>
  <li><a href="#extra-step-formatting-the-tables-3" id="toc-extra-step-formatting-the-tables-3" class="nav-link" data-scroll-target="#extra-step-formatting-the-tables-3">Extra step: formatting the tables</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-title">Chapter 8. Import Quotas and Export Subsidies</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="empirical-exercise" class="level2">
<h2 class="anchored" data-anchor-id="empirical-exercise">Empirical exercise</h2>
<p>This exercise is to reproduce regression results Feenstra (1988a). To complete the exercise, the files “car_7990.dta” and “truck_7990.dta” should be stored in <code>Chapter-8</code>.</p>
</section>
<section id="documentation" class="level2">
<h2 class="anchored" data-anchor-id="documentation">Documentation</h2>
<p>Data Description for Feenstra (1988a):</p>
<ol type="1">
<li><code>car.dta</code>: This STATA file contains car’s various characteristics, such as weight (wght), width (wdth), height (hght), horse power (hs), four-wheel (four), transmission (tran), power steering (ps) and air condition (ac) for 1979-1990. It also includes each model’s sales (quan) and price.</li>
<li><code>truck.dta</code>: This STATA file contains truck’s various characteristics, such as weight (wght), width (wdth), height (hght), horse power (hs), four-wheel (four), transmission (tran), power steering (ps) and air condition (ac) for 1979-1990. It also includes each model’s sale (quan) and price, though sales are missing after 1985.</li>
</ol>
</section>
<section id="exercise-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-1">Exercise 1</h2>
<p>Run the programs <code>pindex_c.do</code>, <code>pindex_t.do</code>, <code>unit_value.do</code> to reproduce the price indexes and unit-values for cars and trucks in Table 8.3. What formula is used for the price indexes, and how does this differ from the unit-values?</p>
<section id="feenstras-code" class="level3">
<h3 class="anchored" data-anchor-id="feenstras-code">Feenstra’s code</h3>
<section id="pindex_c.do" class="level4">
<h4 class="anchored" data-anchor-id="pindex_c.do">pindex_c.do</h4>
<div class="sourceCode" id="cb1"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\pindex_c.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_7990,<span class="kw">clear</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="fu">year</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="kw">preserve</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span>==80</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="kw">ren</span> price price_80</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="kw">ren</span> quan quan_80</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_80,<span class="kw">replace</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="kw">restore</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="kw">merge</span> <span class="kw">model</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_80</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> <span class="dt">_merge</span>==3</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="dt">_merge</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="fu">year</span> <span class="kw">model</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_80=<span class="kw">sum</span>(price_80*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_cp=<span class="kw">sum</span>(price*quan_80),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> lasp=value_cp/value_80</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_c=<span class="kw">sum</span>(price*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_cq=<span class="kw">sum</span>(price_80*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> pasp=value_c/value_cq</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> pindex=(lasp*pasp)^0.5</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>) pindex, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\pindex_c.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\pindex_c.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>&gt; er-8\pindex_c.<span class="fu">log</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 18:40:59</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="kw">ca</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>&gt; r_7990,<span class="kw">clear</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="fu">year</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>. <span class="kw">preserve</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span>==80</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>(260 observations deleted)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> price price_80</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quan quan_80</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\c</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>&gt; ar_80,<span class="kw">replace</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>&gt; _80.dta saved</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>. <span class="kw">restore</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>. <span class="kw">merge</span> <span class="kw">model</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-editio</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>&gt; n\Chapter-8\car_80</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: you are <span class="kw">using</span> old <span class="kw">merge</span> <span class="kw">syntax</span>; see [R] <span class="kw">merge</span> <span class="kw">for</span> <span class="kw">new</span> <span class="kw">syntax</span>)</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a><span class="kw">variable</span> <span class="kw">model</span> does <span class="kw">not</span> uniquely identify observations <span class="kw">in</span> the master <span class="kw">data</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="dt">_merge</span>==3</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>(55 observations deleted)</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="dt">_merge</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="fu">year</span> <span class="kw">model</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_80=<span class="kw">sum</span>(price_80*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cp=<span class="kw">sum</span>(price*quan_80),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> lasp=value_cp/value_80</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_c=<span class="kw">sum</span>(price*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cq=<span class="kw">sum</span>(price_80*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> pasp=value_c/value_cq</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>.  </span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> pindex=(lasp*pasp)^0.5</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>) pindex, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>     pindex |</span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>  1. |   79      .9663 |</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>  2. |   80          1 |</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>  3. |   81   1.197522 |</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>  4. |   82   1.289163 |</span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>  5. |   83   1.312988 |</span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>  6. |   84   1.389093 |</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>  7. |   85   1.477987 |</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>  8. |   86   1.668846 |</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>  9. |   87   1.885685 |</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a> 10. |   88    2.04798 |</span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a> 11. |   89   2.082082 |</span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a> 12. |   90    2.10851 |</span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>&gt; er-8\pindex_c.<span class="fu">log</span></span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 18:41:01</span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="pindex_t.do" class="level4">
<h4 class="anchored" data-anchor-id="pindex_t.do">pindex_t.do</h4>
<div class="sourceCode" id="cb3"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\pindex_t.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_7990,<span class="kw">clear</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="fu">year</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="kw">preserve</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span>==80</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="kw">ren</span> price price_80</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="kw">ren</span> quan quan_80</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_80,<span class="kw">replace</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="kw">restore</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="kw">merge</span> <span class="kw">model</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_80</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> <span class="dt">_merge</span>==3</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="dt">_merge</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="fu">year</span> <span class="kw">model</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_80=<span class="kw">sum</span>(price_80*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_cp=<span class="kw">sum</span>(price*quan_80),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> lasp=value_cp/value_80</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_c=<span class="kw">sum</span>(price*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_cq=<span class="kw">sum</span>(price_80*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> pasp=value_c/value_cq</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> pindex=(lasp*pasp)^0.5</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>) pindex, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\pindex_t.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\pindex_t.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>&gt; er-8\pindex_t.<span class="fu">log</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 18:59:29</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tr</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>&gt; uck_7990,<span class="kw">clear</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="fu">year</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>. <span class="kw">preserve</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span>==80</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>(110 observations deleted)</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> price price_80</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quan quan_80</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\t</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>&gt; ruck_80,<span class="kw">replace</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tru</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>&gt; ck_80.dta saved</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>. <span class="kw">restore</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>. <span class="kw">merge</span> <span class="kw">model</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-editio</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>&gt; n\Chapter-8\truck_80</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: you are <span class="kw">using</span> old <span class="kw">merge</span> <span class="kw">syntax</span>; see [R] <span class="kw">merge</span> <span class="kw">for</span> <span class="kw">new</span> <span class="kw">syntax</span>)</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a><span class="kw">variable</span> <span class="kw">model</span> does <span class="kw">not</span> uniquely identify observations <span class="kw">in</span> the master <span class="kw">data</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="dt">_merge</span>==3</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>(38 observations deleted)</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="dt">_merge</span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="fu">year</span> <span class="kw">model</span></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_80=<span class="kw">sum</span>(price_80*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cp=<span class="kw">sum</span>(price*quan_80),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> lasp=value_cp/value_80</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_c=<span class="kw">sum</span>(price*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cq=<span class="kw">sum</span>(price_80*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> pasp=value_c/value_cq</span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>(21 <span class="fu">missing</span> <span class="kw">values</span> generated)</span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>.  </span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> pindex=(lasp*pasp)^0.5</span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>(21 <span class="fu">missing</span> <span class="kw">values</span> generated)</span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>) pindex, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>     pindex |</span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>  1. |   79    .970215 |</span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>  2. |   80          1 |</span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a>  3. |   81   1.278085 |</span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a>  4. |   82   1.309353 |</span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>  5. |   83   1.210055 |</span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a>  6. |   84   1.230847 |</span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>  7. |   85   1.252268 |</span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a>  8. |   86          . |</span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a>  9. |   87          . |</span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a> 10. |   88          . |</span>
<span id="cb4-96"><a href="#cb4-96" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb4-97"><a href="#cb4-97" aria-hidden="true" tabindex="-1"></a> 11. |   89          . |</span>
<span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a> 12. |   90          . |</span>
<span id="cb4-99"><a href="#cb4-99" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb4-100"><a href="#cb4-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-101"><a href="#cb4-101" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-102"><a href="#cb4-102" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb4-103"><a href="#cb4-103" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb4-104"><a href="#cb4-104" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb4-105"><a href="#cb4-105" aria-hidden="true" tabindex="-1"></a>&gt; er-8\pindex_t.<span class="fu">log</span></span>
<span id="cb4-106"><a href="#cb4-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb4-107"><a href="#cb4-107" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 18:59:31</span>
<span id="cb4-108"><a href="#cb4-108" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb4-109"><a href="#cb4-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-110"><a href="#cb4-110" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-111"><a href="#cb4-111" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="unit_value.do" class="level4">
<h4 class="anchored" data-anchor-id="unit_value.do">unit_value.do</h4>
<div class="sourceCode" id="cb5"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\unit_value.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_7990,<span class="kw">clear</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> <span class="ot">value</span>=price*quan</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> avalue=<span class="kw">mean</span>(<span class="ot">value</span>), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> uvalue=avalue/aquan</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>) uvalue, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_7990,<span class="kw">clear</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> <span class="ot">value</span>=price*quan</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> avalue=<span class="kw">mean</span>(<span class="ot">value</span>), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> uvalue=avalue/aquan</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>) uvalue, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\unit_value.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\unit_value.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>&gt; er-8\unit_value.<span class="fu">log</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 19:13:08</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="kw">ca</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>&gt; r_7990,<span class="kw">clear</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> <span class="ot">value</span>=price*quan</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> avalue=<span class="kw">mean</span>(<span class="ot">value</span>), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> uvalue=avalue/aquan</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>) uvalue, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>     uvalue |</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>  1. |   79   4945.603 |</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>  2. |   80   5174.757 |</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>  3. |   81   6210.741 |</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>  4. |   82   6834.219 |</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>  5. |   83   7069.203 |</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>  6. |   84   7518.311 |</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>  7. |   85   8153.146 |</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>  8. |   86   9391.989 |</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>  9. |   87   10396.91 |</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a> 10. |   88    10840.6 |</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a> 11. |   89   10492.76 |</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a> 12. |   90   11112.68 |</span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tr</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>&gt; uck_7990,<span class="kw">clear</span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> <span class="ot">value</span>=price*quan</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> avalue=<span class="kw">mean</span>(<span class="ot">value</span>), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> uvalue=avalue/aquan</span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>(45 <span class="fu">missing</span> <span class="kw">values</span> generated)</span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>) uvalue, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>     uvalue |</span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>  1. |   79   4794.177 |</span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>  2. |   80   4937.291 |</span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>  3. |   81   6313.539 |</span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>  4. |   82   6426.264 |</span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a>  5. |   83   6134.027 |</span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a>  6. |   84   6246.728 |</span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a>  7. |   85   6249.927 |</span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a>  8. |   86          . |</span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a>  9. |   87          . |</span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a> 10. |   88          . |</span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a> 11. |   89          . |</span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a> 12. |   90          . |</span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb6-93"><a href="#cb6-93" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb6-94"><a href="#cb6-94" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb6-96"><a href="#cb6-96" aria-hidden="true" tabindex="-1"></a>&gt; er-8\unit_value.<span class="fu">log</span></span>
<span id="cb6-97"><a href="#cb6-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb6-98"><a href="#cb6-98" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 19:13:10</span>
<span id="cb6-99"><a href="#cb6-99" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb6-100"><a href="#cb6-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-101"><a href="#cb6-101" aria-hidden="true" tabindex="-1"></a>. <span class="kw">exit</span></span>
<span id="cb6-102"><a href="#cb6-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="my-code" class="level3">
<h3 class="anchored" data-anchor-id="my-code">My code</h3>
<section id="pindex_c.do-1" class="level4">
<h4 class="anchored" data-anchor-id="pindex_c.do-1">pindex_c.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Packages ----</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(archive)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract ----</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>fzip <span class="ot">&lt;-</span> <span class="st">"first-edition/Chapter-8.zip"</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>dout <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">.zip$"</span>, <span class="st">""</span>, fzip)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(dout)) {</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">archive_extract</span>(fzip, <span class="at">dir =</span> dout)</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and transform ----</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>fout <span class="ot">&lt;-</span> <span class="fu">paste0</span>(dout, <span class="st">"/feenstra_88.rds"</span>)</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(fout)) {</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  feenstra_88 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">car_7990 =</span> <span class="fu">read_dta</span>(<span class="fu">paste0</span>(dout, <span class="st">"/car_7990.dta"</span>)),</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">truck_7990 =</span> <span class="fu">read_dta</span>(<span class="fu">paste0</span>(dout, <span class="st">"/truck_7990.dta"</span>))</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">saveRDS</span>(feenstra_88, fout)</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>  feenstra_88 <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(fout)</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, model, type, price, quan) <span class="sc">%&gt;%</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, model)</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>car_80 <span class="ot">&lt;-</span> car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">80</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(model, type, price, quan) <span class="sc">%&gt;%</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">price_80 =</span> price, <span class="at">quan_80 =</span> quan)</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(car_80) <span class="sc">%&gt;%</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_80 =</span> <span class="fu">sum</span>(price_80 <span class="sc">*</span> quan_80),</span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_cp =</span> <span class="fu">sum</span>(price <span class="sc">*</span> quan_80)</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lasp =</span> value_cp <span class="sc">/</span> value_80)</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_c =</span> <span class="fu">sum</span>(price <span class="sc">*</span> quan),</span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_cq =</span> <span class="fu">sum</span>(price_80 <span class="sc">*</span> quan)</span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pasp =</span> value_c <span class="sc">/</span> value_cq)</span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pindex =</span> <span class="fu">sqrt</span>(lasp <span class="sc">*</span> pasp)) <span class="sc">%&gt;%</span></span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">pindex =</span> <span class="fu">mean</span>(pindex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
    year pindex
   &lt;dbl&gt;  &lt;dbl&gt;
 1    79  0.966
 2    80  1    
 3    81  1.20 
 4    82  1.29 
 5    83  1.31 
 6    84  1.39 
 7    85  1.48 
 8    86  1.67 
 9    87  1.89 
10    88  2.05 
11    89  2.08 
12    90  2.11 </code></pre>
</div>
</div>
</section>
<section id="pindex_t.do-1" class="level4">
<h4 class="anchored" data-anchor-id="pindex_t.do-1">pindex_t.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, model, type, price, quan) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, model)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>truck_80 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">80</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(model, type, price, quan) <span class="sc">%&gt;%</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">price_80 =</span> price, <span class="at">quan_80 =</span> quan)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(truck_80) <span class="sc">%&gt;%</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_80 =</span> <span class="fu">sum</span>(price_80 <span class="sc">*</span> quan_80),</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_cp =</span> <span class="fu">sum</span>(price <span class="sc">*</span> quan_80)</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lasp =</span> value_cp <span class="sc">/</span> value_80)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_c =</span> <span class="fu">sum</span>(price <span class="sc">*</span> quan),</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_cq =</span> <span class="fu">sum</span>(price_80 <span class="sc">*</span> quan)</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pasp =</span> value_c <span class="sc">/</span> value_cq)</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pindex =</span> <span class="fu">sqrt</span>(lasp <span class="sc">*</span> pasp)) <span class="sc">%&gt;%</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">pindex =</span> <span class="fu">mean</span>(pindex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
    year  pindex
   &lt;dbl&gt;   &lt;dbl&gt;
 1    79   0.970
 2    80   1    
 3    81   1.28 
 4    82   1.31 
 5    83   1.21 
 6    84   1.23 
 7    85   1.25 
 8    86 NaN    
 9    87 NaN    
10    88 NaN    
11    89 NaN    
12    90 NaN    </code></pre>
</div>
</div>
</section>
<section id="unit_value.do-1" class="level4">
<h4 class="anchored" data-anchor-id="unit_value.do-1">unit_value.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> price <span class="sc">*</span> quan) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">aquan =</span> <span class="fu">mean</span>(quan),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">avalue =</span> <span class="fu">mean</span>(value),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">uvalue =</span> avalue <span class="sc">/</span> aquan</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> price <span class="sc">*</span> quan) <span class="sc">%&gt;%</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">aquan =</span> <span class="fu">mean</span>(quan),</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">avalue =</span> <span class="fu">mean</span>(value),</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">uvalue =</span> avalue <span class="sc">/</span> aquan</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">uvalue =</span> <span class="fu">mean</span>(uvalue))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
    year uvalue
   &lt;dbl&gt;  &lt;dbl&gt;
 1    79  4946.
 2    80  5175.
 3    81  6211.
 4    82  6834.
 5    83  7069.
 6    84  7518.
 7    85  8153.
 8    86  9392.
 9    87 10397.
10    88 10841.
11    89 10493.
12    90 11113.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">uvalue =</span> <span class="fu">mean</span>(uvalue))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
    year uvalue
   &lt;dbl&gt;  &lt;dbl&gt;
 1    79  4794.
 2    80  4937.
 3    81  6314.
 4    82  6426.
 5    83  6134.
 6    84  6247.
 7    85  6250.
 8    86   NaN 
 9    87   NaN 
10    88   NaN 
11    89   NaN 
12    90   NaN </code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="exercise-2" class="level2">
<h2 class="anchored" data-anchor-id="exercise-2">Exercise 2</h2>
<p>Run the program <code>car_reg.do</code> to reproduce the column (1) in Table 8.4, and the program <code>truck_reg.do</code> to reproduce column (2). What weights are being used in the regression, and how does this affect the results?</p>
<section id="feenstras-code-1" class="level3">
<h3 class="anchored" data-anchor-id="feenstras-code-1">Feenstra’s code</h3>
<section id="car_reg.do" class="level4">
<h4 class="anchored" data-anchor-id="car_reg.do">car_reg.do</h4>
<div class="sourceCode" id="cb15"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_reg.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_7990,<span class="kw">clear</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlcar</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="kw">version</span> 7.0</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8"</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a3=1</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a4=1</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a5=1</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a6=1</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a7=1</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b2=.1</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b3=.1</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b4=.1</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b5=.1</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b6=.1</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b7=.1</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c1=.1</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c2=.1</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c3=.1</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c4=.1</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c5=.1</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c6=.1</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c7=.1</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c8=.1</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*yd3+<span class="ot">$a4</span>*yd4+<span class="ot">$a5</span>*yd5+<span class="ot">$a6</span>*yd6+<span class="ot">$a7</span>*yd7<span class="co">/*</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*yd2+<span class="ot">$b3</span>*yd3+<span class="ot">$b4</span>*yd4+<span class="ot">$b5</span>*yd5+<span class="ot">$b6</span>*yd6+<span class="ot">$b7</span>*yd7<span class="co">/*</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght+<span class="ot">$c2</span>*wdth+<span class="ot">$c3</span>*hght+<span class="ot">$c4</span>*hp+<span class="ot">$c5</span>*tran+<span class="ot">$c6</span>*ps+<span class="ot">$c7</span>*<span class="kw">ac</span>+<span class="ot">$c8</span>)</span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> car price</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*yd2+_b[b3]*yd3+_b[b4]*yd4+_b[b5]*yd5+_b[b6]*yd6+_b[b7]*yd7<span class="co">/*</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c1]*wght+_b[c2]*wdth+_b[c3]*hght+_b[c4]*hp+_b[c5]*tran+_b[c6]*ps+_b[c7]*<span class="kw">ac</span>+_b[c8])</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nprice=price*winv</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nyd3=yd3*winv</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nyd4=yd4*winv</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nyd5=yd5*winv</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nyd6=yd6*winv</span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nyd7=yd7*winv</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlncar</span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">version</span> 7.0</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8"</span></span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> a3=1</span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> a4=1</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> a5=1 </span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> a6=1</span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> a7=1</span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> b2=.1    </span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> b3=.1</span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> b4=.1</span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> b5=.1</span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> b6=.1    </span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> b7=.1</span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c1=.1</span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c2=.1</span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c3=.1</span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c4=.1</span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c5=.1</span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c6=.1</span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c7=.1</span>
<span id="cb15-76"><a href="#cb15-76" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c8=.1</span>
<span id="cb15-77"><a href="#cb15-77" aria-hidden="true" tabindex="-1"></a>        <span class="kw">exit</span></span>
<span id="cb15-78"><a href="#cb15-78" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-79"><a href="#cb15-79" aria-hidden="true" tabindex="-1"></a>    <span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*nyd3+<span class="ot">$a4</span>*nyd4+<span class="ot">$a5</span>*nyd5+<span class="ot">$a6</span>*nyd6+<span class="ot">$a7</span>*nyd7<span class="co">/*</span></span>
<span id="cb15-80"><a href="#cb15-80" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*yd2+<span class="ot">$b3</span>*yd3+<span class="ot">$b4</span>*yd4+<span class="ot">$b5</span>*yd5+<span class="ot">$b6</span>*yd6+<span class="ot">$b7</span>*yd7<span class="co">/*</span></span>
<span id="cb15-81"><a href="#cb15-81" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght+<span class="ot">$c2</span>*wdth+<span class="ot">$c3</span>*hght+<span class="ot">$c4</span>*hp+<span class="ot">$c5</span>*tran+<span class="ot">$c6</span>*ps+<span class="ot">$c7</span>*<span class="kw">ac</span>+<span class="ot">$c8</span>)</span>
<span id="cb15-82"><a href="#cb15-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-83"><a href="#cb15-83" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb15-84"><a href="#cb15-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-85"><a href="#cb15-85" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> ncar nprice</span>
<span id="cb15-86"><a href="#cb15-86" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb15-87"><a href="#cb15-87" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb15-88"><a href="#cb15-88" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb15-89"><a href="#cb15-89" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\car_reg.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\car_reg.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>&gt; er-8\car_reg.<span class="fu">log</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 19:28:58</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="kw">ca</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>&gt; r_7990,<span class="kw">clear</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>(105 observations deleted)</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>. <span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>       <span class="fu">year</span> |      Freq.     Percent        Cum.</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>         79 |         21       11.73       11.73</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>         80 |         24       13.41       25.14</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>         81 |         24       13.41       38.55</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>         82 |         24       13.41       51.96</span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>         83 |         26       14.53       66.48</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>         84 |         29       16.20       82.68</span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>         85 |         31       17.32      100.00</span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>      Total |        179      100.00</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlcar</span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>  2. <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>  3. <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8"</span></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>  4. <span class="kw">global</span> a3=1</span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>  5. <span class="kw">global</span> a4=1</span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>  6. <span class="kw">global</span> a5=1</span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>  7. <span class="kw">global</span> a6=1</span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a>  8. <span class="kw">global</span> a7=1</span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>  9. <span class="kw">global</span> b2=.1</span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a> 10. <span class="kw">global</span> b3=.1</span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a> 11. <span class="kw">global</span> b4=.1</span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a> 12. <span class="kw">global</span> b5=.1</span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a> 13. <span class="kw">global</span> b6=.1</span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a> 14. <span class="kw">global</span> b7=.1</span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a> 15. <span class="kw">global</span> c1=.1</span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a> 16. <span class="kw">global</span> c2=.1</span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a> 17. <span class="kw">global</span> c3=.1</span>
<span id="cb16-57"><a href="#cb16-57" aria-hidden="true" tabindex="-1"></a> 18. <span class="kw">global</span> c4=.1</span>
<span id="cb16-58"><a href="#cb16-58" aria-hidden="true" tabindex="-1"></a> 19. <span class="kw">global</span> c5=.1</span>
<span id="cb16-59"><a href="#cb16-59" aria-hidden="true" tabindex="-1"></a> 20. <span class="kw">global</span> c6=.1</span>
<span id="cb16-60"><a href="#cb16-60" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">global</span> c7=.1</span>
<span id="cb16-61"><a href="#cb16-61" aria-hidden="true" tabindex="-1"></a> 22. <span class="kw">global</span> c8=.1</span>
<span id="cb16-62"><a href="#cb16-62" aria-hidden="true" tabindex="-1"></a> 23. <span class="kw">exit</span></span>
<span id="cb16-63"><a href="#cb16-63" aria-hidden="true" tabindex="-1"></a> 24. }</span>
<span id="cb16-64"><a href="#cb16-64" aria-hidden="true" tabindex="-1"></a> 25. <span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*yd3+<span class="ot">$a4</span>*yd4+<span class="ot">$a5</span>*yd5+<span class="ot">$a6</span>*yd6+<span class="ot">$a7</span>*yd7<span class="co">/*</span></span>
<span id="cb16-65"><a href="#cb16-65" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*yd2+<span class="ot">$b3</span>*yd3+<span class="ot">$b4</span>*yd4+<span class="ot">$b5</span>*yd5+<span class="ot">$b6</span>*yd6+<span class="ot">$b7</span>*yd7<span class="co">/*</span></span>
<span id="cb16-66"><a href="#cb16-66" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght+<span class="ot">$c2</span>*wdth+<span class="ot">$c3</span>*hght+<span class="ot">$c4</span>*hp+<span class="ot">$c5</span>*tran+<span class="ot">$c6</span>*ps+<span class="ot">$c7</span>*<span class="kw">ac</span>+<span class="ot">$c8</span>)</span>
<span id="cb16-67"><a href="#cb16-67" aria-hidden="true" tabindex="-1"></a> 26. </span>
<span id="cb16-68"><a href="#cb16-68" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb16-69"><a href="#cb16-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-70"><a href="#cb16-70" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-71"><a href="#cb16-71" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> car price</span>
<span id="cb16-72"><a href="#cb16-72" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 179)</span>
<span id="cb16-73"><a href="#cb16-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-74"><a href="#cb16-74" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  1.16e+10</span>
<span id="cb16-75"><a href="#cb16-75" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb16-76"><a href="#cb16-76" aria-hidden="true" tabindex="-1"></a>Iteration 9:   residual SS =  8.39e+07</span>
<span id="cb16-77"><a href="#cb16-77" aria-hidden="true" tabindex="-1"></a>Iteration 10:  residual SS =  8.39e+07</span>
<span id="cb16-78"><a href="#cb16-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-79"><a href="#cb16-79" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       179</span>
<span id="cb16-80"><a href="#cb16-80" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 19,   160) =   1158.52</span>
<span id="cb16-81"><a href="#cb16-81" aria-hidden="true" tabindex="-1"></a>       Model |  1.1541e+10    19   607414473         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb16-82"><a href="#cb16-82" aria-hidden="true" tabindex="-1"></a>    Residual |    83888568   160   524303.55         R-squared     =    0.9928</span>
<span id="cb16-83"><a href="#cb16-83" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9919</span>
<span id="cb16-84"><a href="#cb16-84" aria-hidden="true" tabindex="-1"></a>       Total |  1.1625e+10   179  64942813.2         Root MSE      =  724.0881</span>
<span id="cb16-85"><a href="#cb16-85" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     =  2845.293</span>
<span id="cb16-86"><a href="#cb16-86" aria-hidden="true" tabindex="-1"></a>(car)</span>
<span id="cb16-87"><a href="#cb16-87" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb16-88"><a href="#cb16-88" aria-hidden="true" tabindex="-1"></a>       price |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb16-89"><a href="#cb16-89" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb16-90"><a href="#cb16-90" aria-hidden="true" tabindex="-1"></a>          a3 |  -294.7452   723.3322    -0.41   0.684    -1723.255    1133.765</span>
<span id="cb16-91"><a href="#cb16-91" aria-hidden="true" tabindex="-1"></a>          a4 |  -304.9631   714.5517    -0.43   0.670    -1716.132    1106.206</span>
<span id="cb16-92"><a href="#cb16-92" aria-hidden="true" tabindex="-1"></a>          a5 |  -137.3977   700.8446    -0.20   0.845    -1521.497    1246.701</span>
<span id="cb16-93"><a href="#cb16-93" aria-hidden="true" tabindex="-1"></a>          a6 |   72.87527   695.4052     0.10   0.917    -1300.482    1446.232</span>
<span id="cb16-94"><a href="#cb16-94" aria-hidden="true" tabindex="-1"></a>          a7 |  -103.4007   742.9475    -0.14   0.889    -1570.649    1363.848</span>
<span id="cb16-95"><a href="#cb16-95" aria-hidden="true" tabindex="-1"></a>          b2 |   .0099678   .0362994     0.27   0.784      -.06172    .0816555</span>
<span id="cb16-96"><a href="#cb16-96" aria-hidden="true" tabindex="-1"></a>          b3 |   .1522578   .1022847     1.49   0.139    -.0497444      .35426</span>
<span id="cb16-97"><a href="#cb16-97" aria-hidden="true" tabindex="-1"></a>          b4 |   .1899382   .0965319     1.97   0.051    -.0007027    .3805792</span>
<span id="cb16-98"><a href="#cb16-98" aria-hidden="true" tabindex="-1"></a>          b5 |   .1540892   .0959124     1.61   0.110    -.0353283    .3435068</span>
<span id="cb16-99"><a href="#cb16-99" aria-hidden="true" tabindex="-1"></a>          b6 |    .172972   .0944704     1.83   0.069    -.0135977    .3595417</span>
<span id="cb16-100"><a href="#cb16-100" aria-hidden="true" tabindex="-1"></a>          b7 |   .2274326   .0945034     2.41   0.017     .0407977    .4140675</span>
<span id="cb16-101"><a href="#cb16-101" aria-hidden="true" tabindex="-1"></a>          c1 |  -.0007315   .1021984    -0.01   0.994    -.2025632    .2011002</span>
<span id="cb16-102"><a href="#cb16-102" aria-hidden="true" tabindex="-1"></a>          c2 |   .3681958   .1019742     3.61   0.000     .1668067    .5695849</span>
<span id="cb16-103"><a href="#cb16-103" aria-hidden="true" tabindex="-1"></a>          c3 |  -.1431584   .0519385    -2.76   0.007    -.2457317    -.040585</span>
<span id="cb16-104"><a href="#cb16-104" aria-hidden="true" tabindex="-1"></a>          c4 |   .6070451   .0665196     9.13   0.000     .4756756    .7384147</span>
<span id="cb16-105"><a href="#cb16-105" aria-hidden="true" tabindex="-1"></a>          c5 |   .1315757   .0264479     4.97   0.000     .0793437    .1838078</span>
<span id="cb16-106"><a href="#cb16-106" aria-hidden="true" tabindex="-1"></a>          c6 |   .0515819   .0218212     2.36   0.019     .0084872    .0946766</span>
<span id="cb16-107"><a href="#cb16-107" aria-hidden="true" tabindex="-1"></a>          c7 |   .1635465   .0228493     7.16   0.000     .1184213    .2086717</span>
<span id="cb16-108"><a href="#cb16-108" aria-hidden="true" tabindex="-1"></a>          c8 |    6.73024   .5719055    11.77   0.000     5.600783    7.859697</span>
<span id="cb16-109"><a href="#cb16-109" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb16-110"><a href="#cb16-110" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb16-111"><a href="#cb16-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-112"><a href="#cb16-112" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-113"><a href="#cb16-113" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*yd2+_b[b3]*yd3+_b[b4]*yd4+_b[b5]*yd5+_b[b6]*yd6+_b[b7]*yd7</span>
<span id="cb16-114"><a href="#cb16-114" aria-hidden="true" tabindex="-1"></a>&gt; <span class="co">/*</span></span>
<span id="cb16-115"><a href="#cb16-115" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c1]*wght+_b[c2]*wdth+_b[c3]*hght+_b[c4]*hp+_b[c5]*tran+_b[c6]*ps+_b[c7]*<span class="kw">ac</span></span>
<span id="cb16-116"><a href="#cb16-116" aria-hidden="true" tabindex="-1"></a>&gt; +_b[c8])</span>
<span id="cb16-117"><a href="#cb16-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-118"><a href="#cb16-118" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-119"><a href="#cb16-119" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nprice=price*winv</span>
<span id="cb16-120"><a href="#cb16-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-121"><a href="#cb16-121" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nyd3=yd3*winv</span>
<span id="cb16-122"><a href="#cb16-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-123"><a href="#cb16-123" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nyd4=yd4*winv</span>
<span id="cb16-124"><a href="#cb16-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-125"><a href="#cb16-125" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nyd5=yd5*winv</span>
<span id="cb16-126"><a href="#cb16-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-127"><a href="#cb16-127" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nyd6=yd6*winv</span>
<span id="cb16-128"><a href="#cb16-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-129"><a href="#cb16-129" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nyd7=yd7*winv</span>
<span id="cb16-130"><a href="#cb16-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-131"><a href="#cb16-131" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-132"><a href="#cb16-132" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlncar</span>
<span id="cb16-133"><a href="#cb16-133" aria-hidden="true" tabindex="-1"></a>  1.         <span class="kw">version</span> 7.0</span>
<span id="cb16-134"><a href="#cb16-134" aria-hidden="true" tabindex="-1"></a>  2.         <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb16-135"><a href="#cb16-135" aria-hidden="true" tabindex="-1"></a>  3.                 <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c</span></span>
<span id="cb16-136"><a href="#cb16-136" aria-hidden="true" tabindex="-1"></a><span class="st">&gt; 6 c7 c8"</span></span>
<span id="cb16-137"><a href="#cb16-137" aria-hidden="true" tabindex="-1"></a>  4.                 <span class="kw">global</span> a3=1</span>
<span id="cb16-138"><a href="#cb16-138" aria-hidden="true" tabindex="-1"></a>  5.                 <span class="kw">global</span> a4=1</span>
<span id="cb16-139"><a href="#cb16-139" aria-hidden="true" tabindex="-1"></a>  6.                 <span class="kw">global</span> a5=1     </span>
<span id="cb16-140"><a href="#cb16-140" aria-hidden="true" tabindex="-1"></a>  7.                 <span class="kw">global</span> a6=1</span>
<span id="cb16-141"><a href="#cb16-141" aria-hidden="true" tabindex="-1"></a>  8.                 <span class="kw">global</span> a7=1</span>
<span id="cb16-142"><a href="#cb16-142" aria-hidden="true" tabindex="-1"></a>  9.                 <span class="kw">global</span> b2=.1    </span>
<span id="cb16-143"><a href="#cb16-143" aria-hidden="true" tabindex="-1"></a> 10.                 <span class="kw">global</span> b3=.1</span>
<span id="cb16-144"><a href="#cb16-144" aria-hidden="true" tabindex="-1"></a> 11.                 <span class="kw">global</span> b4=.1</span>
<span id="cb16-145"><a href="#cb16-145" aria-hidden="true" tabindex="-1"></a> 12.                 <span class="kw">global</span> b5=.1</span>
<span id="cb16-146"><a href="#cb16-146" aria-hidden="true" tabindex="-1"></a> 13.                 <span class="kw">global</span> b6=.1    </span>
<span id="cb16-147"><a href="#cb16-147" aria-hidden="true" tabindex="-1"></a> 14.                 <span class="kw">global</span> b7=.1</span>
<span id="cb16-148"><a href="#cb16-148" aria-hidden="true" tabindex="-1"></a> 15.                 <span class="kw">global</span> c1=.1</span>
<span id="cb16-149"><a href="#cb16-149" aria-hidden="true" tabindex="-1"></a> 16.                 <span class="kw">global</span> c2=.1</span>
<span id="cb16-150"><a href="#cb16-150" aria-hidden="true" tabindex="-1"></a> 17.                 <span class="kw">global</span> c3=.1</span>
<span id="cb16-151"><a href="#cb16-151" aria-hidden="true" tabindex="-1"></a> 18.                 <span class="kw">global</span> c4=.1</span>
<span id="cb16-152"><a href="#cb16-152" aria-hidden="true" tabindex="-1"></a> 19.                 <span class="kw">global</span> c5=.1</span>
<span id="cb16-153"><a href="#cb16-153" aria-hidden="true" tabindex="-1"></a> 20.                 <span class="kw">global</span> c6=.1</span>
<span id="cb16-154"><a href="#cb16-154" aria-hidden="true" tabindex="-1"></a> 21.                 <span class="kw">global</span> c7=.1</span>
<span id="cb16-155"><a href="#cb16-155" aria-hidden="true" tabindex="-1"></a> 22.                 <span class="kw">global</span> c8=.1</span>
<span id="cb16-156"><a href="#cb16-156" aria-hidden="true" tabindex="-1"></a> 23.                 <span class="kw">exit</span></span>
<span id="cb16-157"><a href="#cb16-157" aria-hidden="true" tabindex="-1"></a> 24.         }</span>
<span id="cb16-158"><a href="#cb16-158" aria-hidden="true" tabindex="-1"></a> 25.         <span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*nyd3+<span class="ot">$a4</span>*nyd4+<span class="ot">$a5</span>*nyd5+<span class="ot">$a6</span>*nyd6+<span class="ot">$a7</span>*nyd7<span class="co">/*</span></span>
<span id="cb16-159"><a href="#cb16-159" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*yd2+<span class="ot">$b3</span>*yd3+<span class="ot">$b4</span>*yd4+<span class="ot">$b5</span>*yd5+<span class="ot">$b6</span>*yd6+<span class="ot">$b7</span>*yd7<span class="co">/*</span></span>
<span id="cb16-160"><a href="#cb16-160" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght+<span class="ot">$c2</span>*wdth+<span class="ot">$c3</span>*hght+<span class="ot">$c4</span>*hp+<span class="ot">$c5</span>*tran+<span class="ot">$c6</span>*ps+<span class="ot">$c7</span>*<span class="kw">ac</span>+<span class="ot">$c8</span>)</span>
<span id="cb16-161"><a href="#cb16-161" aria-hidden="true" tabindex="-1"></a> 26. </span>
<span id="cb16-162"><a href="#cb16-162" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb16-163"><a href="#cb16-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-164"><a href="#cb16-164" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-165"><a href="#cb16-165" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> ncar nprice</span>
<span id="cb16-166"><a href="#cb16-166" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 179)</span>
<span id="cb16-167"><a href="#cb16-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-168"><a href="#cb16-168" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  174.4452</span>
<span id="cb16-169"><a href="#cb16-169" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb16-170"><a href="#cb16-170" aria-hidden="true" tabindex="-1"></a>Iteration 13:  residual SS =  1.672068</span>
<span id="cb16-171"><a href="#cb16-171" aria-hidden="true" tabindex="-1"></a>Iteration 14:  residual SS =  1.672068</span>
<span id="cb16-172"><a href="#cb16-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-173"><a href="#cb16-173" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       179</span>
<span id="cb16-174"><a href="#cb16-174" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 19,   160) =    871.41</span>
<span id="cb16-175"><a href="#cb16-175" aria-hidden="true" tabindex="-1"></a>       Model |  173.025768    19  9.10661939         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb16-176"><a href="#cb16-176" aria-hidden="true" tabindex="-1"></a>    Residual |  1.67206775   160  .010450423         R-squared     =    0.9904</span>
<span id="cb16-177"><a href="#cb16-177" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9893</span>
<span id="cb16-178"><a href="#cb16-178" aria-hidden="true" tabindex="-1"></a>       Total |  174.697836   179  .975965565         Root MSE      =  .1022273</span>
<span id="cb16-179"><a href="#cb16-179" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     = -328.5451</span>
<span id="cb16-180"><a href="#cb16-180" aria-hidden="true" tabindex="-1"></a>(ncar)</span>
<span id="cb16-181"><a href="#cb16-181" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb16-182"><a href="#cb16-182" aria-hidden="true" tabindex="-1"></a>      nprice |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb16-183"><a href="#cb16-183" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb16-184"><a href="#cb16-184" aria-hidden="true" tabindex="-1"></a>          a3 |   410.4256   619.1744     0.66   0.508    -812.3829    1633.234</span>
<span id="cb16-185"><a href="#cb16-185" aria-hidden="true" tabindex="-1"></a>          a4 |    378.927   650.2562     0.58   0.561     -905.265    1663.119</span>
<span id="cb16-186"><a href="#cb16-186" aria-hidden="true" tabindex="-1"></a>          a5 |   770.6115   601.2054     1.28   0.202    -416.7099    1957.933</span>
<span id="cb16-187"><a href="#cb16-187" aria-hidden="true" tabindex="-1"></a>          a6 |   624.3817   618.9925     1.01   0.315    -598.0676    1846.831</span>
<span id="cb16-188"><a href="#cb16-188" aria-hidden="true" tabindex="-1"></a>          a7 |  -122.9148   719.4492    -0.17   0.865    -1543.756    1297.927</span>
<span id="cb16-189"><a href="#cb16-189" aria-hidden="true" tabindex="-1"></a>          b2 |   .0089535   .0309918     0.29   0.773    -.0522522    .0701592</span>
<span id="cb16-190"><a href="#cb16-190" aria-hidden="true" tabindex="-1"></a>          b3 |   .0474345   .1093808     0.43   0.665    -.1685818    .2634509</span>
<span id="cb16-191"><a href="#cb16-191" aria-hidden="true" tabindex="-1"></a>          b4 |   .0938457    .108274     0.87   0.387    -.1199848    .3076761</span>
<span id="cb16-192"><a href="#cb16-192" aria-hidden="true" tabindex="-1"></a>          b5 |   .0195742   .1052628     0.19   0.853    -.1883094    .2274579</span>
<span id="cb16-193"><a href="#cb16-193" aria-hidden="true" tabindex="-1"></a>          b6 |   .0918745   .1019572     0.90   0.369     -.109481      .29323</span>
<span id="cb16-194"><a href="#cb16-194" aria-hidden="true" tabindex="-1"></a>          b7 |   .2189293   .1012639     2.16   0.032      .018943    .4189156</span>
<span id="cb16-195"><a href="#cb16-195" aria-hidden="true" tabindex="-1"></a>          c1 |   .0254744   .1207686     0.21   0.833    -.2130317    .2639805</span>
<span id="cb16-196"><a href="#cb16-196" aria-hidden="true" tabindex="-1"></a>          c2 |   .3565755   .1083292     3.29   0.001      .142636     .570515</span>
<span id="cb16-197"><a href="#cb16-197" aria-hidden="true" tabindex="-1"></a>          c3 |  -.0630705   .0554954    -1.14   0.257    -.1726685    .0465275</span>
<span id="cb16-198"><a href="#cb16-198" aria-hidden="true" tabindex="-1"></a>          c4 |   .6899452   .0852231     8.10   0.000      .521638    .8582524</span>
<span id="cb16-199"><a href="#cb16-199" aria-hidden="true" tabindex="-1"></a>          c5 |   .1428588   .0244762     5.84   0.000     .0945207    .1911968</span>
<span id="cb16-200"><a href="#cb16-200" aria-hidden="true" tabindex="-1"></a>          c6 |   .0581011   .0272835     2.13   0.035     .0042188    .1119834</span>
<span id="cb16-201"><a href="#cb16-201" aria-hidden="true" tabindex="-1"></a>          c7 |   .1473354    .033027     4.46   0.000     .0821103    .2125606</span>
<span id="cb16-202"><a href="#cb16-202" aria-hidden="true" tabindex="-1"></a>          c8 |   6.328371   .5830815    10.85   0.000     5.176842    7.479899</span>
<span id="cb16-203"><a href="#cb16-203" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb16-204"><a href="#cb16-204" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb16-205"><a href="#cb16-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-206"><a href="#cb16-206" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb16-207"><a href="#cb16-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-208"><a href="#cb16-208" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb16-209"><a href="#cb16-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-210"><a href="#cb16-210" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb16-211"><a href="#cb16-211" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb16-212"><a href="#cb16-212" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb16-213"><a href="#cb16-213" aria-hidden="true" tabindex="-1"></a>&gt; er-8\car_reg.<span class="fu">log</span></span>
<span id="cb16-214"><a href="#cb16-214" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb16-215"><a href="#cb16-215" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 19:29:06</span>
<span id="cb16-216"><a href="#cb16-216" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb16-217"><a href="#cb16-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-218"><a href="#cb16-218" aria-hidden="true" tabindex="-1"></a>. <span class="kw">exit</span></span>
<span id="cb16-219"><a href="#cb16-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-220"><a href="#cb16-220" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="truck_reg.do" class="level4">
<h4 class="anchored" data-anchor-id="truck_reg.do">truck_reg.do</h4>
<div class="sourceCode" id="cb17"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_reg.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_reg.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_reg.<span class="fu">log</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  18 Oct 2024, 17:38:02</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_7990,<span class="kw">clear</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>(45 observations deleted)</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> lnprice=<span class="fu">log</span>(price)</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>. <span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>       <span class="fu">year</span> |      Freq.     Percent        Cum.</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>         79 |         10       13.33       13.33</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>         80 |         10       13.33       26.67</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>         81 |         11       14.67       41.33</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>         82 |         11       14.67       56.00</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>         83 |         10       13.33       69.33</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>         84 |         11       14.67       84.00</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>         85 |         12       16.00      100.00</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>      Total |         75      100.00</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nltruck_1</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>  2.         <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>  3.                 <span class="kw">global</span> S_1<span class="st">"a2 a3 a4 a5 a6 a7 b1 b2 b3 b4 b5 b6 b7 c1"</span></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>  4.                 <span class="kw">global</span> a2=1</span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>  5.                 <span class="kw">global</span> a3=1</span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>  6.                 <span class="kw">global</span> a4=1</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>  7.                 <span class="kw">global</span> a5=1</span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>  8.                 <span class="kw">global</span> a6=1</span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>  9.                 <span class="kw">global</span> a7=1</span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a> 10.                 <span class="kw">global</span> b1=1</span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a> 11.                 <span class="kw">global</span> b2=1</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a> 12.                 <span class="kw">global</span> b3=1</span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a> 13.                 <span class="kw">global</span> b4=1</span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a> 14.                 <span class="kw">global</span> b5=1</span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a> 15.                 <span class="kw">global</span> b6=1</span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a> 16.                 <span class="kw">global</span> b7=1</span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a> 17.                 <span class="kw">global</span> c1=1</span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a> 18.                 <span class="kw">exit</span></span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a> 19.         }</span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a> 20.         <span class="kw">replace</span> <span class="ot">`1'</span>=<span class="fu">exp</span>(<span class="ot">$a2</span>*yd2+<span class="ot">$a3</span>*yd3+<span class="ot">$a4</span>*yd4+<span class="ot">$a5</span>*yd5+<span class="ot">$a6</span>*yd6+<span class="ot">$a7</span>*yd7<span class="co">/*</span></span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$b1</span>*<span class="kw">weight</span>+<span class="ot">$b2</span>*wdth+<span class="ot">$b3</span>*hght+<span class="ot">$b4</span>*hp+<span class="ot">$b5</span>*tran+<span class="ot">$b6</span>*ps+<span class="ot">$b7</span>*four+<span class="ot">$c1</span>*1)</span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">end</span></span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> truck_1 price</span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 75)</span>
<span id="cb17-65"><a href="#cb17-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-66"><a href="#cb17-66" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  2.50e+17</span>
<span id="cb17-67"><a href="#cb17-67" aria-hidden="true" tabindex="-1"></a>Iteration 1:   residual SS =  3.38e+16</span>
<span id="cb17-68"><a href="#cb17-68" aria-hidden="true" tabindex="-1"></a>Iteration 2:   residual SS =  4.57e+15</span>
<span id="cb17-69"><a href="#cb17-69" aria-hidden="true" tabindex="-1"></a>Iteration 3:   residual SS =  6.18e+14</span>
<span id="cb17-70"><a href="#cb17-70" aria-hidden="true" tabindex="-1"></a>Iteration 4:   residual SS =  8.35e+13</span>
<span id="cb17-71"><a href="#cb17-71" aria-hidden="true" tabindex="-1"></a>Iteration 5:   residual SS =  1.12e+13</span>
<span id="cb17-72"><a href="#cb17-72" aria-hidden="true" tabindex="-1"></a>Iteration 6:   residual SS =  1.50e+12</span>
<span id="cb17-73"><a href="#cb17-73" aria-hidden="true" tabindex="-1"></a>Iteration 7:   residual SS =  1.96e+11</span>
<span id="cb17-74"><a href="#cb17-74" aria-hidden="true" tabindex="-1"></a>Iteration 8:   residual SS =  2.44e+10</span>
<span id="cb17-75"><a href="#cb17-75" aria-hidden="true" tabindex="-1"></a>Iteration 9:   residual SS =  2.65e+09</span>
<span id="cb17-76"><a href="#cb17-76" aria-hidden="true" tabindex="-1"></a>Iteration 10:  residual SS =  2.09e+08</span>
<span id="cb17-77"><a href="#cb17-77" aria-hidden="true" tabindex="-1"></a>Iteration 11:  residual SS =  2.03e+07</span>
<span id="cb17-78"><a href="#cb17-78" aria-hidden="true" tabindex="-1"></a>Iteration 12:  residual SS =  1.53e+07</span>
<span id="cb17-79"><a href="#cb17-79" aria-hidden="true" tabindex="-1"></a>Iteration 13:  residual SS =  1.53e+07</span>
<span id="cb17-80"><a href="#cb17-80" aria-hidden="true" tabindex="-1"></a>Iteration 14:  residual SS =  1.53e+07</span>
<span id="cb17-81"><a href="#cb17-81" aria-hidden="true" tabindex="-1"></a>Iteration 15:  residual SS =  1.53e+07</span>
<span id="cb17-82"><a href="#cb17-82" aria-hidden="true" tabindex="-1"></a>Iteration 16:  residual SS =  1.53e+07</span>
<span id="cb17-83"><a href="#cb17-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-84"><a href="#cb17-84" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =        75</span>
<span id="cb17-85"><a href="#cb17-85" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 14,    61) =   1004.27</span>
<span id="cb17-86"><a href="#cb17-86" aria-hidden="true" tabindex="-1"></a>       Model |  3.5299e+09    14   252133551         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb17-87"><a href="#cb17-87" aria-hidden="true" tabindex="-1"></a>    Residual |  15314779.4    61  251061.957         R-squared     =    0.9957</span>
<span id="cb17-88"><a href="#cb17-88" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9947</span>
<span id="cb17-89"><a href="#cb17-89" aria-hidden="true" tabindex="-1"></a>       Total |  3.5452e+09    75  47269126.6         Root MSE      =  501.0608</span>
<span id="cb17-90"><a href="#cb17-90" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     =  1129.854</span>
<span id="cb17-91"><a href="#cb17-91" aria-hidden="true" tabindex="-1"></a>(truck_1)</span>
<span id="cb17-92"><a href="#cb17-92" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb17-93"><a href="#cb17-93" aria-hidden="true" tabindex="-1"></a>       price |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb17-94"><a href="#cb17-94" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb17-95"><a href="#cb17-95" aria-hidden="true" tabindex="-1"></a>          a2 |  -.0210733   .0423824    -0.50   0.621    -.1058222    .0636756</span>
<span id="cb17-96"><a href="#cb17-96" aria-hidden="true" tabindex="-1"></a>          a3 |   .1734177   .0382242     4.54   0.000     .0969837    .2498518</span>
<span id="cb17-97"><a href="#cb17-97" aria-hidden="true" tabindex="-1"></a>          a4 |   .2001205   .0385602     5.19   0.000     .1230145    .2772264</span>
<span id="cb17-98"><a href="#cb17-98" aria-hidden="true" tabindex="-1"></a>          a5 |   .1454809   .0400948     3.63   0.001     .0653064    .2256555</span>
<span id="cb17-99"><a href="#cb17-99" aria-hidden="true" tabindex="-1"></a>          a6 |   .1825347   .0394306     4.63   0.000     .1036883    .2613811</span>
<span id="cb17-100"><a href="#cb17-100" aria-hidden="true" tabindex="-1"></a>          a7 |   .1592055    .042285     3.77   0.000     .0746514    .2437595</span>
<span id="cb17-101"><a href="#cb17-101" aria-hidden="true" tabindex="-1"></a>          b1 |   .4398295   .0564709     7.79   0.000     .3269091      .55275</span>
<span id="cb17-102"><a href="#cb17-102" aria-hidden="true" tabindex="-1"></a>          b2 |     .08571   .1119267     0.77   0.447    -.1381014    .3095213</span>
<span id="cb17-103"><a href="#cb17-103" aria-hidden="true" tabindex="-1"></a>          b3 |  -.0487976   .0470736    -1.04   0.304     -.142927    .0453318</span>
<span id="cb17-104"><a href="#cb17-104" aria-hidden="true" tabindex="-1"></a>          b4 |   .2482011   .1089575     2.28   0.026     .0303272     .466075</span>
<span id="cb17-105"><a href="#cb17-105" aria-hidden="true" tabindex="-1"></a>          b5 |   .0341161   .0249591     1.37   0.177    -.0157928    .0840249</span>
<span id="cb17-106"><a href="#cb17-106" aria-hidden="true" tabindex="-1"></a>          b6 |   .0942558   .0337561     2.79   0.007     .0267564    .1617552</span>
<span id="cb17-107"><a href="#cb17-107" aria-hidden="true" tabindex="-1"></a>          b7 |   .2292275   .0271818     8.43   0.000     .1748741    .2835808</span>
<span id="cb17-108"><a href="#cb17-108" aria-hidden="true" tabindex="-1"></a>          c1 |   7.536871   .5461675    13.80   0.000     6.444741       8.629</span>
<span id="cb17-109"><a href="#cb17-109" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb17-110"><a href="#cb17-110" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb17-111"><a href="#cb17-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-112"><a href="#cb17-112" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb17-113"><a href="#cb17-113" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[a2]*yd2+_b[a3]*yd3+_b[a4]*yd4+_b[a5]*yd5+_b[a6]*yd6+_b[a7]*yd7<span class="co">/*</span></span>
<span id="cb17-114"><a href="#cb17-114" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[b1]*<span class="kw">weight</span>+_b[b2]*wdth+_b[b3]*hght+_b[b4]*hp+_b[b5]*tran+_b[b6]*ps+_b[b7]*four+_b[c1]*1)</span>
<span id="cb17-115"><a href="#cb17-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-116"><a href="#cb17-116" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb17-117"><a href="#cb17-117" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nprice=price*winv</span>
<span id="cb17-118"><a href="#cb17-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-119"><a href="#cb17-119" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb17-120"><a href="#cb17-120" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nltruck_2</span>
<span id="cb17-121"><a href="#cb17-121" aria-hidden="true" tabindex="-1"></a>  1.         <span class="kw">version</span> 7.0</span>
<span id="cb17-122"><a href="#cb17-122" aria-hidden="true" tabindex="-1"></a>  2.         <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb17-123"><a href="#cb17-123" aria-hidden="true" tabindex="-1"></a>  3.                 <span class="kw">global</span> S_1<span class="st">"a2 a3 a4 a5 a6 a7 b1 b2 b3 b4 b5 b6 b7 c1"</span></span>
<span id="cb17-124"><a href="#cb17-124" aria-hidden="true" tabindex="-1"></a>  4.                 <span class="kw">global</span> a2=1</span>
<span id="cb17-125"><a href="#cb17-125" aria-hidden="true" tabindex="-1"></a>  5.                 <span class="kw">global</span> a3=1</span>
<span id="cb17-126"><a href="#cb17-126" aria-hidden="true" tabindex="-1"></a>  6.                 <span class="kw">global</span> a4=1</span>
<span id="cb17-127"><a href="#cb17-127" aria-hidden="true" tabindex="-1"></a>  7.                 <span class="kw">global</span> a5=1</span>
<span id="cb17-128"><a href="#cb17-128" aria-hidden="true" tabindex="-1"></a>  8.                 <span class="kw">global</span> a6=1</span>
<span id="cb17-129"><a href="#cb17-129" aria-hidden="true" tabindex="-1"></a>  9.                 <span class="kw">global</span> a7=1</span>
<span id="cb17-130"><a href="#cb17-130" aria-hidden="true" tabindex="-1"></a> 10.                 <span class="kw">global</span> b1=1</span>
<span id="cb17-131"><a href="#cb17-131" aria-hidden="true" tabindex="-1"></a> 11.                 <span class="kw">global</span> b2=1</span>
<span id="cb17-132"><a href="#cb17-132" aria-hidden="true" tabindex="-1"></a> 12.                 <span class="kw">global</span> b3=1</span>
<span id="cb17-133"><a href="#cb17-133" aria-hidden="true" tabindex="-1"></a> 13.                 <span class="kw">global</span> b4=1</span>
<span id="cb17-134"><a href="#cb17-134" aria-hidden="true" tabindex="-1"></a> 14.                 <span class="kw">global</span> b5=1</span>
<span id="cb17-135"><a href="#cb17-135" aria-hidden="true" tabindex="-1"></a> 15.                 <span class="kw">global</span> b6=1</span>
<span id="cb17-136"><a href="#cb17-136" aria-hidden="true" tabindex="-1"></a> 16.                 <span class="kw">global</span> b7=1</span>
<span id="cb17-137"><a href="#cb17-137" aria-hidden="true" tabindex="-1"></a> 17.                 <span class="kw">global</span> c1=1</span>
<span id="cb17-138"><a href="#cb17-138" aria-hidden="true" tabindex="-1"></a> 18.                 <span class="kw">exit</span></span>
<span id="cb17-139"><a href="#cb17-139" aria-hidden="true" tabindex="-1"></a> 19.         }</span>
<span id="cb17-140"><a href="#cb17-140" aria-hidden="true" tabindex="-1"></a> 20.         <span class="kw">replace</span> <span class="ot">`1'</span>=winv*<span class="fu">exp</span>(<span class="ot">$a2</span>*yd2+<span class="ot">$a3</span>*yd3+<span class="ot">$a4</span>*yd4+<span class="ot">$a5</span>*yd5+<span class="ot">$a6</span>*yd6+<span class="ot">$a7</span>*yd7<span class="co">/*</span></span>
<span id="cb17-141"><a href="#cb17-141" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$b1</span>*<span class="kw">weight</span>+<span class="ot">$b2</span>*wdth+<span class="ot">$b3</span>*hght+<span class="ot">$b4</span>*hp+<span class="ot">$b5</span>*tran+<span class="ot">$b6</span>*ps+<span class="ot">$b7</span>*four+<span class="ot">$c1</span>*1)</span>
<span id="cb17-142"><a href="#cb17-142" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">end</span></span>
<span id="cb17-143"><a href="#cb17-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-144"><a href="#cb17-144" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb17-145"><a href="#cb17-145" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> truck_2 nprice</span>
<span id="cb17-146"><a href="#cb17-146" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 75)</span>
<span id="cb17-147"><a href="#cb17-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-148"><a href="#cb17-148" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  2.27e+09</span>
<span id="cb17-149"><a href="#cb17-149" aria-hidden="true" tabindex="-1"></a>Iteration 1:   residual SS =  3.07e+08</span>
<span id="cb17-150"><a href="#cb17-150" aria-hidden="true" tabindex="-1"></a>Iteration 2:   residual SS =  4.15e+07</span>
<span id="cb17-151"><a href="#cb17-151" aria-hidden="true" tabindex="-1"></a>Iteration 3:   residual SS =   5608900</span>
<span id="cb17-152"><a href="#cb17-152" aria-hidden="true" tabindex="-1"></a>Iteration 4:   residual SS =  757532.6</span>
<span id="cb17-153"><a href="#cb17-153" aria-hidden="true" tabindex="-1"></a>Iteration 5:   residual SS =  101968.1</span>
<span id="cb17-154"><a href="#cb17-154" aria-hidden="true" tabindex="-1"></a>Iteration 6:   residual SS =  13611.98</span>
<span id="cb17-155"><a href="#cb17-155" aria-hidden="true" tabindex="-1"></a>Iteration 7:   residual SS =   1784.24</span>
<span id="cb17-156"><a href="#cb17-156" aria-hidden="true" tabindex="-1"></a>Iteration 8:   residual SS =  224.5781</span>
<span id="cb17-157"><a href="#cb17-157" aria-hidden="true" tabindex="-1"></a>Iteration 9:   residual SS =  24.89367</span>
<span id="cb17-158"><a href="#cb17-158" aria-hidden="true" tabindex="-1"></a>Iteration 10:  residual SS =  2.123931</span>
<span id="cb17-159"><a href="#cb17-159" aria-hidden="true" tabindex="-1"></a>Iteration 11:  residual SS =  .3646277</span>
<span id="cb17-160"><a href="#cb17-160" aria-hidden="true" tabindex="-1"></a>Iteration 12:  residual SS =  .3191061</span>
<span id="cb17-161"><a href="#cb17-161" aria-hidden="true" tabindex="-1"></a>Iteration 13:  residual SS =  .3190177</span>
<span id="cb17-162"><a href="#cb17-162" aria-hidden="true" tabindex="-1"></a>Iteration 14:  residual SS =  .3190176</span>
<span id="cb17-163"><a href="#cb17-163" aria-hidden="true" tabindex="-1"></a>Iteration 15:  residual SS =  .3190176</span>
<span id="cb17-164"><a href="#cb17-164" aria-hidden="true" tabindex="-1"></a>Iteration 16:  residual SS =  .3190176</span>
<span id="cb17-165"><a href="#cb17-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-166"><a href="#cb17-166" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =        75</span>
<span id="cb17-167"><a href="#cb17-167" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 14,    61) =   1023.93</span>
<span id="cb17-168"><a href="#cb17-168" aria-hidden="true" tabindex="-1"></a>       Model |  74.9691322    14  5.35493802         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb17-169"><a href="#cb17-169" aria-hidden="true" tabindex="-1"></a>    Residual |  .319017551    61  .005229796         R-squared     =    0.9958</span>
<span id="cb17-170"><a href="#cb17-170" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9948</span>
<span id="cb17-171"><a href="#cb17-171" aria-hidden="true" tabindex="-1"></a>       Total |  75.2881498    75    1.003842         Root MSE      =  .0723173</span>
<span id="cb17-172"><a href="#cb17-172" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     =  -196.659</span>
<span id="cb17-173"><a href="#cb17-173" aria-hidden="true" tabindex="-1"></a>(truck_2)</span>
<span id="cb17-174"><a href="#cb17-174" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb17-175"><a href="#cb17-175" aria-hidden="true" tabindex="-1"></a>      nprice |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb17-176"><a href="#cb17-176" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb17-177"><a href="#cb17-177" aria-hidden="true" tabindex="-1"></a>          a2 |   .0041382   .0326606     0.13   0.900    -.0611707    .0694472</span>
<span id="cb17-178"><a href="#cb17-178" aria-hidden="true" tabindex="-1"></a>          a3 |   .2093262   .0318227     6.58   0.000     .1456929    .2729596</span>
<span id="cb17-179"><a href="#cb17-179" aria-hidden="true" tabindex="-1"></a>          a4 |   .2295212   .0329551     6.96   0.000     .1636235     .295419</span>
<span id="cb17-180"><a href="#cb17-180" aria-hidden="true" tabindex="-1"></a>          a5 |   .1715058   .0348772     4.92   0.000     .1017645    .2412471</span>
<span id="cb17-181"><a href="#cb17-181" aria-hidden="true" tabindex="-1"></a>          a6 |   .1898806   .0347216     5.47   0.000     .1204505    .2593108</span>
<span id="cb17-182"><a href="#cb17-182" aria-hidden="true" tabindex="-1"></a>          a7 |   .1803588   .0370176     4.87   0.000     .1063376      .25438</span>
<span id="cb17-183"><a href="#cb17-183" aria-hidden="true" tabindex="-1"></a>          b1 |   .4115021   .0823391     5.00   0.000      .246855    .5761493</span>
<span id="cb17-184"><a href="#cb17-184" aria-hidden="true" tabindex="-1"></a>          b2 |   .0141524   .1005163     0.14   0.888    -.1868423    .2151472</span>
<span id="cb17-185"><a href="#cb17-185" aria-hidden="true" tabindex="-1"></a>          b3 |   .0054683   .0515606     0.11   0.916    -.0976334      .10857</span>
<span id="cb17-186"><a href="#cb17-186" aria-hidden="true" tabindex="-1"></a>          b4 |   .1979945   .1020843     1.94   0.057    -.0061357    .4021247</span>
<span id="cb17-187"><a href="#cb17-187" aria-hidden="true" tabindex="-1"></a>          b5 |   .0294082     .02481     1.19   0.240    -.0202025    .0790188</span>
<span id="cb17-188"><a href="#cb17-188" aria-hidden="true" tabindex="-1"></a>          b6 |   .0901756   .0435822     2.07   0.043     .0030275    .1773236</span>
<span id="cb17-189"><a href="#cb17-189" aria-hidden="true" tabindex="-1"></a>          b7 |   .2159646   .0267321     8.08   0.000     .1625105    .2694187</span>
<span id="cb17-190"><a href="#cb17-190" aria-hidden="true" tabindex="-1"></a>          c1 |   7.705805   .4974887    15.49   0.000     6.711015    8.700595</span>
<span id="cb17-191"><a href="#cb17-191" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb17-192"><a href="#cb17-192" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb17-193"><a href="#cb17-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-194"><a href="#cb17-194" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb17-195"><a href="#cb17-195" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb17-196"><a href="#cb17-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-197"><a href="#cb17-197" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb17-198"><a href="#cb17-198" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb17-199"><a href="#cb17-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-200"><a href="#cb17-200" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb17-201"><a href="#cb17-201" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb17-202"><a href="#cb17-202" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_reg.<span class="fu">log</span></span>
<span id="cb17-203"><a href="#cb17-203" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb17-204"><a href="#cb17-204" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  18 Oct 2024, 17:38:02</span>
<span id="cb17-205"><a href="#cb17-205" aria-hidden="true" tabindex="-1"></a>--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span id="cb17-206"><a href="#cb17-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-207"><a href="#cb17-207" aria-hidden="true" tabindex="-1"></a>. <span class="kw">exit</span></span>
<span id="cb17-208"><a href="#cb17-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-209"><a href="#cb17-209" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="my-code-1" class="level3">
<h3 class="anchored" data-anchor-id="my-code-1">My code</h3>
<section id="car_reg.do-1" class="level4">
<h4 class="anchored" data-anchor-id="car_reg.do-1">car_reg.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(minpack.lm) <span class="co"># for nlsLM()</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;</span> <span class="dv">86</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yd =</span> <span class="fu">factor</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(yd) <span class="sc">%&gt;%</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(yd) <span class="sc">%&gt;%</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent =</span> freq <span class="sc">/</span> <span class="fu">sum</span>(freq) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">cum =</span> <span class="fu">cumsum</span>(percent)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
  yd     freq percent   cum
  &lt;fct&gt; &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;
1 79       21    11.7  11.7
2 80       24    13.4  25.1
3 81       24    13.4  38.5
4 82       24    13.4  52.0
5 83       26    14.5  66.5
6 84       29    16.2  82.7
7 85       31    17.3 100  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># expand the yd variable to 0/1 columns</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># in R, you cannot multiply a factor/categorical variable</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yd_ind =</span> <span class="fu">as.integer</span>(yd)) <span class="sc">%&gt;%</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yd_ind =</span> <span class="fu">as.factor</span>(yd_ind <span class="sc">-</span> <span class="fu">min</span>(yd_ind) <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>car_7990_dummy <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span> yd_ind <span class="sc">-</span> <span class="dv">1</span>, <span class="at">data =</span> car_7990)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(car_7990_dummy) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"_ind"</span>, <span class="st">""</span>, <span class="fu">colnames</span>(car_7990_dummy))</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">as.data.frame</span>(car_7990_dummy))</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="co"># fit the non-linear specification with initial values</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="co"># nls() fails, so I use nlsLM() that implements the Levenberg-Marquardt</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="co"># algorithm</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>initial_values <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">a3 =</span> <span class="dv">1</span>, <span class="at">a4 =</span> <span class="dv">1</span>, <span class="at">a5 =</span> <span class="dv">1</span>, <span class="at">a6 =</span> <span class="dv">1</span>, <span class="at">a7 =</span> <span class="dv">1</span>,</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">b2 =</span> <span class="fl">0.1</span>, <span class="at">b3 =</span> <span class="fl">0.1</span>, <span class="at">b4 =</span> <span class="fl">0.1</span>, <span class="at">b5 =</span> <span class="fl">0.1</span>, <span class="at">b6 =</span> <span class="fl">0.1</span>, <span class="at">b7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">c1 =</span> <span class="fl">0.1</span>, <span class="at">c2 =</span> <span class="fl">0.1</span>, <span class="at">c3 =</span> <span class="fl">0.1</span>, <span class="at">c4 =</span> <span class="fl">0.1</span>, <span class="at">c5 =</span> <span class="fl">0.1</span>, <span class="at">c6 =</span> <span class="fl">0.1</span>, <span class="at">c7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">c8 =</span> <span class="fl">0.1</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  price <span class="sc">~</span> a3 <span class="sc">*</span> yd3 <span class="sc">+</span> a4 <span class="sc">*</span> yd4 <span class="sc">+</span> a5 <span class="sc">*</span> yd5 <span class="sc">+</span> a6 <span class="sc">*</span> yd6 <span class="sc">+</span> a7 <span class="sc">*</span> yd7 <span class="sc">+</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>      b2 <span class="sc">*</span> yd2 <span class="sc">+</span> b3 <span class="sc">*</span> yd3 <span class="sc">+</span> b4 <span class="sc">*</span> yd4 <span class="sc">+</span> b5 <span class="sc">*</span> yd5 <span class="sc">+</span> b6 <span class="sc">*</span> yd6 <span class="sc">+</span> b7 <span class="sc">*</span> yd7 <span class="sc">+</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>        c1 <span class="sc">*</span> wght <span class="sc">+</span> c2 <span class="sc">*</span> wdth <span class="sc">+</span> c3 <span class="sc">*</span> hght <span class="sc">+</span> c4 <span class="sc">*</span> hp <span class="sc">+</span> c5 <span class="sc">*</span> tran <span class="sc">+</span> c6 <span class="sc">*</span> ps <span class="sc">+</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>        c7 <span class="sc">*</span> ac <span class="sc">+</span> c8</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> car_7990,</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values</span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: price ~ a3 * yd3 + a4 * yd4 + a5 * yd5 + a6 * yd6 + a7 * yd7 + 
    exp(b2 * yd2 + b3 * yd3 + b4 * yd4 + b5 * yd5 + b6 * yd6 + 
        b7 * yd7 + c1 * wght + c2 * wdth + c3 * hght + c4 * hp + 
        c5 * tran + c6 * ps + c7 * ac + c8)

Parameters:
     Estimate Std. Error t value Pr(&gt;|t|)    
a3 -2.947e+02  7.233e+02  -0.407 0.684236    
a4 -3.049e+02  7.145e+02  -0.427 0.670137    
a5 -1.374e+02  7.008e+02  -0.196 0.844867    
a6  7.293e+01  6.954e+02   0.105 0.916608    
a7 -1.033e+02  7.429e+02  -0.139 0.889554    
b2  9.967e-03  3.630e-02   0.275 0.783991    
b3  1.523e-01  1.023e-01   1.489 0.138586    
b4  1.899e-01  9.653e-02   1.968 0.050842 .  
b5  1.541e-01  9.591e-02   1.607 0.110130    
b6  1.730e-01  9.447e-02   1.831 0.068972 .  
b7  2.274e-01  9.450e-02   2.407 0.017243 *  
c1 -6.998e-04  1.022e-01  -0.007 0.994545    
c2  3.682e-01  1.020e-01   3.610 0.000409 ***
c3 -1.432e-01  5.194e-02  -2.756 0.006522 ** 
c4  6.070e-01  6.652e-02   9.126 2.93e-16 ***
c5  1.316e-01  2.645e-02   4.975 1.67e-06 ***
c6  5.158e-02  2.182e-02   2.364 0.019283 *  
c7  1.635e-01  2.285e-02   7.157 2.81e-11 ***
c8  6.730e+00  5.719e-01  11.768  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 724.1 on 160 degrees of freedom

Number of iterations to convergence: 19 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>fit_coef <span class="ot">&lt;-</span> <span class="fu">coef</span>(fit)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">winv =</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>(fit_coef[<span class="st">"b2"</span>] <span class="sc">*</span> yd2 <span class="sc">+</span> fit_coef[<span class="st">"b3"</span>] <span class="sc">*</span> yd3 <span class="sc">+</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>      fit_coef[<span class="st">"b4"</span>] <span class="sc">*</span> yd4 <span class="sc">+</span> fit_coef[<span class="st">"b5"</span>] <span class="sc">*</span> yd5 <span class="sc">+</span> fit_coef[<span class="st">"b6"</span>] <span class="sc">*</span> yd6 <span class="sc">+</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>      fit_coef[<span class="st">"b7"</span>] <span class="sc">*</span> yd7 <span class="sc">+</span> fit_coef[<span class="st">"c1"</span>] <span class="sc">*</span> wght <span class="sc">+</span> fit_coef[<span class="st">"c2"</span>] <span class="sc">*</span> wdth <span class="sc">+</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>      fit_coef[<span class="st">"c3"</span>] <span class="sc">*</span> hght <span class="sc">+</span> fit_coef[<span class="st">"c4"</span>] <span class="sc">*</span> hp <span class="sc">+</span> fit_coef[<span class="st">"c5"</span>] <span class="sc">*</span> tran <span class="sc">+</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>      fit_coef[<span class="st">"c6"</span>] <span class="sc">*</span> ps <span class="sc">+</span> fit_coef[<span class="st">"c7"</span>] <span class="sc">*</span> ac <span class="sc">+</span> fit_coef[<span class="st">"c8"</span>]),</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">nprice =</span> price <span class="sc">*</span> winv,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">nyd3 =</span> yd3 <span class="sc">*</span> winv,</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">nyd4 =</span> yd4 <span class="sc">*</span> winv,</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">nyd5 =</span> yd5 <span class="sc">*</span> winv,</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">nyd6 =</span> yd6 <span class="sc">*</span> winv,</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">nyd7 =</span> yd7 <span class="sc">*</span> winv</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>fit2 <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>  nprice <span class="sc">~</span> a3 <span class="sc">*</span> nyd3 <span class="sc">+</span> a4 <span class="sc">*</span> nyd4 <span class="sc">+</span> a5 <span class="sc">*</span> nyd5 <span class="sc">+</span> a6 <span class="sc">*</span> nyd6 <span class="sc">+</span> a7 <span class="sc">*</span> nyd7 <span class="sc">+</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>      b2 <span class="sc">*</span> yd2 <span class="sc">+</span> b3 <span class="sc">*</span> yd3 <span class="sc">+</span> b4 <span class="sc">*</span> yd4 <span class="sc">+</span> b5 <span class="sc">*</span> yd5 <span class="sc">+</span> b6 <span class="sc">*</span> yd6 <span class="sc">+</span> b7 <span class="sc">*</span> yd7 <span class="sc">+</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>        c1 <span class="sc">*</span> wght <span class="sc">+</span> c2 <span class="sc">*</span> wdth <span class="sc">+</span> c3 <span class="sc">*</span> hght <span class="sc">+</span> c4 <span class="sc">*</span> hp <span class="sc">+</span> c5 <span class="sc">*</span> tran <span class="sc">+</span> c6 <span class="sc">*</span> ps <span class="sc">+</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>        c7 <span class="sc">*</span> ac <span class="sc">+</span> c8</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> car_7990,</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values,</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># increase the number of iterations to avoid convergence issues</span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">nls.lm.control</span>(<span class="at">maxiter =</span> <span class="dv">1000</span>, <span class="at">maxfev =</span> <span class="dv">10000</span>)</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: nprice ~ a3 * nyd3 + a4 * nyd4 + a5 * nyd5 + a6 * nyd6 + a7 * 
    nyd7 + winv * exp(b2 * yd2 + b3 * yd3 + b4 * yd4 + b5 * yd5 + 
    b6 * yd6 + b7 * yd7 + c1 * wght + c2 * wdth + c3 * hght + 
    c4 * hp + c5 * tran + c6 * ps + c7 * ac + c8)

Parameters:
     Estimate Std. Error t value Pr(&gt;|t|)    
a3  4.105e+02  6.192e+02   0.663  0.50834    
a4  3.789e+02  6.503e+02   0.583  0.56087    
a5  7.706e+02  6.012e+02   1.282  0.20176    
a6  6.244e+02  6.190e+02   1.009  0.31465    
a7 -1.229e+02  7.194e+02  -0.171  0.86455    
b2  8.954e-03  3.099e-02   0.289  0.77303    
b3  4.743e-02  1.094e-01   0.434  0.66515    
b4  9.384e-02  1.083e-01   0.867  0.38740    
b5  1.957e-02  1.053e-01   0.186  0.85274    
b6  9.188e-02  1.020e-01   0.901  0.36887    
b7  2.189e-01  1.013e-01   2.162  0.03211 *  
c1  2.548e-02  1.208e-01   0.211  0.83316    
c2  3.566e-01  1.083e-01   3.292  0.00123 ** 
c3 -6.306e-02  5.550e-02  -1.136  0.25748    
c4  6.899e-01  8.522e-02   8.096 1.36e-13 ***
c5  1.429e-01  2.448e-02   5.837 2.88e-08 ***
c6  5.810e-02  2.728e-02   2.130  0.03474 *  
c7  1.473e-01  3.303e-02   4.461 1.53e-05 ***
c8  6.328e+00  5.831e-01  10.853  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1022 on 160 degrees of freedom

Number of iterations to convergence: 18 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
</div>
</section>
<section id="truck_reg.do-1" class="level4">
<h4 class="anchored" data-anchor-id="truck_reg.do-1">truck_reg.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;</span> <span class="dv">86</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">lnprice =</span> <span class="fu">log</span>(price),</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">yd =</span> <span class="fu">factor</span>(year)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(yd) <span class="sc">%&gt;%</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">wght =</span> weight)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(yd) <span class="sc">%&gt;%</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent =</span> freq <span class="sc">/</span> <span class="fu">sum</span>(freq) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">cum =</span> <span class="fu">cumsum</span>(percent)</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
  yd     freq percent   cum
  &lt;fct&gt; &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;
1 79       10    13.3  13.3
2 80       10    13.3  26.7
3 81       11    14.7  41.3
4 82       11    14.7  56  
5 83       10    13.3  69.3
6 84       11    14.7  84  
7 85       12    16   100  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I will use b8 instead of c1 to avoid extra tidying later</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>initial_values <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">a2 =</span> <span class="dv">1</span>, <span class="at">a3 =</span> <span class="dv">1</span>, <span class="at">a4 =</span> <span class="dv">1</span>, <span class="at">a5 =</span> <span class="dv">1</span>, <span class="at">a6 =</span> <span class="dv">1</span>, <span class="at">a7 =</span> <span class="dv">1</span>,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">b1 =</span> <span class="dv">1</span>, <span class="at">b2 =</span> <span class="dv">1</span>, <span class="at">b3 =</span> <span class="dv">1</span>, <span class="at">b4 =</span> <span class="dv">1</span>, <span class="at">b5 =</span> <span class="dv">1</span>, <span class="at">b6 =</span> <span class="dv">1</span>, <span class="at">b7 =</span> <span class="dv">1</span>, <span class="at">b8 =</span> <span class="dv">1</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yd_ind =</span> <span class="fu">as.integer</span>(yd)) <span class="sc">%&gt;%</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yd_ind =</span> <span class="fu">as.factor</span>(yd_ind <span class="sc">-</span> <span class="fu">min</span>(yd_ind) <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>truck_7990_dummy <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span> yd_ind <span class="sc">-</span> <span class="dv">1</span>, <span class="at">data =</span> truck_7990)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(truck_7990_dummy) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"_ind"</span>, <span class="st">""</span>, <span class="fu">colnames</span>(truck_7990_dummy))</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">as.data.frame</span>(truck_7990_dummy))</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>fit3 <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  lnprice <span class="sc">~</span> <span class="fu">exp</span>(a2 <span class="sc">*</span> yd2 <span class="sc">+</span> a3 <span class="sc">*</span> yd3 <span class="sc">+</span> a4 <span class="sc">*</span> yd4 <span class="sc">+</span> a5 <span class="sc">*</span> yd5 <span class="sc">+</span> a6 <span class="sc">*</span> yd6 <span class="sc">+</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    a7 <span class="sc">*</span> yd7 <span class="sc">+</span> b1 <span class="sc">*</span> wght <span class="sc">+</span> b2 <span class="sc">*</span> wdth <span class="sc">+</span> b3 <span class="sc">*</span> hght <span class="sc">+</span> b4 <span class="sc">*</span> hp <span class="sc">+</span> b5 <span class="sc">*</span> tran <span class="sc">+</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>    b6 <span class="sc">*</span> ps <span class="sc">+</span> b7 <span class="sc">*</span> four <span class="sc">+</span> b8),</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: lnprice ~ exp(a2 * yd2 + a3 * yd3 + a4 * yd4 + a5 * yd5 + a6 * 
    yd6 + a7 * yd7 + b1 * wght + b2 * wdth + b3 * hght + b4 * 
    hp + b5 * tran + b6 * ps + b7 * four + b8)

Parameters:
    Estimate Std. Error t value Pr(&gt;|t|)    
a2 0.0005705  0.0037259   0.153   0.8788    
a3 0.0240717  0.0036050   6.677 8.28e-09 ***
a4 0.0263975  0.0037132   7.109 1.50e-09 ***
a5 0.0199685  0.0039124   5.104 3.50e-06 ***
a6 0.0221336  0.0038661   5.725 3.37e-07 ***
a7 0.0207545  0.0041371   5.017 4.83e-06 ***
b1 0.0444571  0.0087268   5.094 3.63e-06 ***
b2 0.0030967  0.0112786   0.275   0.7846    
b3 0.0004542  0.0056452   0.080   0.9361    
b4 0.0235098  0.0114640   2.051   0.0446 *  
b5 0.0035386  0.0027552   1.284   0.2039    
b6 0.0097044  0.0046752   2.076   0.0421 *  
b7 0.0246971  0.0029674   8.323 1.23e-11 ***
b8 2.0445709  0.0557319  36.686  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.07091 on 61 degrees of freedom

Number of iterations to convergence: 23 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>fit_coef <span class="ot">&lt;-</span> <span class="fu">coef</span>(fit3)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">winv =</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>(fit_coef[<span class="st">"a2"</span>] <span class="sc">*</span> yd2 <span class="sc">+</span> fit_coef[<span class="st">"a3"</span>] <span class="sc">*</span> yd3 <span class="sc">+</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>      fit_coef[<span class="st">"a4"</span>] <span class="sc">*</span> yd4 <span class="sc">+</span> fit_coef[<span class="st">"a5"</span>] <span class="sc">*</span> yd5 <span class="sc">+</span> fit_coef[<span class="st">"a6"</span>] <span class="sc">*</span> yd6 <span class="sc">+</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>      fit_coef[<span class="st">"a7"</span>] <span class="sc">*</span> yd7 <span class="sc">+</span> fit_coef[<span class="st">"b1"</span>] <span class="sc">*</span> wght <span class="sc">+</span> fit_coef[<span class="st">"b2"</span>] <span class="sc">*</span> wdth <span class="sc">+</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>      fit_coef[<span class="st">"b3"</span>] <span class="sc">*</span> hght <span class="sc">+</span> fit_coef[<span class="st">"b4"</span>] <span class="sc">*</span> hp <span class="sc">+</span> fit_coef[<span class="st">"b5"</span>] <span class="sc">*</span> tran <span class="sc">+</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>      fit_coef[<span class="st">"b6"</span>] <span class="sc">*</span> ps <span class="sc">+</span> fit_coef[<span class="st">"b7"</span>] <span class="sc">*</span> four <span class="sc">+</span> fit_coef[<span class="st">"b8"</span>]),</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">nprice =</span> price <span class="sc">*</span> winv</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>fit4 <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>  nprice <span class="sc">~</span> winv <span class="sc">*</span> <span class="fu">exp</span>(a2 <span class="sc">*</span> yd2 <span class="sc">+</span> a3 <span class="sc">*</span> yd3 <span class="sc">+</span> a4 <span class="sc">*</span> yd4 <span class="sc">+</span> a5 <span class="sc">*</span> yd5 <span class="sc">+</span> a6 <span class="sc">*</span> yd6 <span class="sc">+</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    a7 <span class="sc">*</span> yd7 <span class="sc">+</span> b1 <span class="sc">*</span> wght <span class="sc">+</span> b2 <span class="sc">*</span> wdth <span class="sc">+</span> b3 <span class="sc">*</span> hght <span class="sc">+</span> b4 <span class="sc">*</span> hp <span class="sc">+</span> b5 <span class="sc">*</span> tran <span class="sc">+</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    b6 <span class="sc">*</span> ps <span class="sc">+</span> b7 <span class="sc">*</span> four <span class="sc">+</span> b8),</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values,</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">nls.lm.control</span>(<span class="at">maxiter =</span> <span class="dv">1000</span>, <span class="at">maxfev =</span> <span class="dv">10000</span>)</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: nprice ~ winv * exp(a2 * yd2 + a3 * yd3 + a4 * yd4 + a5 * yd5 + 
    a6 * yd6 + a7 * yd7 + b1 * wght + b2 * wdth + b3 * hght + 
    b4 * hp + b5 * tran + b6 * ps + b7 * four + b8)

Parameters:
   Estimate Std. Error t value Pr(&gt;|t|)    
a2 -0.01752    0.04115  -0.426 0.671808    
a3  0.17842    0.03740   4.771 1.19e-05 ***
a4  0.20406    0.03782   5.396 1.18e-06 ***
a5  0.14882    0.03941   3.777 0.000363 ***
a6  0.18356    0.03874   4.738 1.33e-05 ***
a7  0.16232    0.04151   3.910 0.000234 ***
b1  0.43760    0.05855   7.473 3.55e-10 ***
b2  0.07716    0.11049   0.698 0.487617    
b3 -0.04245    0.04740  -0.896 0.373973    
b4  0.23968    0.10844   2.210 0.030841 *  
b5  0.03410    0.02494   1.367 0.176684    
b6  0.09343    0.03465   2.696 0.009053 ** 
b7  0.22790    0.02709   8.412 8.62e-12 ***
b8  7.55794    0.53930  14.014  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 56.58 on 61 degrees of freedom

Number of iterations to convergence: 15 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
</div>
</section>
</section>
<section id="extra-step-formatting-the-tables" class="level3">
<h3 class="anchored" data-anchor-id="extra-step-formatting-the-tables">Extra step: formatting the tables</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># function to avoid repeating the same code four times</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>reshape_estimates <span class="ot">&lt;-</span> <span class="cf">function</span>(fit, vehicle, term_prefix, term_mappings) {</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(fit) <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(term <span class="sc">%in%</span> <span class="fu">paste0</span>(term_prefix, <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">term =</span> <span class="fu">case_when</span>(</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"1"</span>) <span class="sc">~</span> term_mappings[<span class="dv">1</span>],</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"2"</span>) <span class="sc">~</span> term_mappings[<span class="dv">2</span>],</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"3"</span>) <span class="sc">~</span> term_mappings[<span class="dv">3</span>],</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"4"</span>) <span class="sc">~</span> term_mappings[<span class="dv">4</span>],</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"5"</span>) <span class="sc">~</span> term_mappings[<span class="dv">5</span>],</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"6"</span>) <span class="sc">~</span> term_mappings[<span class="dv">6</span>],</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"7"</span>) <span class="sc">~</span> term_mappings[<span class="dv">7</span>],</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"8"</span>) <span class="sc">~</span> term_mappings[<span class="dv">8</span>]</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(term, estimate, std.error) <span class="sc">%&gt;%</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">cols =</span> <span class="fu">c</span>(estimate, std.error), <span class="at">names_to =</span> <span class="st">"stat"</span>,</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">stat =</span> <span class="fu">if_else</span>(stat <span class="sc">==</span> <span class="st">"estimate"</span>, <span class="st">"Estimate"</span>, <span class="st">"Std. Error"</span>),</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">value =</span> <span class="fu">round</span>(value, <span class="dv">3</span>)</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="sc">!!</span><span class="fu">sym</span>(vehicle) <span class="sc">:</span><span class="er">=</span> value)</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>car_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Weight (tons)"</span>, <span class="st">"Width (feet)"</span>, <span class="st">"Height (feet)"</span>, <span class="st">"Horsepower (100)"</span>,</span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Transmission (5-speed or auto)"</span>, <span class="st">"Power steering"</span>, <span class="st">"Air conditioning"</span>, <span class="st">"Constant"</span></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>truck_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Weight (tons)"</span>, <span class="st">"Width (feet)"</span>, <span class="st">"Height (feet)"</span>, <span class="st">"Horsepower (100)"</span>,</span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Transmission (5-speed or auto)"</span>, <span class="st">"Power steering"</span>, <span class="st">"Four-wheel drive"</span>, <span class="st">"Constant"</span></span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a>ordered_vars <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">c</span>(car_vars, truck_vars))</span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a>ordered_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Constant"</span>, ordered_vars[ordered_vars <span class="sc">!=</span> <span class="st">"Constant"</span>])</span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a>table_84_1 <span class="ot">&lt;-</span> <span class="fu">reshape_estimates</span>(fit2, <span class="st">"Car"</span>, <span class="st">"c"</span>, car_vars) <span class="sc">%&gt;%</span></span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(<span class="fu">reshape_estimates</span>(fit4, <span class="st">"Truck"</span>, <span class="st">"b"</span>, truck_vars)) <span class="sc">%&gt;%</span></span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate term to factor + keep Constant at the beginning</span></span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">term =</span> <span class="fu">factor</span>(term, <span class="at">levels =</span> ordered_vars)</span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb30-48"><a href="#cb30-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(term)</span>
<span id="cb30-49"><a href="#cb30-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-50"><a href="#cb30-50" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(table_84_1) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Variable"</span>, <span class="st">"Statistic"</span>, <span class="st">"Car"</span>, <span class="st">"Truck"</span>)</span>
<span id="cb30-51"><a href="#cb30-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-52"><a href="#cb30-52" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(table_84_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Statistic</th>
<th style="text-align: right;">Car</th>
<th style="text-align: right;">Truck</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Constant</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">6.328</td>
<td style="text-align: right;">7.558</td>
</tr>
<tr class="even">
<td style="text-align: left;">Constant</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.583</td>
<td style="text-align: right;">0.539</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Weight (tons)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.025</td>
<td style="text-align: right;">0.438</td>
</tr>
<tr class="even">
<td style="text-align: left;">Weight (tons)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.121</td>
<td style="text-align: right;">0.059</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Width (feet)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.357</td>
<td style="text-align: right;">0.077</td>
</tr>
<tr class="even">
<td style="text-align: left;">Width (feet)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.108</td>
<td style="text-align: right;">0.110</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Height (feet)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">-0.063</td>
<td style="text-align: right;">-0.042</td>
</tr>
<tr class="even">
<td style="text-align: left;">Height (feet)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.055</td>
<td style="text-align: right;">0.047</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Horsepower (100)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.690</td>
<td style="text-align: right;">0.240</td>
</tr>
<tr class="even">
<td style="text-align: left;">Horsepower (100)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.085</td>
<td style="text-align: right;">0.108</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Transmission (5-speed or auto)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.143</td>
<td style="text-align: right;">0.034</td>
</tr>
<tr class="even">
<td style="text-align: left;">Transmission (5-speed or auto)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.024</td>
<td style="text-align: right;">0.025</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Power steering</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.058</td>
<td style="text-align: right;">0.093</td>
</tr>
<tr class="even">
<td style="text-align: left;">Power steering</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.027</td>
<td style="text-align: right;">0.035</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Air conditioning</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.147</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Air conditioning</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.033</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Four-wheel drive</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.228</td>
</tr>
<tr class="even">
<td style="text-align: left;">Four-wheel drive</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.027</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="exercise-3" class="level2">
<h2 class="anchored" data-anchor-id="exercise-3">Exercise 3</h2>
<p>Pooling car and truck data, run <code>system_7985.do</code> to reproduce columns (3) and (4) in Table 8.4 with the constraints specified in equation (8.22). How are these constraints built into the program for the nonlinear regression?</p>
<section id="feenstras-code-2" class="level3">
<h3 class="anchored" data-anchor-id="feenstras-code-2">Feenstra’s code</h3>
<div class="sourceCode" id="cb31"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\system_7985.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_7990,<span class="kw">clear</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> ve=2</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wdth wdth_t</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hght hght_t</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">weight</span> wght_t</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hp hp_t</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> four four_t</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> tran tran_t</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> ps ps_t</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">ac</span> ac_t</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_temp,<span class="kw">replace</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_7990,<span class="kw">clear</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> ve=1</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wdth wdth_c</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hght hght_c</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wght wght_c</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hp hp_c</span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> four four_c</span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> tran tran_c</span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> ps ps_c</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">ac</span> ac_c</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a><span class="kw">append</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_temp</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wdth_c=0 <span class="kw">if</span> wdth_c==.</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hght_c=0 <span class="kw">if</span> hght_c==.</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wght_c=0 <span class="kw">if</span> wght_c==.</span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hp_c=0 <span class="kw">if</span> hp_c==.</span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> four_c=0 <span class="kw">if</span> four_c==.</span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tran_c=0 <span class="kw">if</span> tran_c==.</span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ps_c=0 <span class="kw">if</span> ps_c==.</span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ac_c=0 <span class="kw">if</span> ac_c==.</span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wdth_t=0 <span class="kw">if</span> wdth_t==.</span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hght_t=0 <span class="kw">if</span> hght_t==.</span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wght_t=0 <span class="kw">if</span> wght_t==.</span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hp_t=0 <span class="kw">if</span> hp_t==.</span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> four_t=0 <span class="kw">if</span> four_t==.</span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tran_t=0 <span class="kw">if</span> tran_t==.</span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ps_t=0 <span class="kw">if</span> ps_t==.</span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ac_t=0 <span class="kw">if</span> ac_t==.</span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd2=yd2</span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd2=yd2</span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd2=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd2=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb31-55"><a href="#cb31-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-56"><a href="#cb31-56" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd3=yd3</span>
<span id="cb31-57"><a href="#cb31-57" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd3=yd3</span>
<span id="cb31-58"><a href="#cb31-58" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd3=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb31-59"><a href="#cb31-59" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd3=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb31-60"><a href="#cb31-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-61"><a href="#cb31-61" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd4=yd4</span>
<span id="cb31-62"><a href="#cb31-62" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd4=yd4</span>
<span id="cb31-63"><a href="#cb31-63" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd4=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb31-64"><a href="#cb31-64" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd4=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb31-65"><a href="#cb31-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-66"><a href="#cb31-66" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd5=yd5</span>
<span id="cb31-67"><a href="#cb31-67" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd5=yd5</span>
<span id="cb31-68"><a href="#cb31-68" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd5=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb31-69"><a href="#cb31-69" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd5=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb31-70"><a href="#cb31-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-71"><a href="#cb31-71" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd6=yd6</span>
<span id="cb31-72"><a href="#cb31-72" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd6=yd6</span>
<span id="cb31-73"><a href="#cb31-73" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd6=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb31-74"><a href="#cb31-74" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd6=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb31-75"><a href="#cb31-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-76"><a href="#cb31-76" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd7=yd7</span>
<span id="cb31-77"><a href="#cb31-77" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd7=yd7</span>
<span id="cb31-78"><a href="#cb31-78" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb31-79"><a href="#cb31-79" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb31-80"><a href="#cb31-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-81"><a href="#cb31-81" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlct_1</span>
<span id="cb31-82"><a href="#cb31-82" aria-hidden="true" tabindex="-1"></a><span class="kw">version</span> 7.0</span>
<span id="cb31-83"><a href="#cb31-83" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb31-84"><a href="#cb31-84" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2 d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb31-85"><a href="#cb31-85" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a3=1</span>
<span id="cb31-86"><a href="#cb31-86" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a4=1</span>
<span id="cb31-87"><a href="#cb31-87" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a5=1</span>
<span id="cb31-88"><a href="#cb31-88" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a6=1</span>
<span id="cb31-89"><a href="#cb31-89" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a7=1</span>
<span id="cb31-90"><a href="#cb31-90" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b2=.1</span>
<span id="cb31-91"><a href="#cb31-91" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b3=.1</span>
<span id="cb31-92"><a href="#cb31-92" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b4=.1</span>
<span id="cb31-93"><a href="#cb31-93" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b5=.1</span>
<span id="cb31-94"><a href="#cb31-94" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b6=.1</span>
<span id="cb31-95"><a href="#cb31-95" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b7=.1</span>
<span id="cb31-96"><a href="#cb31-96" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c1=.1</span>
<span id="cb31-97"><a href="#cb31-97" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c2=.1</span>
<span id="cb31-98"><a href="#cb31-98" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c3=.1</span>
<span id="cb31-99"><a href="#cb31-99" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c4=.1</span>
<span id="cb31-100"><a href="#cb31-100" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c5=.1</span>
<span id="cb31-101"><a href="#cb31-101" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c6=.1</span>
<span id="cb31-102"><a href="#cb31-102" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c7=.1</span>
<span id="cb31-103"><a href="#cb31-103" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c8=.1</span>
<span id="cb31-104"><a href="#cb31-104" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c9=.1</span>
<span id="cb31-105"><a href="#cb31-105" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d1=.1</span>
<span id="cb31-106"><a href="#cb31-106" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d2=.1</span>
<span id="cb31-107"><a href="#cb31-107" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d3=.1</span>
<span id="cb31-108"><a href="#cb31-108" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d4=.1</span>
<span id="cb31-109"><a href="#cb31-109" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d5=.1</span>
<span id="cb31-110"><a href="#cb31-110" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d6=.1</span>
<span id="cb31-111"><a href="#cb31-111" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d7=.1</span>
<span id="cb31-112"><a href="#cb31-112" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d8=.1</span>
<span id="cb31-113"><a href="#cb31-113" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span>
<span id="cb31-114"><a href="#cb31-114" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-115"><a href="#cb31-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-116"><a href="#cb31-116" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb31-117"><a href="#cb31-117" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb31-118"><a href="#cb31-118" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb31-119"><a href="#cb31-119" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c8</span>)+<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)*tyd6+<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb31-120"><a href="#cb31-120" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb31-121"><a href="#cb31-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-122"><a href="#cb31-122" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb31-123"><a href="#cb31-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-124"><a href="#cb31-124" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> ct_1 price</span>
<span id="cb31-125"><a href="#cb31-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-126"><a href="#cb31-126" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*cyd2+_b[b3]*cyd3+_b[b4]*cyd4+_b[b5]*cyd5+_b[b6]*cyd6+_b[b7]*cyd7<span class="co">/*</span></span>
<span id="cb31-127"><a href="#cb31-127" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*hp_c+_b[c5]*tran_c+_b[c6]*ps_c<span class="co">/*</span></span>
<span id="cb31-128"><a href="#cb31-128" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c7]*ac_c+_b[c8])</span>
<span id="cb31-129"><a href="#cb31-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-130"><a href="#cb31-130" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> winv=1/<span class="fu">exp</span>((_b[b2]+0.16)*tyd2+(_b[b3]+.16)*tyd3+(_b[b4]+.16)*tyd4<span class="co">/*</span></span>
<span id="cb31-131"><a href="#cb31-131" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+(_b[b5]+.16)*tyd5+(_b[b6]+.16)*tyd6+_b[c9]*tyd7<span class="co">/*</span></span>
<span id="cb31-132"><a href="#cb31-132" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*hp_t<span class="co">/*</span></span>
<span id="cb31-133"><a href="#cb31-133" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t+_b[d8]) <span class="kw">if</span> ve==2</span>
<span id="cb31-134"><a href="#cb31-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-135"><a href="#cb31-135" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nprice=price*winv</span>
<span id="cb31-136"><a href="#cb31-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-137"><a href="#cb31-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-138"><a href="#cb31-138" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlct_2</span>
<span id="cb31-139"><a href="#cb31-139" aria-hidden="true" tabindex="-1"></a><span class="kw">version</span> 7.0</span>
<span id="cb31-140"><a href="#cb31-140" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb31-141"><a href="#cb31-141" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2 d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb31-142"><a href="#cb31-142" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a3=1</span>
<span id="cb31-143"><a href="#cb31-143" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a4=1</span>
<span id="cb31-144"><a href="#cb31-144" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a5=1</span>
<span id="cb31-145"><a href="#cb31-145" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a6=1</span>
<span id="cb31-146"><a href="#cb31-146" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a7=1</span>
<span id="cb31-147"><a href="#cb31-147" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b2=.1</span>
<span id="cb31-148"><a href="#cb31-148" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b3=.1</span>
<span id="cb31-149"><a href="#cb31-149" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b4=.1</span>
<span id="cb31-150"><a href="#cb31-150" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b5=.1</span>
<span id="cb31-151"><a href="#cb31-151" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b6=.1</span>
<span id="cb31-152"><a href="#cb31-152" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b7=.1</span>
<span id="cb31-153"><a href="#cb31-153" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c1=.1</span>
<span id="cb31-154"><a href="#cb31-154" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c2=.1</span>
<span id="cb31-155"><a href="#cb31-155" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c3=.1</span>
<span id="cb31-156"><a href="#cb31-156" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c4=.1</span>
<span id="cb31-157"><a href="#cb31-157" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c5=.1</span>
<span id="cb31-158"><a href="#cb31-158" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c6=.1</span>
<span id="cb31-159"><a href="#cb31-159" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c7=.1</span>
<span id="cb31-160"><a href="#cb31-160" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c8=.1</span>
<span id="cb31-161"><a href="#cb31-161" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c9=.1</span>
<span id="cb31-162"><a href="#cb31-162" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d1=.1</span>
<span id="cb31-163"><a href="#cb31-163" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d2=.1</span>
<span id="cb31-164"><a href="#cb31-164" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d3=.1</span>
<span id="cb31-165"><a href="#cb31-165" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d4=.1</span>
<span id="cb31-166"><a href="#cb31-166" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d5=.1</span>
<span id="cb31-167"><a href="#cb31-167" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d6=.1</span>
<span id="cb31-168"><a href="#cb31-168" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d7=.1</span>
<span id="cb31-169"><a href="#cb31-169" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d8=.1</span>
<span id="cb31-170"><a href="#cb31-170" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span>
<span id="cb31-171"><a href="#cb31-171" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-172"><a href="#cb31-172" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">`1'</span>=winv*(<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7)<span class="co">/*</span></span>
<span id="cb31-173"><a href="#cb31-173" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb31-174"><a href="#cb31-174" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb31-175"><a href="#cb31-175" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c8</span>)+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)*tyd6+<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb31-176"><a href="#cb31-176" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb31-177"><a href="#cb31-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-178"><a href="#cb31-178" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb31-179"><a href="#cb31-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-180"><a href="#cb31-180" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> ct_2 nprice</span>
<span id="cb31-181"><a href="#cb31-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-182"><a href="#cb31-182" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb31-183"><a href="#cb31-183" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb31-184"><a href="#cb31-184" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\system_7985.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>&gt; er-8\system_7985.<span class="fu">log</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 21:59:23</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tr</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>&gt; uck_7990,<span class="kw">clear</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> ve=2</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wdth wdth_t</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hght hght_t</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">weight</span> wght_t</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hp hp_t</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> four four_t</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> tran tran_t</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> ps ps_t</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">ac</span> ac_t</span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>(45 observations deleted)</span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\t</span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>&gt; ruck_temp,<span class="kw">replace</span></span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tru</span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a>&gt; ck_temp.dta saved</span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="kw">ca</span></span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a>&gt; r_7990,<span class="kw">clear</span></span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a>(105 observations deleted)</span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> ve=1</span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wdth wdth_c</span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hght hght_c</span>
<span id="cb32-55"><a href="#cb32-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-56"><a href="#cb32-56" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wght wght_c</span>
<span id="cb32-57"><a href="#cb32-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-58"><a href="#cb32-58" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hp hp_c</span>
<span id="cb32-59"><a href="#cb32-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-60"><a href="#cb32-60" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> four four_c</span>
<span id="cb32-61"><a href="#cb32-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-62"><a href="#cb32-62" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> tran tran_c</span>
<span id="cb32-63"><a href="#cb32-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-64"><a href="#cb32-64" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> ps ps_c</span>
<span id="cb32-65"><a href="#cb32-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-66"><a href="#cb32-66" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">ac</span> ac_c</span>
<span id="cb32-67"><a href="#cb32-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-68"><a href="#cb32-68" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-69"><a href="#cb32-69" aria-hidden="true" tabindex="-1"></a>. <span class="kw">append</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Cha</span>
<span id="cb32-70"><a href="#cb32-70" aria-hidden="true" tabindex="-1"></a>&gt; pter-8\truck_temp</span>
<span id="cb32-71"><a href="#cb32-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-72"><a href="#cb32-72" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-73"><a href="#cb32-73" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wdth_c=0 <span class="kw">if</span> wdth_c==.</span>
<span id="cb32-74"><a href="#cb32-74" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-75"><a href="#cb32-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-76"><a href="#cb32-76" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hght_c=0 <span class="kw">if</span> hght_c==.</span>
<span id="cb32-77"><a href="#cb32-77" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-78"><a href="#cb32-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-79"><a href="#cb32-79" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wght_c=0 <span class="kw">if</span> wght_c==.</span>
<span id="cb32-80"><a href="#cb32-80" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-81"><a href="#cb32-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-82"><a href="#cb32-82" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hp_c=0 <span class="kw">if</span> hp_c==.</span>
<span id="cb32-83"><a href="#cb32-83" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-84"><a href="#cb32-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-85"><a href="#cb32-85" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> four_c=0 <span class="kw">if</span> four_c==.</span>
<span id="cb32-86"><a href="#cb32-86" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-87"><a href="#cb32-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-88"><a href="#cb32-88" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tran_c=0 <span class="kw">if</span> tran_c==.</span>
<span id="cb32-89"><a href="#cb32-89" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-90"><a href="#cb32-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-91"><a href="#cb32-91" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ps_c=0 <span class="kw">if</span> ps_c==.</span>
<span id="cb32-92"><a href="#cb32-92" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-93"><a href="#cb32-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-94"><a href="#cb32-94" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ac_c=0 <span class="kw">if</span> ac_c==.</span>
<span id="cb32-95"><a href="#cb32-95" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-96"><a href="#cb32-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-97"><a href="#cb32-97" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wdth_t=0 <span class="kw">if</span> wdth_t==.</span>
<span id="cb32-98"><a href="#cb32-98" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-99"><a href="#cb32-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-100"><a href="#cb32-100" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hght_t=0 <span class="kw">if</span> hght_t==.</span>
<span id="cb32-101"><a href="#cb32-101" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-102"><a href="#cb32-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-103"><a href="#cb32-103" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wght_t=0 <span class="kw">if</span> wght_t==.</span>
<span id="cb32-104"><a href="#cb32-104" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-105"><a href="#cb32-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-106"><a href="#cb32-106" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hp_t=0 <span class="kw">if</span> hp_t==.</span>
<span id="cb32-107"><a href="#cb32-107" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-108"><a href="#cb32-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-109"><a href="#cb32-109" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> four_t=0 <span class="kw">if</span> four_t==.</span>
<span id="cb32-110"><a href="#cb32-110" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-111"><a href="#cb32-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-112"><a href="#cb32-112" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tran_t=0 <span class="kw">if</span> tran_t==.</span>
<span id="cb32-113"><a href="#cb32-113" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-114"><a href="#cb32-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-115"><a href="#cb32-115" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ps_t=0 <span class="kw">if</span> ps_t==.</span>
<span id="cb32-116"><a href="#cb32-116" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-117"><a href="#cb32-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-118"><a href="#cb32-118" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ac_t=0 <span class="kw">if</span> ac_t==.</span>
<span id="cb32-119"><a href="#cb32-119" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-120"><a href="#cb32-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-121"><a href="#cb32-121" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-122"><a href="#cb32-122" aria-hidden="true" tabindex="-1"></a>. <span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb32-123"><a href="#cb32-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-124"><a href="#cb32-124" aria-hidden="true" tabindex="-1"></a>       <span class="fu">year</span> |      Freq.     Percent        Cum.</span>
<span id="cb32-125"><a href="#cb32-125" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb32-126"><a href="#cb32-126" aria-hidden="true" tabindex="-1"></a>         79 |         31       12.20       12.20</span>
<span id="cb32-127"><a href="#cb32-127" aria-hidden="true" tabindex="-1"></a>         80 |         34       13.39       25.59</span>
<span id="cb32-128"><a href="#cb32-128" aria-hidden="true" tabindex="-1"></a>         81 |         35       13.78       39.37</span>
<span id="cb32-129"><a href="#cb32-129" aria-hidden="true" tabindex="-1"></a>         82 |         35       13.78       53.15</span>
<span id="cb32-130"><a href="#cb32-130" aria-hidden="true" tabindex="-1"></a>         83 |         36       14.17       67.32</span>
<span id="cb32-131"><a href="#cb32-131" aria-hidden="true" tabindex="-1"></a>         84 |         40       15.75       83.07</span>
<span id="cb32-132"><a href="#cb32-132" aria-hidden="true" tabindex="-1"></a>         85 |         43       16.93      100.00</span>
<span id="cb32-133"><a href="#cb32-133" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb32-134"><a href="#cb32-134" aria-hidden="true" tabindex="-1"></a>      Total |        254      100.00</span>
<span id="cb32-135"><a href="#cb32-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-136"><a href="#cb32-136" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-137"><a href="#cb32-137" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd2=yd2</span>
<span id="cb32-138"><a href="#cb32-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-139"><a href="#cb32-139" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd2=yd2</span>
<span id="cb32-140"><a href="#cb32-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-141"><a href="#cb32-141" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd2=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb32-142"><a href="#cb32-142" aria-hidden="true" tabindex="-1"></a>(8 <span class="fu">real</span> changes made)</span>
<span id="cb32-143"><a href="#cb32-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-144"><a href="#cb32-144" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd2=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb32-145"><a href="#cb32-145" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb32-146"><a href="#cb32-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-147"><a href="#cb32-147" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-148"><a href="#cb32-148" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd3=yd3</span>
<span id="cb32-149"><a href="#cb32-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-150"><a href="#cb32-150" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd3=yd3</span>
<span id="cb32-151"><a href="#cb32-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-152"><a href="#cb32-152" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd3=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb32-153"><a href="#cb32-153" aria-hidden="true" tabindex="-1"></a>(9 <span class="fu">real</span> changes made)</span>
<span id="cb32-154"><a href="#cb32-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-155"><a href="#cb32-155" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd3=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb32-156"><a href="#cb32-156" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb32-157"><a href="#cb32-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-158"><a href="#cb32-158" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-159"><a href="#cb32-159" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd4=yd4</span>
<span id="cb32-160"><a href="#cb32-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-161"><a href="#cb32-161" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd4=yd4</span>
<span id="cb32-162"><a href="#cb32-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-163"><a href="#cb32-163" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd4=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb32-164"><a href="#cb32-164" aria-hidden="true" tabindex="-1"></a>(9 <span class="fu">real</span> changes made)</span>
<span id="cb32-165"><a href="#cb32-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-166"><a href="#cb32-166" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd4=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb32-167"><a href="#cb32-167" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb32-168"><a href="#cb32-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-169"><a href="#cb32-169" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-170"><a href="#cb32-170" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd5=yd5</span>
<span id="cb32-171"><a href="#cb32-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-172"><a href="#cb32-172" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd5=yd5</span>
<span id="cb32-173"><a href="#cb32-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-174"><a href="#cb32-174" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd5=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb32-175"><a href="#cb32-175" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb32-176"><a href="#cb32-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-177"><a href="#cb32-177" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd5=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb32-178"><a href="#cb32-178" aria-hidden="true" tabindex="-1"></a>(29 <span class="fu">real</span> changes made)</span>
<span id="cb32-179"><a href="#cb32-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-180"><a href="#cb32-180" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-181"><a href="#cb32-181" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd6=yd6</span>
<span id="cb32-182"><a href="#cb32-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-183"><a href="#cb32-183" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd6=yd6</span>
<span id="cb32-184"><a href="#cb32-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-185"><a href="#cb32-185" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd6=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb32-186"><a href="#cb32-186" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb32-187"><a href="#cb32-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-188"><a href="#cb32-188" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd6=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb32-189"><a href="#cb32-189" aria-hidden="true" tabindex="-1"></a>(33 <span class="fu">real</span> changes made)</span>
<span id="cb32-190"><a href="#cb32-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-191"><a href="#cb32-191" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-192"><a href="#cb32-192" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd7=yd7</span>
<span id="cb32-193"><a href="#cb32-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-194"><a href="#cb32-194" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd7=yd7</span>
<span id="cb32-195"><a href="#cb32-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-196"><a href="#cb32-196" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd7=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb32-197"><a href="#cb32-197" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb32-198"><a href="#cb32-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-199"><a href="#cb32-199" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd7=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb32-200"><a href="#cb32-200" aria-hidden="true" tabindex="-1"></a>(36 <span class="fu">real</span> changes made)</span>
<span id="cb32-201"><a href="#cb32-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-202"><a href="#cb32-202" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-203"><a href="#cb32-203" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlct_1</span>
<span id="cb32-204"><a href="#cb32-204" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb32-205"><a href="#cb32-205" aria-hidden="true" tabindex="-1"></a>  2. <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb32-206"><a href="#cb32-206" aria-hidden="true" tabindex="-1"></a>  3. <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2</span></span>
<span id="cb32-207"><a href="#cb32-207" aria-hidden="true" tabindex="-1"></a><span class="st">&gt;  d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb32-208"><a href="#cb32-208" aria-hidden="true" tabindex="-1"></a>  4. <span class="kw">global</span> a3=1</span>
<span id="cb32-209"><a href="#cb32-209" aria-hidden="true" tabindex="-1"></a>  5. <span class="kw">global</span> a4=1</span>
<span id="cb32-210"><a href="#cb32-210" aria-hidden="true" tabindex="-1"></a>  6. <span class="kw">global</span> a5=1</span>
<span id="cb32-211"><a href="#cb32-211" aria-hidden="true" tabindex="-1"></a>  7. <span class="kw">global</span> a6=1</span>
<span id="cb32-212"><a href="#cb32-212" aria-hidden="true" tabindex="-1"></a>  8. <span class="kw">global</span> a7=1</span>
<span id="cb32-213"><a href="#cb32-213" aria-hidden="true" tabindex="-1"></a>  9. <span class="kw">global</span> b2=.1</span>
<span id="cb32-214"><a href="#cb32-214" aria-hidden="true" tabindex="-1"></a> 10. <span class="kw">global</span> b3=.1</span>
<span id="cb32-215"><a href="#cb32-215" aria-hidden="true" tabindex="-1"></a> 11. <span class="kw">global</span> b4=.1</span>
<span id="cb32-216"><a href="#cb32-216" aria-hidden="true" tabindex="-1"></a> 12. <span class="kw">global</span> b5=.1</span>
<span id="cb32-217"><a href="#cb32-217" aria-hidden="true" tabindex="-1"></a> 13. <span class="kw">global</span> b6=.1</span>
<span id="cb32-218"><a href="#cb32-218" aria-hidden="true" tabindex="-1"></a> 14. <span class="kw">global</span> b7=.1</span>
<span id="cb32-219"><a href="#cb32-219" aria-hidden="true" tabindex="-1"></a> 15. <span class="kw">global</span> c1=.1</span>
<span id="cb32-220"><a href="#cb32-220" aria-hidden="true" tabindex="-1"></a> 16. <span class="kw">global</span> c2=.1</span>
<span id="cb32-221"><a href="#cb32-221" aria-hidden="true" tabindex="-1"></a> 17. <span class="kw">global</span> c3=.1</span>
<span id="cb32-222"><a href="#cb32-222" aria-hidden="true" tabindex="-1"></a> 18. <span class="kw">global</span> c4=.1</span>
<span id="cb32-223"><a href="#cb32-223" aria-hidden="true" tabindex="-1"></a> 19. <span class="kw">global</span> c5=.1</span>
<span id="cb32-224"><a href="#cb32-224" aria-hidden="true" tabindex="-1"></a> 20. <span class="kw">global</span> c6=.1</span>
<span id="cb32-225"><a href="#cb32-225" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">global</span> c7=.1</span>
<span id="cb32-226"><a href="#cb32-226" aria-hidden="true" tabindex="-1"></a> 22. <span class="kw">global</span> c8=.1</span>
<span id="cb32-227"><a href="#cb32-227" aria-hidden="true" tabindex="-1"></a> 23. <span class="kw">global</span> c9=.1</span>
<span id="cb32-228"><a href="#cb32-228" aria-hidden="true" tabindex="-1"></a> 24. <span class="kw">global</span> d1=.1</span>
<span id="cb32-229"><a href="#cb32-229" aria-hidden="true" tabindex="-1"></a> 25. <span class="kw">global</span> d2=.1</span>
<span id="cb32-230"><a href="#cb32-230" aria-hidden="true" tabindex="-1"></a> 26. <span class="kw">global</span> d3=.1</span>
<span id="cb32-231"><a href="#cb32-231" aria-hidden="true" tabindex="-1"></a> 27. <span class="kw">global</span> d4=.1</span>
<span id="cb32-232"><a href="#cb32-232" aria-hidden="true" tabindex="-1"></a> 28. <span class="kw">global</span> d5=.1</span>
<span id="cb32-233"><a href="#cb32-233" aria-hidden="true" tabindex="-1"></a> 29. <span class="kw">global</span> d6=.1</span>
<span id="cb32-234"><a href="#cb32-234" aria-hidden="true" tabindex="-1"></a> 30. <span class="kw">global</span> d7=.1</span>
<span id="cb32-235"><a href="#cb32-235" aria-hidden="true" tabindex="-1"></a> 31. <span class="kw">global</span> d8=.1</span>
<span id="cb32-236"><a href="#cb32-236" aria-hidden="true" tabindex="-1"></a> 32. <span class="kw">exit</span></span>
<span id="cb32-237"><a href="#cb32-237" aria-hidden="true" tabindex="-1"></a> 33. }</span>
<span id="cb32-238"><a href="#cb32-238" aria-hidden="true" tabindex="-1"></a> 34. </span>
<span id="cb32-239"><a href="#cb32-239" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb32-240"><a href="#cb32-240" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb32-241"><a href="#cb32-241" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb32-242"><a href="#cb32-242" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c8</span>)+<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)*tyd6</span>
<span id="cb32-243"><a href="#cb32-243" aria-hidden="true" tabindex="-1"></a>&gt; +<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb32-244"><a href="#cb32-244" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb32-245"><a href="#cb32-245" aria-hidden="true" tabindex="-1"></a> 35. </span>
<span id="cb32-246"><a href="#cb32-246" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb32-247"><a href="#cb32-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-248"><a href="#cb32-248" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-249"><a href="#cb32-249" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> ct_1 price</span>
<span id="cb32-250"><a href="#cb32-250" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 254)</span>
<span id="cb32-251"><a href="#cb32-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-252"><a href="#cb32-252" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  1.51e+10</span>
<span id="cb32-253"><a href="#cb32-253" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb32-254"><a href="#cb32-254" aria-hidden="true" tabindex="-1"></a>Iteration 24:  residual SS =  1.01e+08</span>
<span id="cb32-255"><a href="#cb32-255" aria-hidden="true" tabindex="-1"></a>Iteration 25:  residual SS =  1.01e+08</span>
<span id="cb32-256"><a href="#cb32-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-257"><a href="#cb32-257" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       254</span>
<span id="cb32-258"><a href="#cb32-258" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 28,   226) =   1210.09</span>
<span id="cb32-259"><a href="#cb32-259" aria-hidden="true" tabindex="-1"></a>       Model |  1.5069e+10    28   538194036         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb32-260"><a href="#cb32-260" aria-hidden="true" tabindex="-1"></a>    Residual |   100515047   226  444756.844         R-squared     =    0.9934</span>
<span id="cb32-261"><a href="#cb32-261" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9926</span>
<span id="cb32-262"><a href="#cb32-262" aria-hidden="true" tabindex="-1"></a>       Total |  1.5170e+10   254  59724204.9         Root MSE      =  666.9009</span>
<span id="cb32-263"><a href="#cb32-263" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     =  3994.496</span>
<span id="cb32-264"><a href="#cb32-264" aria-hidden="true" tabindex="-1"></a>(ct_1)</span>
<span id="cb32-265"><a href="#cb32-265" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb32-266"><a href="#cb32-266" aria-hidden="true" tabindex="-1"></a>       price |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb32-267"><a href="#cb32-267" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb32-268"><a href="#cb32-268" aria-hidden="true" tabindex="-1"></a>          a3 |   254.0918   317.1045     0.80   0.424    -370.7678    878.9513</span>
<span id="cb32-269"><a href="#cb32-269" aria-hidden="true" tabindex="-1"></a>          a4 |   505.1058   325.6388     1.55   0.122    -136.5708    1146.782</span>
<span id="cb32-270"><a href="#cb32-270" aria-hidden="true" tabindex="-1"></a>          a5 |   708.9466   317.3172     2.23   0.026       83.668    1334.225</span>
<span id="cb32-271"><a href="#cb32-271" aria-hidden="true" tabindex="-1"></a>          a6 |   1082.054   322.4415     3.36   0.001     446.6773     1717.43</span>
<span id="cb32-272"><a href="#cb32-272" aria-hidden="true" tabindex="-1"></a>          a7 |   1063.014   373.9703     2.84   0.005     326.0995    1799.929</span>
<span id="cb32-273"><a href="#cb32-273" aria-hidden="true" tabindex="-1"></a>          b2 |   .0040633   .0329008     0.12   0.902    -.0607683    .0688948</span>
<span id="cb32-274"><a href="#cb32-274" aria-hidden="true" tabindex="-1"></a>          b3 |   .0756038    .049061     1.54   0.125    -.0210716    .1722792</span>
<span id="cb32-275"><a href="#cb32-275" aria-hidden="true" tabindex="-1"></a>          b4 |   .0828575   .0490467     1.69   0.093    -.0137897    .1795048</span>
<span id="cb32-276"><a href="#cb32-276" aria-hidden="true" tabindex="-1"></a>          b5 |   .0327776    .050707     0.65   0.519    -.0671415    .1326967</span>
<span id="cb32-277"><a href="#cb32-277" aria-hidden="true" tabindex="-1"></a>          b6 |   .0351224   .0514768     0.68   0.496    -.0663135    .1365582</span>
<span id="cb32-278"><a href="#cb32-278" aria-hidden="true" tabindex="-1"></a>          b7 |   .0825554   .0557608     1.48   0.140    -.0273221    .1924329</span>
<span id="cb32-279"><a href="#cb32-279" aria-hidden="true" tabindex="-1"></a>          c1 |   .0326037   .1117298     0.29   0.771    -.1875618    .2527691</span>
<span id="cb32-280"><a href="#cb32-280" aria-hidden="true" tabindex="-1"></a>          c2 |    .385946   .1204171     3.21   0.002     .1486621    .6232299</span>
<span id="cb32-281"><a href="#cb32-281" aria-hidden="true" tabindex="-1"></a>          c3 |  -.1929238   .0568197    -3.40   0.001     -.304888   -.0809596</span>
<span id="cb32-282"><a href="#cb32-282" aria-hidden="true" tabindex="-1"></a>          c4 |    .715212   .0736084     9.72   0.000     .5701655    .8602585</span>
<span id="cb32-283"><a href="#cb32-283" aria-hidden="true" tabindex="-1"></a>          c5 |   .1578585     .03381     4.67   0.000     .0912354    .2244816</span>
<span id="cb32-284"><a href="#cb32-284" aria-hidden="true" tabindex="-1"></a>          c6 |   .0641097   .0247061     2.59   0.010     .0154259    .1127934</span>
<span id="cb32-285"><a href="#cb32-285" aria-hidden="true" tabindex="-1"></a>          c7 |   .1829447   .0242773     7.54   0.000     .1351059    .2307836</span>
<span id="cb32-286"><a href="#cb32-286" aria-hidden="true" tabindex="-1"></a>          c8 |   6.599831   .7305317     9.03   0.000     5.160306    8.039356</span>
<span id="cb32-287"><a href="#cb32-287" aria-hidden="true" tabindex="-1"></a>          c9 |   .1171992   .0634238     1.85   0.066    -.0077785    .2421769</span>
<span id="cb32-288"><a href="#cb32-288" aria-hidden="true" tabindex="-1"></a>          d1 |   .4917133   .0795807     6.18   0.000     .3348983    .6485283</span>
<span id="cb32-289"><a href="#cb32-289" aria-hidden="true" tabindex="-1"></a>          d2 |   .2622177   .1757206     1.49   0.137    -.0840426    .6084779</span>
<span id="cb32-290"><a href="#cb32-290" aria-hidden="true" tabindex="-1"></a>          d3 |  -.0451278   .0677055    -0.67   0.506    -.1785426     .088287</span>
<span id="cb32-291"><a href="#cb32-291" aria-hidden="true" tabindex="-1"></a>          d4 |   .3030767   .1701249     1.78   0.076    -.0321571    .6383106</span>
<span id="cb32-292"><a href="#cb32-292" aria-hidden="true" tabindex="-1"></a>          d5 |   .0397822   .0362731     1.10   0.274    -.0316947     .111259</span>
<span id="cb32-293"><a href="#cb32-293" aria-hidden="true" tabindex="-1"></a>          d6 |   .0967659   .0501832     1.93   0.055    -.0021208    .1956526</span>
<span id="cb32-294"><a href="#cb32-294" aria-hidden="true" tabindex="-1"></a>          d7 |   .3052359   .0715711     4.26   0.000     .1642038     .446268</span>
<span id="cb32-295"><a href="#cb32-295" aria-hidden="true" tabindex="-1"></a>          d8 |   6.299805   .9622249     6.55   0.000     4.403726    8.195885</span>
<span id="cb32-296"><a href="#cb32-296" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb32-297"><a href="#cb32-297" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb32-298"><a href="#cb32-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-299"><a href="#cb32-299" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-300"><a href="#cb32-300" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*cyd2+_b[b3]*cyd3+_b[b4]*cyd4+_b[b5]*cyd5+_b[b6]*cyd6+_b[b7</span>
<span id="cb32-301"><a href="#cb32-301" aria-hidden="true" tabindex="-1"></a>&gt; ]*cyd7<span class="co">/*</span></span>
<span id="cb32-302"><a href="#cb32-302" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*hp_c+_b[c5]*tran_c+_b[c6]*ps</span>
<span id="cb32-303"><a href="#cb32-303" aria-hidden="true" tabindex="-1"></a>&gt; _c<span class="co">/*</span></span>
<span id="cb32-304"><a href="#cb32-304" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c7]*ac_c+_b[c8])</span>
<span id="cb32-305"><a href="#cb32-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-306"><a href="#cb32-306" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-307"><a href="#cb32-307" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> winv=1/<span class="fu">exp</span>((_b[b2]+0.16)*tyd2+(_b[b3]+.16)*tyd3+(_b[b4]+.16)*tyd4<span class="co">/*</span></span>
<span id="cb32-308"><a href="#cb32-308" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+(_b[b5]+.16)*tyd5+(_b[b6]+.16)*tyd6+_b[c9]*tyd7<span class="co">/*</span></span>
<span id="cb32-309"><a href="#cb32-309" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*hp_t<span class="co">/*</span></span>
<span id="cb32-310"><a href="#cb32-310" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t+_b[d8]) <span class="kw">if</span> ve==2</span>
<span id="cb32-311"><a href="#cb32-311" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-312"><a href="#cb32-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-313"><a href="#cb32-313" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-314"><a href="#cb32-314" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nprice=price*winv</span>
<span id="cb32-315"><a href="#cb32-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-316"><a href="#cb32-316" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-317"><a href="#cb32-317" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-318"><a href="#cb32-318" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlct_2</span>
<span id="cb32-319"><a href="#cb32-319" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb32-320"><a href="#cb32-320" aria-hidden="true" tabindex="-1"></a>  2. <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb32-321"><a href="#cb32-321" aria-hidden="true" tabindex="-1"></a>  3. <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2</span></span>
<span id="cb32-322"><a href="#cb32-322" aria-hidden="true" tabindex="-1"></a><span class="st">&gt;  d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb32-323"><a href="#cb32-323" aria-hidden="true" tabindex="-1"></a>  4. <span class="kw">global</span> a3=1</span>
<span id="cb32-324"><a href="#cb32-324" aria-hidden="true" tabindex="-1"></a>  5. <span class="kw">global</span> a4=1</span>
<span id="cb32-325"><a href="#cb32-325" aria-hidden="true" tabindex="-1"></a>  6. <span class="kw">global</span> a5=1</span>
<span id="cb32-326"><a href="#cb32-326" aria-hidden="true" tabindex="-1"></a>  7. <span class="kw">global</span> a6=1</span>
<span id="cb32-327"><a href="#cb32-327" aria-hidden="true" tabindex="-1"></a>  8. <span class="kw">global</span> a7=1</span>
<span id="cb32-328"><a href="#cb32-328" aria-hidden="true" tabindex="-1"></a>  9. <span class="kw">global</span> b2=.1</span>
<span id="cb32-329"><a href="#cb32-329" aria-hidden="true" tabindex="-1"></a> 10. <span class="kw">global</span> b3=.1</span>
<span id="cb32-330"><a href="#cb32-330" aria-hidden="true" tabindex="-1"></a> 11. <span class="kw">global</span> b4=.1</span>
<span id="cb32-331"><a href="#cb32-331" aria-hidden="true" tabindex="-1"></a> 12. <span class="kw">global</span> b5=.1</span>
<span id="cb32-332"><a href="#cb32-332" aria-hidden="true" tabindex="-1"></a> 13. <span class="kw">global</span> b6=.1</span>
<span id="cb32-333"><a href="#cb32-333" aria-hidden="true" tabindex="-1"></a> 14. <span class="kw">global</span> b7=.1</span>
<span id="cb32-334"><a href="#cb32-334" aria-hidden="true" tabindex="-1"></a> 15. <span class="kw">global</span> c1=.1</span>
<span id="cb32-335"><a href="#cb32-335" aria-hidden="true" tabindex="-1"></a> 16. <span class="kw">global</span> c2=.1</span>
<span id="cb32-336"><a href="#cb32-336" aria-hidden="true" tabindex="-1"></a> 17. <span class="kw">global</span> c3=.1</span>
<span id="cb32-337"><a href="#cb32-337" aria-hidden="true" tabindex="-1"></a> 18. <span class="kw">global</span> c4=.1</span>
<span id="cb32-338"><a href="#cb32-338" aria-hidden="true" tabindex="-1"></a> 19. <span class="kw">global</span> c5=.1</span>
<span id="cb32-339"><a href="#cb32-339" aria-hidden="true" tabindex="-1"></a> 20. <span class="kw">global</span> c6=.1</span>
<span id="cb32-340"><a href="#cb32-340" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">global</span> c7=.1</span>
<span id="cb32-341"><a href="#cb32-341" aria-hidden="true" tabindex="-1"></a> 22. <span class="kw">global</span> c8=.1</span>
<span id="cb32-342"><a href="#cb32-342" aria-hidden="true" tabindex="-1"></a> 23. <span class="kw">global</span> c9=.1</span>
<span id="cb32-343"><a href="#cb32-343" aria-hidden="true" tabindex="-1"></a> 24. <span class="kw">global</span> d1=.1</span>
<span id="cb32-344"><a href="#cb32-344" aria-hidden="true" tabindex="-1"></a> 25. <span class="kw">global</span> d2=.1</span>
<span id="cb32-345"><a href="#cb32-345" aria-hidden="true" tabindex="-1"></a> 26. <span class="kw">global</span> d3=.1</span>
<span id="cb32-346"><a href="#cb32-346" aria-hidden="true" tabindex="-1"></a> 27. <span class="kw">global</span> d4=.1</span>
<span id="cb32-347"><a href="#cb32-347" aria-hidden="true" tabindex="-1"></a> 28. <span class="kw">global</span> d5=.1</span>
<span id="cb32-348"><a href="#cb32-348" aria-hidden="true" tabindex="-1"></a> 29. <span class="kw">global</span> d6=.1</span>
<span id="cb32-349"><a href="#cb32-349" aria-hidden="true" tabindex="-1"></a> 30. <span class="kw">global</span> d7=.1</span>
<span id="cb32-350"><a href="#cb32-350" aria-hidden="true" tabindex="-1"></a> 31. <span class="kw">global</span> d8=.1</span>
<span id="cb32-351"><a href="#cb32-351" aria-hidden="true" tabindex="-1"></a> 32. <span class="kw">exit</span></span>
<span id="cb32-352"><a href="#cb32-352" aria-hidden="true" tabindex="-1"></a> 33. }</span>
<span id="cb32-353"><a href="#cb32-353" aria-hidden="true" tabindex="-1"></a> 34. <span class="kw">replace</span> <span class="ot">`1'</span>=winv*(<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7)<span class="co">/*</span></span>
<span id="cb32-354"><a href="#cb32-354" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb32-355"><a href="#cb32-355" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb32-356"><a href="#cb32-356" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c8</span>)+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)</span>
<span id="cb32-357"><a href="#cb32-357" aria-hidden="true" tabindex="-1"></a>&gt; *tyd6+<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb32-358"><a href="#cb32-358" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb32-359"><a href="#cb32-359" aria-hidden="true" tabindex="-1"></a> 35. </span>
<span id="cb32-360"><a href="#cb32-360" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb32-361"><a href="#cb32-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-362"><a href="#cb32-362" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-363"><a href="#cb32-363" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> ct_2 nprice</span>
<span id="cb32-364"><a href="#cb32-364" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 254)</span>
<span id="cb32-365"><a href="#cb32-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-366"><a href="#cb32-366" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  353.5865</span>
<span id="cb32-367"><a href="#cb32-367" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb32-368"><a href="#cb32-368" aria-hidden="true" tabindex="-1"></a>Iteration 20:  residual SS =  2.957295</span>
<span id="cb32-369"><a href="#cb32-369" aria-hidden="true" tabindex="-1"></a>Iteration 21:  residual SS =  2.957295</span>
<span id="cb32-370"><a href="#cb32-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-371"><a href="#cb32-371" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       254</span>
<span id="cb32-372"><a href="#cb32-372" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 28,   226) =    958.75</span>
<span id="cb32-373"><a href="#cb32-373" aria-hidden="true" tabindex="-1"></a>       Model |  351.277591    28  12.5456282         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb32-374"><a href="#cb32-374" aria-hidden="true" tabindex="-1"></a>    Residual |  2.95729549   226  .013085378         R-squared     =    0.9917</span>
<span id="cb32-375"><a href="#cb32-375" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9906</span>
<span id="cb32-376"><a href="#cb32-376" aria-hidden="true" tabindex="-1"></a>       Total |  354.234886   254  1.39462554         Root MSE      =  .1143913</span>
<span id="cb32-377"><a href="#cb32-377" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     = -410.2562</span>
<span id="cb32-378"><a href="#cb32-378" aria-hidden="true" tabindex="-1"></a>(ct_2)</span>
<span id="cb32-379"><a href="#cb32-379" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb32-380"><a href="#cb32-380" aria-hidden="true" tabindex="-1"></a>      nprice |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb32-381"><a href="#cb32-381" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb32-382"><a href="#cb32-382" aria-hidden="true" tabindex="-1"></a>          a3 |   367.9829    239.059     1.54   0.125    -103.0867    839.0525</span>
<span id="cb32-383"><a href="#cb32-383" aria-hidden="true" tabindex="-1"></a>          a4 |    600.553   254.2261     2.36   0.019     99.59628     1101.51</span>
<span id="cb32-384"><a href="#cb32-384" aria-hidden="true" tabindex="-1"></a>          a5 |   887.9399   243.5428     3.65   0.000     408.0348    1367.845</span>
<span id="cb32-385"><a href="#cb32-385" aria-hidden="true" tabindex="-1"></a>          a6 |   1104.433   251.0245     4.40   0.000     609.7847     1599.08</span>
<span id="cb32-386"><a href="#cb32-386" aria-hidden="true" tabindex="-1"></a>          a7 |   855.7993   366.2444     2.34   0.020     134.1088     1577.49</span>
<span id="cb32-387"><a href="#cb32-387" aria-hidden="true" tabindex="-1"></a>          b2 |   .0130387   .0303131     0.43   0.668    -.0466937    .0727711</span>
<span id="cb32-388"><a href="#cb32-388" aria-hidden="true" tabindex="-1"></a>          b3 |   .0674477   .0425176     1.59   0.114     -.016334    .1512294</span>
<span id="cb32-389"><a href="#cb32-389" aria-hidden="true" tabindex="-1"></a>          b4 |   .0701234   .0441821     1.59   0.114    -.0169382     .157185</span>
<span id="cb32-390"><a href="#cb32-390" aria-hidden="true" tabindex="-1"></a>          b5 |  -.0005627   .0470779    -0.01   0.990    -.0933305    .0922051</span>
<span id="cb32-391"><a href="#cb32-391" aria-hidden="true" tabindex="-1"></a>          b6 |   .0179989   .0473905     0.38   0.704    -.0753848    .1113826</span>
<span id="cb32-392"><a href="#cb32-392" aria-hidden="true" tabindex="-1"></a>          b7 |   .1007712   .0641587     1.57   0.118    -.0256545    .2271969</span>
<span id="cb32-393"><a href="#cb32-393" aria-hidden="true" tabindex="-1"></a>          c1 |   .0492474   .1311096     0.38   0.708    -.2091061     .307601</span>
<span id="cb32-394"><a href="#cb32-394" aria-hidden="true" tabindex="-1"></a>          c2 |   .3908689   .1383663     2.82   0.005     .1182159     .663522</span>
<span id="cb32-395"><a href="#cb32-395" aria-hidden="true" tabindex="-1"></a>          c3 |  -.0618204   .0611492    -1.01   0.313    -.1823158     .058675</span>
<span id="cb32-396"><a href="#cb32-396" aria-hidden="true" tabindex="-1"></a>          c4 |   .8103277   .1038045     7.81   0.000     .6057792    1.014876</span>
<span id="cb32-397"><a href="#cb32-397" aria-hidden="true" tabindex="-1"></a>          c5 |   .1779391   .0355273     5.01   0.000     .1079319    .2479463</span>
<span id="cb32-398"><a href="#cb32-398" aria-hidden="true" tabindex="-1"></a>          c6 |   .0693687   .0304968     2.27   0.024     .0092743     .129463</span>
<span id="cb32-399"><a href="#cb32-399" aria-hidden="true" tabindex="-1"></a>          c7 |   .1567051   .0360384     4.35   0.000     .0856908    .2277193</span>
<span id="cb32-400"><a href="#cb32-400" aria-hidden="true" tabindex="-1"></a>          c8 |   5.839036   .8621144     6.77   0.000     4.140226    7.537847</span>
<span id="cb32-401"><a href="#cb32-401" aria-hidden="true" tabindex="-1"></a>          c9 |   .1059852   .0550545     1.93   0.055    -.0025007    .2144711</span>
<span id="cb32-402"><a href="#cb32-402" aria-hidden="true" tabindex="-1"></a>          d1 |   .4759918   .1172145     4.06   0.000     .2450187    .7069649</span>
<span id="cb32-403"><a href="#cb32-403" aria-hidden="true" tabindex="-1"></a>          d2 |   .2120021   .1419991     1.49   0.137    -.0678094    .4918136</span>
<span id="cb32-404"><a href="#cb32-404" aria-hidden="true" tabindex="-1"></a>          d3 |  -.0270369    .074052    -0.37   0.715    -.1729575    .1188837</span>
<span id="cb32-405"><a href="#cb32-405" aria-hidden="true" tabindex="-1"></a>          d4 |     .24435   .1516866     1.61   0.109    -.0545508    .5432508</span>
<span id="cb32-406"><a href="#cb32-406" aria-hidden="true" tabindex="-1"></a>          d5 |   .0530065   .0356148     1.49   0.138     -.017173     .123186</span>
<span id="cb32-407"><a href="#cb32-407" aria-hidden="true" tabindex="-1"></a>          d6 |   .0575178   .0639555     0.90   0.369    -.0685076    .1835431</span>
<span id="cb32-408"><a href="#cb32-408" aria-hidden="true" tabindex="-1"></a>          d7 |   .2971909   .0566882     5.24   0.000      .185486    .4088959</span>
<span id="cb32-409"><a href="#cb32-409" aria-hidden="true" tabindex="-1"></a>          d8 |   6.630805   .7652819     8.66   0.000     5.122804    8.138805</span>
<span id="cb32-410"><a href="#cb32-410" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb32-411"><a href="#cb32-411" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb32-412"><a href="#cb32-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-413"><a href="#cb32-413" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-414"><a href="#cb32-414" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb32-415"><a href="#cb32-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-416"><a href="#cb32-416" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb32-417"><a href="#cb32-417" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb32-418"><a href="#cb32-418" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb32-419"><a href="#cb32-419" aria-hidden="true" tabindex="-1"></a>&gt; er-8\system_7985.<span class="fu">log</span></span>
<span id="cb32-420"><a href="#cb32-420" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb32-421"><a href="#cb32-421" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 21:59:28</span>
<span id="cb32-422"><a href="#cb32-422" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb32-423"><a href="#cb32-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-424"><a href="#cb32-424" aria-hidden="true" tabindex="-1"></a>. <span class="kw">exit</span></span>
<span id="cb32-425"><a href="#cb32-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-426"><a href="#cb32-426" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="my-code-2" class="level3">
<h3 class="anchored" data-anchor-id="my-code-2">My code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;</span> <span class="dv">86</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ve =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_c =</span> wdth, <span class="at">hght_c =</span> hght, <span class="at">wght_c =</span> wght, <span class="at">hp_c =</span> hp, <span class="at">four_c =</span> four,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_c =</span> tran, <span class="at">ps_c =</span> ps, <span class="at">ac_c =</span> ac</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;</span> <span class="dv">86</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ve =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_t =</span> wdth, <span class="at">hght_t =</span> hght, <span class="at">wght_t =</span> weight, <span class="at">hp_t =</span> hp, <span class="at">four_t =</span> four,</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_t =</span> tran, <span class="at">ps_t =</span> ps, <span class="at">ac_t =</span> ac</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(car_7990) <span class="sc">%&gt;%</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wdth_c), <span class="dv">0</span>, wdth_c),</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hght_c), <span class="dv">0</span>, hght_c),</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wght_c), <span class="dv">0</span>, wght_c),</span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hp_c), <span class="dv">0</span>, hp_c),</span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(four_c), <span class="dv">0</span>, four_c),</span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(tran_c), <span class="dv">0</span>, tran_c),</span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ps_c), <span class="dv">0</span>, ps_c),</span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ac_c), <span class="dv">0</span>, ac_c),</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wdth_t), <span class="dv">0</span>, wdth_t),</span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hght_t), <span class="dv">0</span>, hght_t),</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wght_t), <span class="dv">0</span>, wght_t),</span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hp_t), <span class="dv">0</span>, hp_t),</span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(four_t), <span class="dv">0</span>, four_t),</span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(tran_t), <span class="dv">0</span>, tran_t),</span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ps_t), <span class="dv">0</span>, ps_t),</span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ac_t), <span class="dv">0</span>, ac_t)</span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb33-42"><a href="#cb33-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-43"><a href="#cb33-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent =</span> freq <span class="sc">/</span> <span class="fu">sum</span>(freq) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb33-44"><a href="#cb33-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">cum =</span> <span class="fu">cumsum</span>(percent)</span>
<span id="cb33-45"><a href="#cb33-45" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
   year  freq percent   cum
  &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;
1    79    31    12.2  12.2
2    80    34    13.4  25.6
3    81    35    13.8  39.4
4    82    35    13.8  53.1
5    83    36    14.2  67.3
6    84    40    15.7  83.1
7    85    43    16.9 100  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># expand the yd variable</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yd =</span> <span class="fu">as.factor</span>(year <span class="sc">-</span> <span class="fu">min</span>(year) <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>truck_7990_dummy <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span> yd <span class="sc">-</span> <span class="dv">1</span>, <span class="at">data =</span> truck_7990)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">as.data.frame</span>(truck_7990_dummy))</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="co"># generate the cyd and tyd variables</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd2 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd2),</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd3 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd3),</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd4 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd4),</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd5 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd5),</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd6 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd6),</span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd7 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd7),</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd2 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd2),</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd3 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd3),</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd4 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd4),</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd5 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd5),</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd6 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd6),</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd7 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd7)</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a><span class="co"># fit the models</span></span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>initial_values <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">a3 =</span> <span class="dv">1</span>, <span class="at">a4 =</span> <span class="dv">1</span>, <span class="at">a5 =</span> <span class="dv">1</span>, <span class="at">a6 =</span> <span class="dv">1</span>, <span class="at">a7 =</span> <span class="dv">1</span>,</span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">b2 =</span> <span class="fl">0.1</span>, <span class="at">b3 =</span> <span class="fl">0.1</span>, <span class="at">b4 =</span> <span class="fl">0.1</span>, <span class="at">b5 =</span> <span class="fl">0.1</span>, <span class="at">b6 =</span> <span class="fl">0.1</span>, <span class="at">b7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">c1 =</span> <span class="fl">0.1</span>, <span class="at">c2 =</span> <span class="fl">0.1</span>, <span class="at">c3 =</span> <span class="fl">0.1</span>, <span class="at">c4 =</span> <span class="fl">0.1</span>, <span class="at">c5 =</span> <span class="fl">0.1</span>, <span class="at">c6 =</span> <span class="fl">0.1</span>, <span class="at">c7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">c8 =</span> <span class="fl">0.1</span>, <span class="at">c9 =</span> <span class="fl">0.1</span>,</span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">d1 =</span> <span class="fl">0.1</span>, <span class="at">d2 =</span> <span class="fl">0.1</span>, <span class="at">d3 =</span> <span class="fl">0.1</span>, <span class="at">d4 =</span> <span class="fl">0.1</span>, <span class="at">d5 =</span> <span class="fl">0.1</span>, <span class="at">d6 =</span> <span class="fl">0.1</span>, <span class="at">d7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">d8 =</span> <span class="fl">0.1</span></span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a>  price <span class="sc">~</span> a3 <span class="sc">*</span> cyd3 <span class="sc">+</span> a4 <span class="sc">*</span> cyd4 <span class="sc">+</span> a5 <span class="sc">*</span> cyd5 <span class="sc">+</span> a6 <span class="sc">*</span> cyd6 <span class="sc">+</span> a7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(b2 <span class="sc">*</span> cyd2 <span class="sc">+</span> b3 <span class="sc">*</span> cyd3 <span class="sc">+</span> b4 <span class="sc">*</span> cyd4 <span class="sc">+</span> b5 <span class="sc">*</span> cyd5 <span class="sc">+</span> b6 <span class="sc">*</span> cyd6 <span class="sc">+</span> b7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a>      c1 <span class="sc">*</span> wght_c <span class="sc">+</span> c2 <span class="sc">*</span> wdth_c <span class="sc">+</span> c3 <span class="sc">*</span> hght_c <span class="sc">+</span> c4 <span class="sc">*</span> hp_c <span class="sc">+</span> c5 <span class="sc">*</span> tran_c <span class="sc">+</span></span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a>      c6 <span class="sc">*</span> ps_c <span class="sc">+</span> c7 <span class="sc">*</span> ac_c <span class="sc">+</span> c8) <span class="sc">+</span></span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(b2 <span class="sc">*</span> tyd2 <span class="sc">+</span> (b3 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd3 <span class="sc">+</span> (b4 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd4 <span class="sc">+</span></span>
<span id="cb35-46"><a href="#cb35-46" aria-hidden="true" tabindex="-1"></a>      (b5 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd5 <span class="sc">+</span> (b6 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd6 <span class="sc">+</span> c9 <span class="sc">*</span> tyd7 <span class="sc">+</span></span>
<span id="cb35-47"><a href="#cb35-47" aria-hidden="true" tabindex="-1"></a>      d1 <span class="sc">*</span> wght_t <span class="sc">+</span> d2 <span class="sc">*</span> wdth_t <span class="sc">+</span> d3 <span class="sc">*</span> hght_t <span class="sc">+</span> d4 <span class="sc">*</span> hp_t <span class="sc">+</span> d5 <span class="sc">*</span> tran_t <span class="sc">+</span></span>
<span id="cb35-48"><a href="#cb35-48" aria-hidden="true" tabindex="-1"></a>      d6 <span class="sc">*</span> ps_t <span class="sc">+</span> d7 <span class="sc">*</span> four_t <span class="sc">+</span> d8),</span>
<span id="cb35-49"><a href="#cb35-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb35-50"><a href="#cb35-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values</span>
<span id="cb35-51"><a href="#cb35-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb35-52"><a href="#cb35-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-53"><a href="#cb35-53" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: price ~ a3 * cyd3 + a4 * cyd4 + a5 * cyd5 + a6 * cyd6 + a7 * 
    cyd7 + exp(b2 * cyd2 + b3 * cyd3 + b4 * cyd4 + b5 * cyd5 + 
    b6 * cyd6 + b7 * cyd7 + c1 * wght_c + c2 * wdth_c + c3 * 
    hght_c + c4 * hp_c + c5 * tran_c + c6 * ps_c + c7 * ac_c + 
    c8) + exp(b2 * tyd2 + (b3 + 0.16) * tyd3 + (b4 + 0.16) * 
    tyd4 + (b5 + 0.16) * tyd5 + (b6 + 0.16) * tyd6 + c9 * tyd7 + 
    d1 * wght_t + d2 * wdth_t + d3 * hght_t + d4 * hp_t + d5 * 
    tran_t + d6 * ps_t + d7 * four_t + d8)

Parameters:
     Estimate Std. Error t value Pr(&gt;|t|)    
a3  2.542e+02  3.171e+02   0.802 0.423598    
a4  5.052e+02  3.256e+02   1.552 0.122150    
a5  7.090e+02  3.173e+02   2.235 0.026415 *  
a6  1.082e+03  3.224e+02   3.356 0.000926 ***
a7  1.063e+03  3.739e+02   2.843 0.004876 ** 
b2  4.065e-03  3.290e-02   0.124 0.901779    
b3  7.559e-02  4.906e-02   1.541 0.124732    
b4  8.284e-02  4.904e-02   1.689 0.092555 .  
b5  3.276e-02  5.070e-02   0.646 0.518840    
b6  3.510e-02  5.147e-02   0.682 0.495934    
b7  8.254e-02  5.576e-02   1.480 0.140197    
c1  3.261e-02  1.117e-01   0.292 0.770715    
c2  3.860e-01  1.204e-01   3.205 0.001545 ** 
c3 -1.929e-01  5.683e-02  -3.395 0.000811 ***
c4  7.152e-01  7.362e-02   9.715  &lt; 2e-16 ***
c5  1.579e-01  3.382e-02   4.668 5.21e-06 ***
c6  6.412e-02  2.471e-02   2.595 0.010082 *  
c7  1.830e-01  2.428e-02   7.535 1.16e-12 ***
c8  6.599e+00  7.307e-01   9.032  &lt; 2e-16 ***
c9  1.172e-01  6.342e-02   1.848 0.065932 .  
d1  4.917e-01  7.958e-02   6.179 2.97e-09 ***
d2  2.621e-01  1.757e-01   1.492 0.137107    
d3 -4.513e-02  6.770e-02  -0.667 0.505752    
d4  3.031e-01  1.701e-01   1.782 0.076158 .  
d5  3.978e-02  3.627e-02   1.097 0.273899    
d6  9.676e-02  5.018e-02   1.928 0.055072 .  
d7  3.052e-01  7.156e-02   4.265 2.94e-05 ***
d8  6.300e+00  9.620e-01   6.549 3.85e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 666.9 on 226 degrees of freedom

Number of iterations to convergence: 30 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">winv =</span> <span class="fu">case_when</span>(</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>      ve <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>(<span class="fu">coef</span>(fit)[<span class="st">"b2"</span>] <span class="sc">*</span> cyd2 <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"b3"</span>] <span class="sc">*</span> cyd3 <span class="sc">+</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"b4"</span>] <span class="sc">*</span> cyd4 <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"b5"</span>] <span class="sc">*</span> cyd5 <span class="sc">+</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"b6"</span>] <span class="sc">*</span> cyd6 <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"b7"</span>] <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"c1"</span>] <span class="sc">*</span> wght_c <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"c2"</span>] <span class="sc">*</span> wdth_c <span class="sc">+</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"c3"</span>] <span class="sc">*</span> hght_c <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"c4"</span>] <span class="sc">*</span> hp_c <span class="sc">+</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"c5"</span>] <span class="sc">*</span> tran_c <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"c6"</span>] <span class="sc">*</span> ps_c <span class="sc">+</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"c7"</span>] <span class="sc">*</span> ac_c <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"c8"</span>]),</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>      ve <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>((<span class="fu">coef</span>(fit)[<span class="st">"b2"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd2 <span class="sc">+</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>        (<span class="fu">coef</span>(fit)[<span class="st">"b3"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd3 <span class="sc">+</span> (<span class="fu">coef</span>(fit)[<span class="st">"b4"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd4 <span class="sc">+</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>        (<span class="fu">coef</span>(fit)[<span class="st">"b5"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd5 <span class="sc">+</span> (<span class="fu">coef</span>(fit)[<span class="st">"b6"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd6 <span class="sc">+</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"c9"</span>] <span class="sc">*</span> tyd7 <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"d1"</span>] <span class="sc">*</span> wght_t <span class="sc">+</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"d2"</span>] <span class="sc">*</span> wdth_t <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"d3"</span>] <span class="sc">*</span> hght_t <span class="sc">+</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"d4"</span>] <span class="sc">*</span> hp_t <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"d5"</span>] <span class="sc">*</span> tran_t <span class="sc">+</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"d6"</span>] <span class="sc">*</span> ps_t <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"d7"</span>] <span class="sc">*</span> four_t <span class="sc">+</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"d8"</span>])</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">nprice =</span> price <span class="sc">*</span> winv</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>fit2 <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>  nprice <span class="sc">~</span> winv <span class="sc">*</span> (a3 <span class="sc">*</span> cyd3 <span class="sc">+</span> a4 <span class="sc">*</span> cyd4 <span class="sc">+</span> a5 <span class="sc">*</span> cyd5 <span class="sc">+</span> a6 <span class="sc">*</span> cyd6 <span class="sc">+</span> a7 <span class="sc">*</span> cyd7) <span class="sc">+</span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(b2 <span class="sc">*</span> cyd2 <span class="sc">+</span> b3 <span class="sc">*</span> cyd3 <span class="sc">+</span> b4 <span class="sc">*</span> cyd4 <span class="sc">+</span> b5 <span class="sc">*</span> cyd5 <span class="sc">+</span> b6 <span class="sc">*</span> cyd6 <span class="sc">+</span></span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>      b7 <span class="sc">*</span> cyd7 <span class="sc">+</span> c1 <span class="sc">*</span> wght_c <span class="sc">+</span> c2 <span class="sc">*</span> wdth_c <span class="sc">+</span> c3 <span class="sc">*</span> hght_c <span class="sc">+</span> c4 <span class="sc">*</span> hp_c <span class="sc">+</span></span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>      c5 <span class="sc">*</span> tran_c <span class="sc">+</span> c6 <span class="sc">*</span> ps_c <span class="sc">+</span> c7 <span class="sc">*</span> ac_c <span class="sc">+</span> c8) <span class="sc">+</span></span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(b2 <span class="sc">*</span> tyd2 <span class="sc">+</span> (b3 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd3 <span class="sc">+</span> (b4 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd4 <span class="sc">+</span></span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>      (b5 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd5 <span class="sc">+</span> (b6 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd6 <span class="sc">+</span> c9 <span class="sc">*</span> tyd7 <span class="sc">+</span> d1 <span class="sc">*</span> wght_t <span class="sc">+</span></span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>      d2 <span class="sc">*</span> wdth_t <span class="sc">+</span> d3 <span class="sc">*</span> hght_t <span class="sc">+</span> d4 <span class="sc">*</span> hp_t <span class="sc">+</span> d5 <span class="sc">*</span> tran_t <span class="sc">+</span> d6 <span class="sc">*</span> ps_t <span class="sc">+</span></span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>      d7 <span class="sc">*</span> four_t <span class="sc">+</span> d8),</span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values</span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: nprice ~ winv * (a3 * cyd3 + a4 * cyd4 + a5 * cyd5 + a6 * cyd6 + 
    a7 * cyd7) + winv * exp(b2 * cyd2 + b3 * cyd3 + b4 * cyd4 + 
    b5 * cyd5 + b6 * cyd6 + b7 * cyd7 + c1 * wght_c + c2 * wdth_c + 
    c3 * hght_c + c4 * hp_c + c5 * tran_c + c6 * ps_c + c7 * 
    ac_c + c8) + winv * exp(b2 * tyd2 + (b3 + 0.16) * tyd3 + 
    (b4 + 0.16) * tyd4 + (b5 + 0.16) * tyd5 + (b6 + 0.16) * tyd6 + 
    c9 * tyd7 + d1 * wght_t + d2 * wdth_t + d3 * hght_t + d4 * 
    hp_t + d5 * tran_t + d6 * ps_t + d7 * four_t + d8)

Parameters:
     Estimate Std. Error t value Pr(&gt;|t|)    
a3  3.679e+02  2.391e+02   1.539 0.125219    
a4  6.005e+02  2.543e+02   2.362 0.019041 *  
a5  8.879e+02  2.436e+02   3.645 0.000332 ***
a6  1.104e+03  2.511e+02   4.399 1.68e-05 ***
a7  8.556e+02  3.663e+02   2.336 0.020379 *  
b2  1.304e-02  3.031e-02   0.430 0.667488    
b3  6.745e-02  4.252e-02   1.586 0.114086    
b4  7.013e-02  4.419e-02   1.587 0.113886    
b5 -5.484e-04  4.708e-02  -0.012 0.990718    
b6  1.801e-02  4.740e-02   0.380 0.704268    
b7  1.008e-01  6.416e-02   1.571 0.117554    
c1  4.925e-02  1.311e-01   0.376 0.707523    
c2  3.908e-01  1.383e-01   2.825 0.005153 ** 
c3 -6.182e-02  6.114e-02  -1.011 0.313088    
c4  8.103e-01  1.038e-01   7.807 2.17e-13 ***
c5  1.779e-01  3.552e-02   5.009 1.10e-06 ***
c6  6.936e-02  3.049e-02   2.275 0.023864 *  
c7  1.567e-01  3.604e-02   4.348 2.08e-05 ***
c8  5.839e+00  8.619e-01   6.775 1.07e-10 ***
c9  1.060e-01  5.506e-02   1.925 0.055494 .  
d1  4.760e-01  1.172e-01   4.060 6.76e-05 ***
d2  2.121e-01  1.420e-01   1.493 0.136773    
d3 -2.704e-02  7.406e-02  -0.365 0.715380    
d4  2.443e-01  1.517e-01   1.611 0.108659    
d5  5.301e-02  3.562e-02   1.488 0.138112    
d6  5.751e-02  6.396e-02   0.899 0.369534    
d7  2.972e-01  5.670e-02   5.242 3.64e-07 ***
d8  6.630e+00  7.655e-01   8.661 8.98e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1144 on 226 degrees of freedom

Number of iterations to convergence: 31 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
</div>
</section>
<section id="extra-step-formatting-the-tables-1" class="level3">
<h3 class="anchored" data-anchor-id="extra-step-formatting-the-tables-1">Extra step: formatting the tables</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>table_84_2 <span class="ot">&lt;-</span> <span class="fu">tidy</span>(fit2) <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(term, estimate, std.error) <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">vehicle =</span> <span class="fu">substr</span>(term, <span class="dv">1</span>, <span class="dv">1</span>),</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">vehicle =</span> <span class="fu">case_when</span>(</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>      vehicle <span class="sc">==</span> <span class="st">"c"</span> <span class="sc">~</span> <span class="st">"car"</span>,</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>      vehicle <span class="sc">==</span> <span class="st">"d"</span> <span class="sc">~</span> <span class="st">"truck"</span>,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Exclude"</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(vehicle <span class="sc">!=</span> <span class="st">"Exclude"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">term =</span> <span class="fu">case_when</span>(</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>      term <span class="sc">==</span> <span class="st">"c1"</span> <span class="sc">|</span> term <span class="sc">==</span> <span class="st">"d1"</span> <span class="sc">~</span> <span class="st">"Weight (tons)"</span>,</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>      term <span class="sc">==</span> <span class="st">"c2"</span> <span class="sc">|</span> term <span class="sc">==</span> <span class="st">"d2"</span> <span class="sc">~</span> <span class="st">"Width (feet)"</span>,</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>      term <span class="sc">==</span> <span class="st">"c3"</span> <span class="sc">|</span> term <span class="sc">==</span> <span class="st">"d3"</span> <span class="sc">~</span> <span class="st">"Height (feet)"</span>,</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>      term <span class="sc">==</span> <span class="st">"c4"</span> <span class="sc">|</span> term <span class="sc">==</span> <span class="st">"d4"</span> <span class="sc">~</span> <span class="st">"Horsepower (100)"</span>,</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>      term <span class="sc">==</span> <span class="st">"c5"</span> <span class="sc">|</span> term <span class="sc">==</span> <span class="st">"d5"</span> <span class="sc">~</span> <span class="st">"Transmission (5-speed or auto)"</span>,</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>      term <span class="sc">==</span> <span class="st">"c6"</span> <span class="sc">|</span> term <span class="sc">==</span> <span class="st">"d6"</span> <span class="sc">~</span> <span class="st">"Power steering"</span>,</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>      term <span class="sc">==</span> <span class="st">"c7"</span>                <span class="sc">~</span> <span class="st">"Air conditioning"</span>,</span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>      term <span class="sc">==</span> <span class="st">"d7"</span>                <span class="sc">~</span> <span class="st">"Four-wheel drive"</span>,</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>      term <span class="sc">==</span> <span class="st">"c8"</span> <span class="sc">|</span> term <span class="sc">==</span> <span class="st">"d8"</span> <span class="sc">~</span> <span class="st">"Constant"</span>,</span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Exclude"</span></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">!=</span> <span class="st">"Exclude"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(estimate, std.error), <span class="at">names_to =</span> <span class="st">"stat"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"vehicle"</span>, <span class="at">values_from =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span> <span class="fu">round</span>(., <span class="dv">3</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">term =</span> <span class="fu">factor</span>(term, <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Constant"</span>, <span class="st">"Weight (tons)"</span>, <span class="st">"Width (feet)"</span>, <span class="st">"Height (feet)"</span>,</span>
<span id="cb39-33"><a href="#cb39-33" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Horsepower (100)"</span>, <span class="st">"Transmission (5-speed or auto)"</span>, <span class="st">"Power steering"</span>,</span>
<span id="cb39-34"><a href="#cb39-34" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Air conditioning"</span>, <span class="st">"Four-wheel drive"</span></span>
<span id="cb39-35"><a href="#cb39-35" aria-hidden="true" tabindex="-1"></a>    )),</span>
<span id="cb39-36"><a href="#cb39-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">stat =</span> <span class="fu">if_else</span>(stat <span class="sc">==</span> <span class="st">"estimate"</span>, <span class="st">"Estimate"</span>, <span class="st">"Std. Error"</span>)</span>
<span id="cb39-37"><a href="#cb39-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb39-38"><a href="#cb39-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(term)</span>
<span id="cb39-39"><a href="#cb39-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-40"><a href="#cb39-40" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(table_84_2) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Variable"</span>, <span class="st">"Statistic"</span>, <span class="st">"Car"</span>, <span class="st">"Truck"</span>)</span>
<span id="cb39-41"><a href="#cb39-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-42"><a href="#cb39-42" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(table_84_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Statistic</th>
<th style="text-align: right;">Car</th>
<th style="text-align: right;">Truck</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Constant</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">5.839</td>
<td style="text-align: right;">6.630</td>
</tr>
<tr class="even">
<td style="text-align: left;">Constant</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.862</td>
<td style="text-align: right;">0.765</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Weight (tons)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.049</td>
<td style="text-align: right;">0.476</td>
</tr>
<tr class="even">
<td style="text-align: left;">Weight (tons)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.131</td>
<td style="text-align: right;">0.117</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Width (feet)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.391</td>
<td style="text-align: right;">0.212</td>
</tr>
<tr class="even">
<td style="text-align: left;">Width (feet)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.138</td>
<td style="text-align: right;">0.142</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Height (feet)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">-0.062</td>
<td style="text-align: right;">-0.027</td>
</tr>
<tr class="even">
<td style="text-align: left;">Height (feet)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.061</td>
<td style="text-align: right;">0.074</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Horsepower (100)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.810</td>
<td style="text-align: right;">0.244</td>
</tr>
<tr class="even">
<td style="text-align: left;">Horsepower (100)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.104</td>
<td style="text-align: right;">0.152</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Transmission (5-speed or auto)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.178</td>
<td style="text-align: right;">0.053</td>
</tr>
<tr class="even">
<td style="text-align: left;">Transmission (5-speed or auto)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.036</td>
<td style="text-align: right;">0.036</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Power steering</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.069</td>
<td style="text-align: right;">0.058</td>
</tr>
<tr class="even">
<td style="text-align: left;">Power steering</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.030</td>
<td style="text-align: right;">0.064</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Air conditioning</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.157</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Air conditioning</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.036</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Four-wheel drive</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.297</td>
</tr>
<tr class="even">
<td style="text-align: left;">Four-wheel drive</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.057</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="exercise-4" class="level2">
<h2 class="anchored" data-anchor-id="exercise-4">Exercise 4</h2>
<p>Run the programs <code>unit_quality.do</code>, <code>qindex_c.do</code>, <code>qindex_t.do</code> to reproduce the quality indexes and unit-qualities for cars and trucks in Table 8.3. What formula is used for the quality of each model and the quality indexes, and how does this differ from the unit-quality?</p>
<section id="feenstras-code-3" class="level3">
<h3 class="anchored" data-anchor-id="feenstras-code-3">Feenstra’s code</h3>
<section id="unit_quality.do" class="level4">
<h4 class="anchored" data-anchor-id="unit_quality.do">unit_quality.do</h4>
<div class="sourceCode" id="cb40"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\unit_quality.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_7990,<span class="kw">clear</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> ve=2</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> quan quan_t</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wdth wdth_t</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hght hght_t</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">weight</span> wght_t</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hp hp_t</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> four four_t</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> tran tran_t</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> ps ps_t</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">ac</span> ac_t</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_temp,<span class="kw">replace</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_7990,<span class="kw">clear</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> ve=1</span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> quan quan_c</span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wdth wdth_c</span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hght hght_c</span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wght wght_c</span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hp hp_c</span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> four four_c</span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> tran tran_c</span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> ps ps_c</span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">ac</span> ac_c</span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a><span class="kw">append</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_temp</span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wdth_c=0 <span class="kw">if</span> wdth_c==.</span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hght_c=0 <span class="kw">if</span> hght_c==.</span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wght_c=0 <span class="kw">if</span> wght_c==.</span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hp_c=0 <span class="kw">if</span> hp_c==.</span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> four_c=0 <span class="kw">if</span> four_c==.</span>
<span id="cb40-39"><a href="#cb40-39" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tran_c=0 <span class="kw">if</span> tran_c==.</span>
<span id="cb40-40"><a href="#cb40-40" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ps_c=0 <span class="kw">if</span> ps_c==.</span>
<span id="cb40-41"><a href="#cb40-41" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ac_c=0 <span class="kw">if</span> ac_c==.</span>
<span id="cb40-42"><a href="#cb40-42" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wdth_t=0 <span class="kw">if</span> wdth_t==.</span>
<span id="cb40-43"><a href="#cb40-43" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hght_t=0 <span class="kw">if</span> hght_t==.</span>
<span id="cb40-44"><a href="#cb40-44" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wght_t=0 <span class="kw">if</span> wght_t==.</span>
<span id="cb40-45"><a href="#cb40-45" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hp_t=0 <span class="kw">if</span> hp_t==.</span>
<span id="cb40-46"><a href="#cb40-46" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> four_t=0 <span class="kw">if</span> four_t==.</span>
<span id="cb40-47"><a href="#cb40-47" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tran_t=0 <span class="kw">if</span> tran_t==.</span>
<span id="cb40-48"><a href="#cb40-48" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ps_t=0 <span class="kw">if</span> ps_t==.</span>
<span id="cb40-49"><a href="#cb40-49" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ac_t=0 <span class="kw">if</span> ac_t==.</span>
<span id="cb40-50"><a href="#cb40-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-51"><a href="#cb40-51" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb40-52"><a href="#cb40-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-53"><a href="#cb40-53" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd2=yd2</span>
<span id="cb40-54"><a href="#cb40-54" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd2=yd2</span>
<span id="cb40-55"><a href="#cb40-55" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd2=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb40-56"><a href="#cb40-56" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd2=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb40-57"><a href="#cb40-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-58"><a href="#cb40-58" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd3=yd3</span>
<span id="cb40-59"><a href="#cb40-59" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd3=yd3</span>
<span id="cb40-60"><a href="#cb40-60" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd3=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb40-61"><a href="#cb40-61" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd3=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb40-62"><a href="#cb40-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-63"><a href="#cb40-63" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd4=yd4</span>
<span id="cb40-64"><a href="#cb40-64" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd4=yd4</span>
<span id="cb40-65"><a href="#cb40-65" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd4=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb40-66"><a href="#cb40-66" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd4=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb40-67"><a href="#cb40-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-68"><a href="#cb40-68" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd5=yd5</span>
<span id="cb40-69"><a href="#cb40-69" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd5=yd5</span>
<span id="cb40-70"><a href="#cb40-70" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd5=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb40-71"><a href="#cb40-71" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd5=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb40-72"><a href="#cb40-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-73"><a href="#cb40-73" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd6=yd6</span>
<span id="cb40-74"><a href="#cb40-74" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd6=yd6</span>
<span id="cb40-75"><a href="#cb40-75" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd6=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb40-76"><a href="#cb40-76" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd6=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb40-77"><a href="#cb40-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-78"><a href="#cb40-78" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd7=yd7</span>
<span id="cb40-79"><a href="#cb40-79" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd7=yd7</span>
<span id="cb40-80"><a href="#cb40-80" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb40-81"><a href="#cb40-81" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb40-82"><a href="#cb40-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-83"><a href="#cb40-83" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlct_1</span>
<span id="cb40-84"><a href="#cb40-84" aria-hidden="true" tabindex="-1"></a><span class="kw">version</span> 7.0</span>
<span id="cb40-85"><a href="#cb40-85" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb40-86"><a href="#cb40-86" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2 d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb40-87"><a href="#cb40-87" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a3=1</span>
<span id="cb40-88"><a href="#cb40-88" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a4=1</span>
<span id="cb40-89"><a href="#cb40-89" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a5=1</span>
<span id="cb40-90"><a href="#cb40-90" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a6=1</span>
<span id="cb40-91"><a href="#cb40-91" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a7=1</span>
<span id="cb40-92"><a href="#cb40-92" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b2=.1</span>
<span id="cb40-93"><a href="#cb40-93" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b3=.1</span>
<span id="cb40-94"><a href="#cb40-94" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b4=.1</span>
<span id="cb40-95"><a href="#cb40-95" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b5=.1</span>
<span id="cb40-96"><a href="#cb40-96" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b6=.1</span>
<span id="cb40-97"><a href="#cb40-97" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b7=.1</span>
<span id="cb40-98"><a href="#cb40-98" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c1=.1</span>
<span id="cb40-99"><a href="#cb40-99" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c2=.1</span>
<span id="cb40-100"><a href="#cb40-100" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c3=.1</span>
<span id="cb40-101"><a href="#cb40-101" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c4=.1</span>
<span id="cb40-102"><a href="#cb40-102" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c5=.1</span>
<span id="cb40-103"><a href="#cb40-103" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c6=.1</span>
<span id="cb40-104"><a href="#cb40-104" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c7=.1</span>
<span id="cb40-105"><a href="#cb40-105" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c8=.1</span>
<span id="cb40-106"><a href="#cb40-106" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c9=.1</span>
<span id="cb40-107"><a href="#cb40-107" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d1=.1</span>
<span id="cb40-108"><a href="#cb40-108" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d2=.1</span>
<span id="cb40-109"><a href="#cb40-109" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d3=.1</span>
<span id="cb40-110"><a href="#cb40-110" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d4=.1</span>
<span id="cb40-111"><a href="#cb40-111" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d5=.1</span>
<span id="cb40-112"><a href="#cb40-112" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d6=.1</span>
<span id="cb40-113"><a href="#cb40-113" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d7=.1</span>
<span id="cb40-114"><a href="#cb40-114" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d8=.1</span>
<span id="cb40-115"><a href="#cb40-115" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span>
<span id="cb40-116"><a href="#cb40-116" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-117"><a href="#cb40-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-118"><a href="#cb40-118" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb40-119"><a href="#cb40-119" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb40-120"><a href="#cb40-120" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb40-121"><a href="#cb40-121" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c8</span>)+<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)*tyd6+<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb40-122"><a href="#cb40-122" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb40-123"><a href="#cb40-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-124"><a href="#cb40-124" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb40-125"><a href="#cb40-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-126"><a href="#cb40-126" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> ct_1 price</span>
<span id="cb40-127"><a href="#cb40-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-128"><a href="#cb40-128" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*cyd2+_b[b3]*cyd3+_b[b4]*cyd4+_b[b5]*cyd5+_b[b6]*cyd6+_b[b7]*cyd7<span class="co">/*</span></span>
<span id="cb40-129"><a href="#cb40-129" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*hp_c+_b[c5]*tran_c+_b[c6]*ps_c<span class="co">/*</span></span>
<span id="cb40-130"><a href="#cb40-130" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c7]*ac_c+_b[c8])</span>
<span id="cb40-131"><a href="#cb40-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-132"><a href="#cb40-132" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> winv=1/<span class="fu">exp</span>((_b[b2]+0.16)*tyd2+(_b[b3]+.16)*tyd3+(_b[b4]+.16)*tyd4<span class="co">/*</span></span>
<span id="cb40-133"><a href="#cb40-133" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+(_b[b5]+.16)*tyd5+(_b[b6]+.16)*tyd6+_b[c9]*tyd7<span class="co">/*</span></span>
<span id="cb40-134"><a href="#cb40-134" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*hp_t<span class="co">/*</span></span>
<span id="cb40-135"><a href="#cb40-135" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t+_b[d8]) <span class="kw">if</span> ve==2</span>
<span id="cb40-136"><a href="#cb40-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-137"><a href="#cb40-137" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nprice=price*winv</span>
<span id="cb40-138"><a href="#cb40-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-139"><a href="#cb40-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-140"><a href="#cb40-140" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlct_2</span>
<span id="cb40-141"><a href="#cb40-141" aria-hidden="true" tabindex="-1"></a><span class="kw">version</span> 7.0</span>
<span id="cb40-142"><a href="#cb40-142" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb40-143"><a href="#cb40-143" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2 d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb40-144"><a href="#cb40-144" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a3=1</span>
<span id="cb40-145"><a href="#cb40-145" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a4=1</span>
<span id="cb40-146"><a href="#cb40-146" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a5=1</span>
<span id="cb40-147"><a href="#cb40-147" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a6=1</span>
<span id="cb40-148"><a href="#cb40-148" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a7=1</span>
<span id="cb40-149"><a href="#cb40-149" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b2=.1</span>
<span id="cb40-150"><a href="#cb40-150" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b3=.1</span>
<span id="cb40-151"><a href="#cb40-151" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b4=.1</span>
<span id="cb40-152"><a href="#cb40-152" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b5=.1</span>
<span id="cb40-153"><a href="#cb40-153" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b6=.1</span>
<span id="cb40-154"><a href="#cb40-154" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b7=.1</span>
<span id="cb40-155"><a href="#cb40-155" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c1=.1</span>
<span id="cb40-156"><a href="#cb40-156" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c2=.1</span>
<span id="cb40-157"><a href="#cb40-157" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c3=.1</span>
<span id="cb40-158"><a href="#cb40-158" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c4=.1</span>
<span id="cb40-159"><a href="#cb40-159" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c5=.1</span>
<span id="cb40-160"><a href="#cb40-160" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c6=.1</span>
<span id="cb40-161"><a href="#cb40-161" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c7=.1</span>
<span id="cb40-162"><a href="#cb40-162" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c8=.1</span>
<span id="cb40-163"><a href="#cb40-163" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c9=.1</span>
<span id="cb40-164"><a href="#cb40-164" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d1=.1</span>
<span id="cb40-165"><a href="#cb40-165" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d2=.1</span>
<span id="cb40-166"><a href="#cb40-166" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d3=.1</span>
<span id="cb40-167"><a href="#cb40-167" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d4=.1</span>
<span id="cb40-168"><a href="#cb40-168" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d5=.1</span>
<span id="cb40-169"><a href="#cb40-169" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d6=.1</span>
<span id="cb40-170"><a href="#cb40-170" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d7=.1</span>
<span id="cb40-171"><a href="#cb40-171" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d8=.1</span>
<span id="cb40-172"><a href="#cb40-172" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span>
<span id="cb40-173"><a href="#cb40-173" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-174"><a href="#cb40-174" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">`1'</span>=winv*(<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7)<span class="co">/*</span></span>
<span id="cb40-175"><a href="#cb40-175" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb40-176"><a href="#cb40-176" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb40-177"><a href="#cb40-177" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c8</span>)+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)*tyd6+<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb40-178"><a href="#cb40-178" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb40-179"><a href="#cb40-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-180"><a href="#cb40-180" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb40-181"><a href="#cb40-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-182"><a href="#cb40-182" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> ct_2 nprice</span>
<span id="cb40-183"><a href="#cb40-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-184"><a href="#cb40-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-185"><a href="#cb40-185" aria-hidden="true" tabindex="-1"></a><span class="kw">preserve</span></span>
<span id="cb40-186"><a href="#cb40-186" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> ve==1</span>
<span id="cb40-187"><a href="#cb40-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-188"><a href="#cb40-188" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> quality=<span class="fu">exp</span>(_b[c8]+_b[b2]+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*hp_c<span class="co">/*</span></span>
<span id="cb40-189"><a href="#cb40-189" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c5]*tran_c+_b[c6]*ps_c+_b[c7]*ac_c)</span>
<span id="cb40-190"><a href="#cb40-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-191"><a href="#cb40-191" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\quality_c,<span class="kw">replace</span></span>
<span id="cb40-192"><a href="#cb40-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-193"><a href="#cb40-193" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nvalue=quality*quan_c</span>
<span id="cb40-194"><a href="#cb40-194" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan_c), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb40-195"><a href="#cb40-195" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> anvalue=<span class="kw">mean</span>(nvalue),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb40-196"><a href="#cb40-196" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> uquality=anvalue/aquan</span>
<span id="cb40-197"><a href="#cb40-197" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>)uquality, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb40-198"><a href="#cb40-198" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span></span>
<span id="cb40-199"><a href="#cb40-199" aria-hidden="true" tabindex="-1"></a><span class="kw">restore</span></span>
<span id="cb40-200"><a href="#cb40-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-201"><a href="#cb40-201" aria-hidden="true" tabindex="-1"></a><span class="kw">preserve</span></span>
<span id="cb40-202"><a href="#cb40-202" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> ve==2</span>
<span id="cb40-203"><a href="#cb40-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-204"><a href="#cb40-204" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> quality=<span class="fu">exp</span>(_b[d8]+_b[b2]+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*hp_t<span class="co">/*</span></span>
<span id="cb40-205"><a href="#cb40-205" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t)</span>
<span id="cb40-206"><a href="#cb40-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-207"><a href="#cb40-207" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\quality_t,<span class="kw">replace</span></span>
<span id="cb40-208"><a href="#cb40-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-209"><a href="#cb40-209" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nvalue=quality*quan_t</span>
<span id="cb40-210"><a href="#cb40-210" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan_t),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb40-211"><a href="#cb40-211" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> anvalue=<span class="kw">mean</span>(nvalue), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb40-212"><a href="#cb40-212" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> uquality=anvalue/aquan</span>
<span id="cb40-213"><a href="#cb40-213" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>)uquality, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb40-214"><a href="#cb40-214" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span></span>
<span id="cb40-215"><a href="#cb40-215" aria-hidden="true" tabindex="-1"></a><span class="kw">restore</span></span>
<span id="cb40-216"><a href="#cb40-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-217"><a href="#cb40-217" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb40-218"><a href="#cb40-218" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb40-219"><a href="#cb40-219" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\unit_quality.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\unit_quality.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>&gt; er-8\unit_quality.<span class="fu">log</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 23:03:32</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tr</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>&gt; uck_7990,<span class="kw">clear</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>(45 observations deleted)</span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> ve=2</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> quan quan_t</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wdth wdth_t</span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hght hght_t</span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">weight</span> wght_t</span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hp hp_t</span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> four four_t</span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> tran tran_t</span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-37"><a href="#cb41-37" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> ps ps_t</span>
<span id="cb41-38"><a href="#cb41-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-39"><a href="#cb41-39" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">ac</span> ac_t</span>
<span id="cb41-40"><a href="#cb41-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-41"><a href="#cb41-41" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-42"><a href="#cb41-42" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\t</span>
<span id="cb41-43"><a href="#cb41-43" aria-hidden="true" tabindex="-1"></a>&gt; ruck_temp,<span class="kw">replace</span></span>
<span id="cb41-44"><a href="#cb41-44" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tru</span>
<span id="cb41-45"><a href="#cb41-45" aria-hidden="true" tabindex="-1"></a>&gt; ck_temp.dta saved</span>
<span id="cb41-46"><a href="#cb41-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-47"><a href="#cb41-47" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-48"><a href="#cb41-48" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="kw">ca</span></span>
<span id="cb41-49"><a href="#cb41-49" aria-hidden="true" tabindex="-1"></a>&gt; r_7990,<span class="kw">clear</span></span>
<span id="cb41-50"><a href="#cb41-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-51"><a href="#cb41-51" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb41-52"><a href="#cb41-52" aria-hidden="true" tabindex="-1"></a>(105 observations deleted)</span>
<span id="cb41-53"><a href="#cb41-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-54"><a href="#cb41-54" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> ve=1</span>
<span id="cb41-55"><a href="#cb41-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-56"><a href="#cb41-56" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> quan quan_c</span>
<span id="cb41-57"><a href="#cb41-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-58"><a href="#cb41-58" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wdth wdth_c</span>
<span id="cb41-59"><a href="#cb41-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-60"><a href="#cb41-60" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hght hght_c</span>
<span id="cb41-61"><a href="#cb41-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-62"><a href="#cb41-62" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wght wght_c</span>
<span id="cb41-63"><a href="#cb41-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-64"><a href="#cb41-64" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hp hp_c</span>
<span id="cb41-65"><a href="#cb41-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-66"><a href="#cb41-66" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> four four_c</span>
<span id="cb41-67"><a href="#cb41-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-68"><a href="#cb41-68" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> tran tran_c</span>
<span id="cb41-69"><a href="#cb41-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-70"><a href="#cb41-70" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> ps ps_c</span>
<span id="cb41-71"><a href="#cb41-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-72"><a href="#cb41-72" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">ac</span> ac_c</span>
<span id="cb41-73"><a href="#cb41-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-74"><a href="#cb41-74" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-75"><a href="#cb41-75" aria-hidden="true" tabindex="-1"></a>. <span class="kw">append</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Cha</span>
<span id="cb41-76"><a href="#cb41-76" aria-hidden="true" tabindex="-1"></a>&gt; pter-8\truck_temp</span>
<span id="cb41-77"><a href="#cb41-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-78"><a href="#cb41-78" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-79"><a href="#cb41-79" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wdth_c=0 <span class="kw">if</span> wdth_c==.</span>
<span id="cb41-80"><a href="#cb41-80" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb41-81"><a href="#cb41-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-82"><a href="#cb41-82" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hght_c=0 <span class="kw">if</span> hght_c==.</span>
<span id="cb41-83"><a href="#cb41-83" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb41-84"><a href="#cb41-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-85"><a href="#cb41-85" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wght_c=0 <span class="kw">if</span> wght_c==.</span>
<span id="cb41-86"><a href="#cb41-86" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb41-87"><a href="#cb41-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-88"><a href="#cb41-88" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hp_c=0 <span class="kw">if</span> hp_c==.</span>
<span id="cb41-89"><a href="#cb41-89" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb41-90"><a href="#cb41-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-91"><a href="#cb41-91" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> four_c=0 <span class="kw">if</span> four_c==.</span>
<span id="cb41-92"><a href="#cb41-92" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb41-93"><a href="#cb41-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-94"><a href="#cb41-94" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tran_c=0 <span class="kw">if</span> tran_c==.</span>
<span id="cb41-95"><a href="#cb41-95" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb41-96"><a href="#cb41-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-97"><a href="#cb41-97" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ps_c=0 <span class="kw">if</span> ps_c==.</span>
<span id="cb41-98"><a href="#cb41-98" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb41-99"><a href="#cb41-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-100"><a href="#cb41-100" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ac_c=0 <span class="kw">if</span> ac_c==.</span>
<span id="cb41-101"><a href="#cb41-101" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb41-102"><a href="#cb41-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-103"><a href="#cb41-103" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wdth_t=0 <span class="kw">if</span> wdth_t==.</span>
<span id="cb41-104"><a href="#cb41-104" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb41-105"><a href="#cb41-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-106"><a href="#cb41-106" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hght_t=0 <span class="kw">if</span> hght_t==.</span>
<span id="cb41-107"><a href="#cb41-107" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb41-108"><a href="#cb41-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-109"><a href="#cb41-109" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wght_t=0 <span class="kw">if</span> wght_t==.</span>
<span id="cb41-110"><a href="#cb41-110" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb41-111"><a href="#cb41-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-112"><a href="#cb41-112" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hp_t=0 <span class="kw">if</span> hp_t==.</span>
<span id="cb41-113"><a href="#cb41-113" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb41-114"><a href="#cb41-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-115"><a href="#cb41-115" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> four_t=0 <span class="kw">if</span> four_t==.</span>
<span id="cb41-116"><a href="#cb41-116" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb41-117"><a href="#cb41-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-118"><a href="#cb41-118" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tran_t=0 <span class="kw">if</span> tran_t==.</span>
<span id="cb41-119"><a href="#cb41-119" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb41-120"><a href="#cb41-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-121"><a href="#cb41-121" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ps_t=0 <span class="kw">if</span> ps_t==.</span>
<span id="cb41-122"><a href="#cb41-122" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb41-123"><a href="#cb41-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-124"><a href="#cb41-124" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ac_t=0 <span class="kw">if</span> ac_t==.</span>
<span id="cb41-125"><a href="#cb41-125" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb41-126"><a href="#cb41-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-127"><a href="#cb41-127" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-128"><a href="#cb41-128" aria-hidden="true" tabindex="-1"></a>. <span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb41-129"><a href="#cb41-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-130"><a href="#cb41-130" aria-hidden="true" tabindex="-1"></a>       <span class="fu">year</span> |      Freq.     Percent        Cum.</span>
<span id="cb41-131"><a href="#cb41-131" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb41-132"><a href="#cb41-132" aria-hidden="true" tabindex="-1"></a>         79 |         31       12.20       12.20</span>
<span id="cb41-133"><a href="#cb41-133" aria-hidden="true" tabindex="-1"></a>         80 |         34       13.39       25.59</span>
<span id="cb41-134"><a href="#cb41-134" aria-hidden="true" tabindex="-1"></a>         81 |         35       13.78       39.37</span>
<span id="cb41-135"><a href="#cb41-135" aria-hidden="true" tabindex="-1"></a>         82 |         35       13.78       53.15</span>
<span id="cb41-136"><a href="#cb41-136" aria-hidden="true" tabindex="-1"></a>         83 |         36       14.17       67.32</span>
<span id="cb41-137"><a href="#cb41-137" aria-hidden="true" tabindex="-1"></a>         84 |         40       15.75       83.07</span>
<span id="cb41-138"><a href="#cb41-138" aria-hidden="true" tabindex="-1"></a>         85 |         43       16.93      100.00</span>
<span id="cb41-139"><a href="#cb41-139" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb41-140"><a href="#cb41-140" aria-hidden="true" tabindex="-1"></a>      Total |        254      100.00</span>
<span id="cb41-141"><a href="#cb41-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-142"><a href="#cb41-142" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-143"><a href="#cb41-143" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd2=yd2</span>
<span id="cb41-144"><a href="#cb41-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-145"><a href="#cb41-145" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd2=yd2</span>
<span id="cb41-146"><a href="#cb41-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-147"><a href="#cb41-147" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd2=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb41-148"><a href="#cb41-148" aria-hidden="true" tabindex="-1"></a>(8 <span class="fu">real</span> changes made)</span>
<span id="cb41-149"><a href="#cb41-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-150"><a href="#cb41-150" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd2=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb41-151"><a href="#cb41-151" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb41-152"><a href="#cb41-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-153"><a href="#cb41-153" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-154"><a href="#cb41-154" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd3=yd3</span>
<span id="cb41-155"><a href="#cb41-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-156"><a href="#cb41-156" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd3=yd3</span>
<span id="cb41-157"><a href="#cb41-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-158"><a href="#cb41-158" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd3=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb41-159"><a href="#cb41-159" aria-hidden="true" tabindex="-1"></a>(9 <span class="fu">real</span> changes made)</span>
<span id="cb41-160"><a href="#cb41-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-161"><a href="#cb41-161" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd3=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb41-162"><a href="#cb41-162" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb41-163"><a href="#cb41-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-164"><a href="#cb41-164" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-165"><a href="#cb41-165" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd4=yd4</span>
<span id="cb41-166"><a href="#cb41-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-167"><a href="#cb41-167" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd4=yd4</span>
<span id="cb41-168"><a href="#cb41-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-169"><a href="#cb41-169" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd4=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb41-170"><a href="#cb41-170" aria-hidden="true" tabindex="-1"></a>(9 <span class="fu">real</span> changes made)</span>
<span id="cb41-171"><a href="#cb41-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-172"><a href="#cb41-172" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd4=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb41-173"><a href="#cb41-173" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb41-174"><a href="#cb41-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-175"><a href="#cb41-175" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-176"><a href="#cb41-176" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd5=yd5</span>
<span id="cb41-177"><a href="#cb41-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-178"><a href="#cb41-178" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd5=yd5</span>
<span id="cb41-179"><a href="#cb41-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-180"><a href="#cb41-180" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd5=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb41-181"><a href="#cb41-181" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb41-182"><a href="#cb41-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-183"><a href="#cb41-183" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd5=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb41-184"><a href="#cb41-184" aria-hidden="true" tabindex="-1"></a>(29 <span class="fu">real</span> changes made)</span>
<span id="cb41-185"><a href="#cb41-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-186"><a href="#cb41-186" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-187"><a href="#cb41-187" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd6=yd6</span>
<span id="cb41-188"><a href="#cb41-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-189"><a href="#cb41-189" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd6=yd6</span>
<span id="cb41-190"><a href="#cb41-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-191"><a href="#cb41-191" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd6=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb41-192"><a href="#cb41-192" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb41-193"><a href="#cb41-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-194"><a href="#cb41-194" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd6=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb41-195"><a href="#cb41-195" aria-hidden="true" tabindex="-1"></a>(33 <span class="fu">real</span> changes made)</span>
<span id="cb41-196"><a href="#cb41-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-197"><a href="#cb41-197" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-198"><a href="#cb41-198" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd7=yd7</span>
<span id="cb41-199"><a href="#cb41-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-200"><a href="#cb41-200" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd7=yd7</span>
<span id="cb41-201"><a href="#cb41-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-202"><a href="#cb41-202" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd7=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb41-203"><a href="#cb41-203" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb41-204"><a href="#cb41-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-205"><a href="#cb41-205" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd7=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb41-206"><a href="#cb41-206" aria-hidden="true" tabindex="-1"></a>(36 <span class="fu">real</span> changes made)</span>
<span id="cb41-207"><a href="#cb41-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-208"><a href="#cb41-208" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-209"><a href="#cb41-209" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlct_1</span>
<span id="cb41-210"><a href="#cb41-210" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb41-211"><a href="#cb41-211" aria-hidden="true" tabindex="-1"></a>  2. <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb41-212"><a href="#cb41-212" aria-hidden="true" tabindex="-1"></a>  3. <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2</span></span>
<span id="cb41-213"><a href="#cb41-213" aria-hidden="true" tabindex="-1"></a><span class="st">&gt;  d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb41-214"><a href="#cb41-214" aria-hidden="true" tabindex="-1"></a>  4. <span class="kw">global</span> a3=1</span>
<span id="cb41-215"><a href="#cb41-215" aria-hidden="true" tabindex="-1"></a>  5. <span class="kw">global</span> a4=1</span>
<span id="cb41-216"><a href="#cb41-216" aria-hidden="true" tabindex="-1"></a>  6. <span class="kw">global</span> a5=1</span>
<span id="cb41-217"><a href="#cb41-217" aria-hidden="true" tabindex="-1"></a>  7. <span class="kw">global</span> a6=1</span>
<span id="cb41-218"><a href="#cb41-218" aria-hidden="true" tabindex="-1"></a>  8. <span class="kw">global</span> a7=1</span>
<span id="cb41-219"><a href="#cb41-219" aria-hidden="true" tabindex="-1"></a>  9. <span class="kw">global</span> b2=.1</span>
<span id="cb41-220"><a href="#cb41-220" aria-hidden="true" tabindex="-1"></a> 10. <span class="kw">global</span> b3=.1</span>
<span id="cb41-221"><a href="#cb41-221" aria-hidden="true" tabindex="-1"></a> 11. <span class="kw">global</span> b4=.1</span>
<span id="cb41-222"><a href="#cb41-222" aria-hidden="true" tabindex="-1"></a> 12. <span class="kw">global</span> b5=.1</span>
<span id="cb41-223"><a href="#cb41-223" aria-hidden="true" tabindex="-1"></a> 13. <span class="kw">global</span> b6=.1</span>
<span id="cb41-224"><a href="#cb41-224" aria-hidden="true" tabindex="-1"></a> 14. <span class="kw">global</span> b7=.1</span>
<span id="cb41-225"><a href="#cb41-225" aria-hidden="true" tabindex="-1"></a> 15. <span class="kw">global</span> c1=.1</span>
<span id="cb41-226"><a href="#cb41-226" aria-hidden="true" tabindex="-1"></a> 16. <span class="kw">global</span> c2=.1</span>
<span id="cb41-227"><a href="#cb41-227" aria-hidden="true" tabindex="-1"></a> 17. <span class="kw">global</span> c3=.1</span>
<span id="cb41-228"><a href="#cb41-228" aria-hidden="true" tabindex="-1"></a> 18. <span class="kw">global</span> c4=.1</span>
<span id="cb41-229"><a href="#cb41-229" aria-hidden="true" tabindex="-1"></a> 19. <span class="kw">global</span> c5=.1</span>
<span id="cb41-230"><a href="#cb41-230" aria-hidden="true" tabindex="-1"></a> 20. <span class="kw">global</span> c6=.1</span>
<span id="cb41-231"><a href="#cb41-231" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">global</span> c7=.1</span>
<span id="cb41-232"><a href="#cb41-232" aria-hidden="true" tabindex="-1"></a> 22. <span class="kw">global</span> c8=.1</span>
<span id="cb41-233"><a href="#cb41-233" aria-hidden="true" tabindex="-1"></a> 23. <span class="kw">global</span> c9=.1</span>
<span id="cb41-234"><a href="#cb41-234" aria-hidden="true" tabindex="-1"></a> 24. <span class="kw">global</span> d1=.1</span>
<span id="cb41-235"><a href="#cb41-235" aria-hidden="true" tabindex="-1"></a> 25. <span class="kw">global</span> d2=.1</span>
<span id="cb41-236"><a href="#cb41-236" aria-hidden="true" tabindex="-1"></a> 26. <span class="kw">global</span> d3=.1</span>
<span id="cb41-237"><a href="#cb41-237" aria-hidden="true" tabindex="-1"></a> 27. <span class="kw">global</span> d4=.1</span>
<span id="cb41-238"><a href="#cb41-238" aria-hidden="true" tabindex="-1"></a> 28. <span class="kw">global</span> d5=.1</span>
<span id="cb41-239"><a href="#cb41-239" aria-hidden="true" tabindex="-1"></a> 29. <span class="kw">global</span> d6=.1</span>
<span id="cb41-240"><a href="#cb41-240" aria-hidden="true" tabindex="-1"></a> 30. <span class="kw">global</span> d7=.1</span>
<span id="cb41-241"><a href="#cb41-241" aria-hidden="true" tabindex="-1"></a> 31. <span class="kw">global</span> d8=.1</span>
<span id="cb41-242"><a href="#cb41-242" aria-hidden="true" tabindex="-1"></a> 32. <span class="kw">exit</span></span>
<span id="cb41-243"><a href="#cb41-243" aria-hidden="true" tabindex="-1"></a> 33. }</span>
<span id="cb41-244"><a href="#cb41-244" aria-hidden="true" tabindex="-1"></a> 34. </span>
<span id="cb41-245"><a href="#cb41-245" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb41-246"><a href="#cb41-246" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb41-247"><a href="#cb41-247" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb41-248"><a href="#cb41-248" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c8</span>)+<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)*tyd6</span>
<span id="cb41-249"><a href="#cb41-249" aria-hidden="true" tabindex="-1"></a>&gt; +<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb41-250"><a href="#cb41-250" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb41-251"><a href="#cb41-251" aria-hidden="true" tabindex="-1"></a> 35. </span>
<span id="cb41-252"><a href="#cb41-252" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb41-253"><a href="#cb41-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-254"><a href="#cb41-254" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-255"><a href="#cb41-255" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> ct_1 price</span>
<span id="cb41-256"><a href="#cb41-256" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 254)</span>
<span id="cb41-257"><a href="#cb41-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-258"><a href="#cb41-258" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  1.51e+10</span>
<span id="cb41-259"><a href="#cb41-259" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb41-260"><a href="#cb41-260" aria-hidden="true" tabindex="-1"></a>Iteration 24:  residual SS =  1.01e+08</span>
<span id="cb41-261"><a href="#cb41-261" aria-hidden="true" tabindex="-1"></a>Iteration 25:  residual SS =  1.01e+08</span>
<span id="cb41-262"><a href="#cb41-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-263"><a href="#cb41-263" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       254</span>
<span id="cb41-264"><a href="#cb41-264" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 28,   226) =   1210.09</span>
<span id="cb41-265"><a href="#cb41-265" aria-hidden="true" tabindex="-1"></a>       Model |  1.5069e+10    28   538194036         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb41-266"><a href="#cb41-266" aria-hidden="true" tabindex="-1"></a>    Residual |   100515047   226  444756.844         R-squared     =    0.9934</span>
<span id="cb41-267"><a href="#cb41-267" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9926</span>
<span id="cb41-268"><a href="#cb41-268" aria-hidden="true" tabindex="-1"></a>       Total |  1.5170e+10   254  59724204.9         Root MSE      =  666.9009</span>
<span id="cb41-269"><a href="#cb41-269" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     =  3994.496</span>
<span id="cb41-270"><a href="#cb41-270" aria-hidden="true" tabindex="-1"></a>(ct_1)</span>
<span id="cb41-271"><a href="#cb41-271" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb41-272"><a href="#cb41-272" aria-hidden="true" tabindex="-1"></a>       price |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb41-273"><a href="#cb41-273" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb41-274"><a href="#cb41-274" aria-hidden="true" tabindex="-1"></a>          a3 |   254.0918   317.1045     0.80   0.424    -370.7678    878.9513</span>
<span id="cb41-275"><a href="#cb41-275" aria-hidden="true" tabindex="-1"></a>          a4 |   505.1058   325.6388     1.55   0.122    -136.5708    1146.782</span>
<span id="cb41-276"><a href="#cb41-276" aria-hidden="true" tabindex="-1"></a>          a5 |   708.9466   317.3172     2.23   0.026       83.668    1334.225</span>
<span id="cb41-277"><a href="#cb41-277" aria-hidden="true" tabindex="-1"></a>          a6 |   1082.054   322.4415     3.36   0.001     446.6773     1717.43</span>
<span id="cb41-278"><a href="#cb41-278" aria-hidden="true" tabindex="-1"></a>          a7 |   1063.014   373.9703     2.84   0.005     326.0995    1799.929</span>
<span id="cb41-279"><a href="#cb41-279" aria-hidden="true" tabindex="-1"></a>          b2 |   .0040633   .0329008     0.12   0.902    -.0607683    .0688948</span>
<span id="cb41-280"><a href="#cb41-280" aria-hidden="true" tabindex="-1"></a>          b3 |   .0756038    .049061     1.54   0.125    -.0210716    .1722792</span>
<span id="cb41-281"><a href="#cb41-281" aria-hidden="true" tabindex="-1"></a>          b4 |   .0828575   .0490467     1.69   0.093    -.0137897    .1795048</span>
<span id="cb41-282"><a href="#cb41-282" aria-hidden="true" tabindex="-1"></a>          b5 |   .0327776    .050707     0.65   0.519    -.0671415    .1326967</span>
<span id="cb41-283"><a href="#cb41-283" aria-hidden="true" tabindex="-1"></a>          b6 |   .0351224   .0514768     0.68   0.496    -.0663135    .1365582</span>
<span id="cb41-284"><a href="#cb41-284" aria-hidden="true" tabindex="-1"></a>          b7 |   .0825554   .0557608     1.48   0.140    -.0273221    .1924329</span>
<span id="cb41-285"><a href="#cb41-285" aria-hidden="true" tabindex="-1"></a>          c1 |   .0326037   .1117298     0.29   0.771    -.1875618    .2527691</span>
<span id="cb41-286"><a href="#cb41-286" aria-hidden="true" tabindex="-1"></a>          c2 |    .385946   .1204171     3.21   0.002     .1486621    .6232299</span>
<span id="cb41-287"><a href="#cb41-287" aria-hidden="true" tabindex="-1"></a>          c3 |  -.1929238   .0568197    -3.40   0.001     -.304888   -.0809596</span>
<span id="cb41-288"><a href="#cb41-288" aria-hidden="true" tabindex="-1"></a>          c4 |    .715212   .0736084     9.72   0.000     .5701655    .8602585</span>
<span id="cb41-289"><a href="#cb41-289" aria-hidden="true" tabindex="-1"></a>          c5 |   .1578585     .03381     4.67   0.000     .0912354    .2244816</span>
<span id="cb41-290"><a href="#cb41-290" aria-hidden="true" tabindex="-1"></a>          c6 |   .0641097   .0247061     2.59   0.010     .0154259    .1127934</span>
<span id="cb41-291"><a href="#cb41-291" aria-hidden="true" tabindex="-1"></a>          c7 |   .1829447   .0242773     7.54   0.000     .1351059    .2307836</span>
<span id="cb41-292"><a href="#cb41-292" aria-hidden="true" tabindex="-1"></a>          c8 |   6.599831   .7305317     9.03   0.000     5.160306    8.039356</span>
<span id="cb41-293"><a href="#cb41-293" aria-hidden="true" tabindex="-1"></a>          c9 |   .1171992   .0634238     1.85   0.066    -.0077785    .2421769</span>
<span id="cb41-294"><a href="#cb41-294" aria-hidden="true" tabindex="-1"></a>          d1 |   .4917133   .0795807     6.18   0.000     .3348983    .6485283</span>
<span id="cb41-295"><a href="#cb41-295" aria-hidden="true" tabindex="-1"></a>          d2 |   .2622177   .1757206     1.49   0.137    -.0840426    .6084779</span>
<span id="cb41-296"><a href="#cb41-296" aria-hidden="true" tabindex="-1"></a>          d3 |  -.0451278   .0677055    -0.67   0.506    -.1785426     .088287</span>
<span id="cb41-297"><a href="#cb41-297" aria-hidden="true" tabindex="-1"></a>          d4 |   .3030767   .1701249     1.78   0.076    -.0321571    .6383106</span>
<span id="cb41-298"><a href="#cb41-298" aria-hidden="true" tabindex="-1"></a>          d5 |   .0397822   .0362731     1.10   0.274    -.0316947     .111259</span>
<span id="cb41-299"><a href="#cb41-299" aria-hidden="true" tabindex="-1"></a>          d6 |   .0967659   .0501832     1.93   0.055    -.0021208    .1956526</span>
<span id="cb41-300"><a href="#cb41-300" aria-hidden="true" tabindex="-1"></a>          d7 |   .3052359   .0715711     4.26   0.000     .1642038     .446268</span>
<span id="cb41-301"><a href="#cb41-301" aria-hidden="true" tabindex="-1"></a>          d8 |   6.299805   .9622249     6.55   0.000     4.403726    8.195885</span>
<span id="cb41-302"><a href="#cb41-302" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb41-303"><a href="#cb41-303" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb41-304"><a href="#cb41-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-305"><a href="#cb41-305" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-306"><a href="#cb41-306" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*cyd2+_b[b3]*cyd3+_b[b4]*cyd4+_b[b5]*cyd5+_b[b6]*cyd6+_b[b7</span>
<span id="cb41-307"><a href="#cb41-307" aria-hidden="true" tabindex="-1"></a>&gt; ]*cyd7<span class="co">/*</span></span>
<span id="cb41-308"><a href="#cb41-308" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*hp_c+_b[c5]*tran_c+_b[c6]*ps</span>
<span id="cb41-309"><a href="#cb41-309" aria-hidden="true" tabindex="-1"></a>&gt; _c<span class="co">/*</span></span>
<span id="cb41-310"><a href="#cb41-310" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c7]*ac_c+_b[c8])</span>
<span id="cb41-311"><a href="#cb41-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-312"><a href="#cb41-312" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-313"><a href="#cb41-313" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> winv=1/<span class="fu">exp</span>((_b[b2]+0.16)*tyd2+(_b[b3]+.16)*tyd3+(_b[b4]+.16)*tyd4<span class="co">/*</span></span>
<span id="cb41-314"><a href="#cb41-314" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+(_b[b5]+.16)*tyd5+(_b[b6]+.16)*tyd6+_b[c9]*tyd7<span class="co">/*</span></span>
<span id="cb41-315"><a href="#cb41-315" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*hp_t<span class="co">/*</span></span>
<span id="cb41-316"><a href="#cb41-316" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t+_b[d8]) <span class="kw">if</span> ve==2</span>
<span id="cb41-317"><a href="#cb41-317" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb41-318"><a href="#cb41-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-319"><a href="#cb41-319" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-320"><a href="#cb41-320" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nprice=price*winv</span>
<span id="cb41-321"><a href="#cb41-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-322"><a href="#cb41-322" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-323"><a href="#cb41-323" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-324"><a href="#cb41-324" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlct_2</span>
<span id="cb41-325"><a href="#cb41-325" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb41-326"><a href="#cb41-326" aria-hidden="true" tabindex="-1"></a>  2. <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb41-327"><a href="#cb41-327" aria-hidden="true" tabindex="-1"></a>  3. <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2</span></span>
<span id="cb41-328"><a href="#cb41-328" aria-hidden="true" tabindex="-1"></a><span class="st">&gt;  d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb41-329"><a href="#cb41-329" aria-hidden="true" tabindex="-1"></a>  4. <span class="kw">global</span> a3=1</span>
<span id="cb41-330"><a href="#cb41-330" aria-hidden="true" tabindex="-1"></a>  5. <span class="kw">global</span> a4=1</span>
<span id="cb41-331"><a href="#cb41-331" aria-hidden="true" tabindex="-1"></a>  6. <span class="kw">global</span> a5=1</span>
<span id="cb41-332"><a href="#cb41-332" aria-hidden="true" tabindex="-1"></a>  7. <span class="kw">global</span> a6=1</span>
<span id="cb41-333"><a href="#cb41-333" aria-hidden="true" tabindex="-1"></a>  8. <span class="kw">global</span> a7=1</span>
<span id="cb41-334"><a href="#cb41-334" aria-hidden="true" tabindex="-1"></a>  9. <span class="kw">global</span> b2=.1</span>
<span id="cb41-335"><a href="#cb41-335" aria-hidden="true" tabindex="-1"></a> 10. <span class="kw">global</span> b3=.1</span>
<span id="cb41-336"><a href="#cb41-336" aria-hidden="true" tabindex="-1"></a> 11. <span class="kw">global</span> b4=.1</span>
<span id="cb41-337"><a href="#cb41-337" aria-hidden="true" tabindex="-1"></a> 12. <span class="kw">global</span> b5=.1</span>
<span id="cb41-338"><a href="#cb41-338" aria-hidden="true" tabindex="-1"></a> 13. <span class="kw">global</span> b6=.1</span>
<span id="cb41-339"><a href="#cb41-339" aria-hidden="true" tabindex="-1"></a> 14. <span class="kw">global</span> b7=.1</span>
<span id="cb41-340"><a href="#cb41-340" aria-hidden="true" tabindex="-1"></a> 15. <span class="kw">global</span> c1=.1</span>
<span id="cb41-341"><a href="#cb41-341" aria-hidden="true" tabindex="-1"></a> 16. <span class="kw">global</span> c2=.1</span>
<span id="cb41-342"><a href="#cb41-342" aria-hidden="true" tabindex="-1"></a> 17. <span class="kw">global</span> c3=.1</span>
<span id="cb41-343"><a href="#cb41-343" aria-hidden="true" tabindex="-1"></a> 18. <span class="kw">global</span> c4=.1</span>
<span id="cb41-344"><a href="#cb41-344" aria-hidden="true" tabindex="-1"></a> 19. <span class="kw">global</span> c5=.1</span>
<span id="cb41-345"><a href="#cb41-345" aria-hidden="true" tabindex="-1"></a> 20. <span class="kw">global</span> c6=.1</span>
<span id="cb41-346"><a href="#cb41-346" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">global</span> c7=.1</span>
<span id="cb41-347"><a href="#cb41-347" aria-hidden="true" tabindex="-1"></a> 22. <span class="kw">global</span> c8=.1</span>
<span id="cb41-348"><a href="#cb41-348" aria-hidden="true" tabindex="-1"></a> 23. <span class="kw">global</span> c9=.1</span>
<span id="cb41-349"><a href="#cb41-349" aria-hidden="true" tabindex="-1"></a> 24. <span class="kw">global</span> d1=.1</span>
<span id="cb41-350"><a href="#cb41-350" aria-hidden="true" tabindex="-1"></a> 25. <span class="kw">global</span> d2=.1</span>
<span id="cb41-351"><a href="#cb41-351" aria-hidden="true" tabindex="-1"></a> 26. <span class="kw">global</span> d3=.1</span>
<span id="cb41-352"><a href="#cb41-352" aria-hidden="true" tabindex="-1"></a> 27. <span class="kw">global</span> d4=.1</span>
<span id="cb41-353"><a href="#cb41-353" aria-hidden="true" tabindex="-1"></a> 28. <span class="kw">global</span> d5=.1</span>
<span id="cb41-354"><a href="#cb41-354" aria-hidden="true" tabindex="-1"></a> 29. <span class="kw">global</span> d6=.1</span>
<span id="cb41-355"><a href="#cb41-355" aria-hidden="true" tabindex="-1"></a> 30. <span class="kw">global</span> d7=.1</span>
<span id="cb41-356"><a href="#cb41-356" aria-hidden="true" tabindex="-1"></a> 31. <span class="kw">global</span> d8=.1</span>
<span id="cb41-357"><a href="#cb41-357" aria-hidden="true" tabindex="-1"></a> 32. <span class="kw">exit</span></span>
<span id="cb41-358"><a href="#cb41-358" aria-hidden="true" tabindex="-1"></a> 33. }</span>
<span id="cb41-359"><a href="#cb41-359" aria-hidden="true" tabindex="-1"></a> 34. <span class="kw">replace</span> <span class="ot">`1'</span>=winv*(<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7)<span class="co">/*</span></span>
<span id="cb41-360"><a href="#cb41-360" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb41-361"><a href="#cb41-361" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb41-362"><a href="#cb41-362" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c8</span>)+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)</span>
<span id="cb41-363"><a href="#cb41-363" aria-hidden="true" tabindex="-1"></a>&gt; *tyd6+<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb41-364"><a href="#cb41-364" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb41-365"><a href="#cb41-365" aria-hidden="true" tabindex="-1"></a> 35. </span>
<span id="cb41-366"><a href="#cb41-366" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb41-367"><a href="#cb41-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-368"><a href="#cb41-368" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-369"><a href="#cb41-369" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> ct_2 nprice</span>
<span id="cb41-370"><a href="#cb41-370" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 254)</span>
<span id="cb41-371"><a href="#cb41-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-372"><a href="#cb41-372" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  353.5865</span>
<span id="cb41-373"><a href="#cb41-373" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb41-374"><a href="#cb41-374" aria-hidden="true" tabindex="-1"></a>Iteration 20:  residual SS =  2.957295</span>
<span id="cb41-375"><a href="#cb41-375" aria-hidden="true" tabindex="-1"></a>Iteration 21:  residual SS =  2.957295</span>
<span id="cb41-376"><a href="#cb41-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-377"><a href="#cb41-377" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       254</span>
<span id="cb41-378"><a href="#cb41-378" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 28,   226) =    958.75</span>
<span id="cb41-379"><a href="#cb41-379" aria-hidden="true" tabindex="-1"></a>       Model |  351.277591    28  12.5456282         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb41-380"><a href="#cb41-380" aria-hidden="true" tabindex="-1"></a>    Residual |  2.95729549   226  .013085378         R-squared     =    0.9917</span>
<span id="cb41-381"><a href="#cb41-381" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9906</span>
<span id="cb41-382"><a href="#cb41-382" aria-hidden="true" tabindex="-1"></a>       Total |  354.234886   254  1.39462554         Root MSE      =  .1143913</span>
<span id="cb41-383"><a href="#cb41-383" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     = -410.2562</span>
<span id="cb41-384"><a href="#cb41-384" aria-hidden="true" tabindex="-1"></a>(ct_2)</span>
<span id="cb41-385"><a href="#cb41-385" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb41-386"><a href="#cb41-386" aria-hidden="true" tabindex="-1"></a>      nprice |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb41-387"><a href="#cb41-387" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb41-388"><a href="#cb41-388" aria-hidden="true" tabindex="-1"></a>          a3 |   367.9829    239.059     1.54   0.125    -103.0867    839.0525</span>
<span id="cb41-389"><a href="#cb41-389" aria-hidden="true" tabindex="-1"></a>          a4 |    600.553   254.2261     2.36   0.019     99.59628     1101.51</span>
<span id="cb41-390"><a href="#cb41-390" aria-hidden="true" tabindex="-1"></a>          a5 |   887.9399   243.5428     3.65   0.000     408.0348    1367.845</span>
<span id="cb41-391"><a href="#cb41-391" aria-hidden="true" tabindex="-1"></a>          a6 |   1104.433   251.0245     4.40   0.000     609.7847     1599.08</span>
<span id="cb41-392"><a href="#cb41-392" aria-hidden="true" tabindex="-1"></a>          a7 |   855.7993   366.2444     2.34   0.020     134.1088     1577.49</span>
<span id="cb41-393"><a href="#cb41-393" aria-hidden="true" tabindex="-1"></a>          b2 |   .0130387   .0303131     0.43   0.668    -.0466937    .0727711</span>
<span id="cb41-394"><a href="#cb41-394" aria-hidden="true" tabindex="-1"></a>          b3 |   .0674477   .0425176     1.59   0.114     -.016334    .1512294</span>
<span id="cb41-395"><a href="#cb41-395" aria-hidden="true" tabindex="-1"></a>          b4 |   .0701234   .0441821     1.59   0.114    -.0169382     .157185</span>
<span id="cb41-396"><a href="#cb41-396" aria-hidden="true" tabindex="-1"></a>          b5 |  -.0005627   .0470779    -0.01   0.990    -.0933305    .0922051</span>
<span id="cb41-397"><a href="#cb41-397" aria-hidden="true" tabindex="-1"></a>          b6 |   .0179989   .0473905     0.38   0.704    -.0753848    .1113826</span>
<span id="cb41-398"><a href="#cb41-398" aria-hidden="true" tabindex="-1"></a>          b7 |   .1007712   .0641587     1.57   0.118    -.0256545    .2271969</span>
<span id="cb41-399"><a href="#cb41-399" aria-hidden="true" tabindex="-1"></a>          c1 |   .0492474   .1311096     0.38   0.708    -.2091061     .307601</span>
<span id="cb41-400"><a href="#cb41-400" aria-hidden="true" tabindex="-1"></a>          c2 |   .3908689   .1383663     2.82   0.005     .1182159     .663522</span>
<span id="cb41-401"><a href="#cb41-401" aria-hidden="true" tabindex="-1"></a>          c3 |  -.0618204   .0611492    -1.01   0.313    -.1823158     .058675</span>
<span id="cb41-402"><a href="#cb41-402" aria-hidden="true" tabindex="-1"></a>          c4 |   .8103277   .1038045     7.81   0.000     .6057792    1.014876</span>
<span id="cb41-403"><a href="#cb41-403" aria-hidden="true" tabindex="-1"></a>          c5 |   .1779391   .0355273     5.01   0.000     .1079319    .2479463</span>
<span id="cb41-404"><a href="#cb41-404" aria-hidden="true" tabindex="-1"></a>          c6 |   .0693687   .0304968     2.27   0.024     .0092743     .129463</span>
<span id="cb41-405"><a href="#cb41-405" aria-hidden="true" tabindex="-1"></a>          c7 |   .1567051   .0360384     4.35   0.000     .0856908    .2277193</span>
<span id="cb41-406"><a href="#cb41-406" aria-hidden="true" tabindex="-1"></a>          c8 |   5.839036   .8621144     6.77   0.000     4.140226    7.537847</span>
<span id="cb41-407"><a href="#cb41-407" aria-hidden="true" tabindex="-1"></a>          c9 |   .1059852   .0550545     1.93   0.055    -.0025007    .2144711</span>
<span id="cb41-408"><a href="#cb41-408" aria-hidden="true" tabindex="-1"></a>          d1 |   .4759918   .1172145     4.06   0.000     .2450187    .7069649</span>
<span id="cb41-409"><a href="#cb41-409" aria-hidden="true" tabindex="-1"></a>          d2 |   .2120021   .1419991     1.49   0.137    -.0678094    .4918136</span>
<span id="cb41-410"><a href="#cb41-410" aria-hidden="true" tabindex="-1"></a>          d3 |  -.0270369    .074052    -0.37   0.715    -.1729575    .1188837</span>
<span id="cb41-411"><a href="#cb41-411" aria-hidden="true" tabindex="-1"></a>          d4 |     .24435   .1516866     1.61   0.109    -.0545508    .5432508</span>
<span id="cb41-412"><a href="#cb41-412" aria-hidden="true" tabindex="-1"></a>          d5 |   .0530065   .0356148     1.49   0.138     -.017173     .123186</span>
<span id="cb41-413"><a href="#cb41-413" aria-hidden="true" tabindex="-1"></a>          d6 |   .0575178   .0639555     0.90   0.369    -.0685076    .1835431</span>
<span id="cb41-414"><a href="#cb41-414" aria-hidden="true" tabindex="-1"></a>          d7 |   .2971909   .0566882     5.24   0.000      .185486    .4088959</span>
<span id="cb41-415"><a href="#cb41-415" aria-hidden="true" tabindex="-1"></a>          d8 |   6.630805   .7652819     8.66   0.000     5.122804    8.138805</span>
<span id="cb41-416"><a href="#cb41-416" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb41-417"><a href="#cb41-417" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb41-418"><a href="#cb41-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-419"><a href="#cb41-419" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-420"><a href="#cb41-420" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-421"><a href="#cb41-421" aria-hidden="true" tabindex="-1"></a>. <span class="kw">preserve</span></span>
<span id="cb41-422"><a href="#cb41-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-423"><a href="#cb41-423" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> ve==1</span>
<span id="cb41-424"><a href="#cb41-424" aria-hidden="true" tabindex="-1"></a>(75 observations deleted)</span>
<span id="cb41-425"><a href="#cb41-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-426"><a href="#cb41-426" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-427"><a href="#cb41-427" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> quality=<span class="fu">exp</span>(_b[c8]+_b[b2]+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*<span class="kw">h</span></span>
<span id="cb41-428"><a href="#cb41-428" aria-hidden="true" tabindex="-1"></a>&gt; p_c<span class="co">/*</span></span>
<span id="cb41-429"><a href="#cb41-429" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c5]*tran_c+_b[c6]*ps_c+_b[c7]*ac_c)</span>
<span id="cb41-430"><a href="#cb41-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-431"><a href="#cb41-431" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-432"><a href="#cb41-432" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="fu">q</span></span>
<span id="cb41-433"><a href="#cb41-433" aria-hidden="true" tabindex="-1"></a>&gt; uality_c,<span class="kw">replace</span></span>
<span id="cb41-434"><a href="#cb41-434" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\qua</span>
<span id="cb41-435"><a href="#cb41-435" aria-hidden="true" tabindex="-1"></a>&gt; lity_c.dta saved</span>
<span id="cb41-436"><a href="#cb41-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-437"><a href="#cb41-437" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-438"><a href="#cb41-438" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nvalue=quality*quan_c</span>
<span id="cb41-439"><a href="#cb41-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-440"><a href="#cb41-440" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan_c), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb41-441"><a href="#cb41-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-442"><a href="#cb41-442" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> anvalue=<span class="kw">mean</span>(nvalue),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb41-443"><a href="#cb41-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-444"><a href="#cb41-444" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> uquality=anvalue/aquan</span>
<span id="cb41-445"><a href="#cb41-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-446"><a href="#cb41-446" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>)uquality, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb41-447"><a href="#cb41-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-448"><a href="#cb41-448" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb41-449"><a href="#cb41-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-450"><a href="#cb41-450" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb41-451"><a href="#cb41-451" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>   uquality |</span>
<span id="cb41-452"><a href="#cb41-452" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb41-453"><a href="#cb41-453" aria-hidden="true" tabindex="-1"></a>  1. |   79   4360.772 |</span>
<span id="cb41-454"><a href="#cb41-454" aria-hidden="true" tabindex="-1"></a>  2. |   80   4472.789 |</span>
<span id="cb41-455"><a href="#cb41-455" aria-hidden="true" tabindex="-1"></a>  3. |   81   4867.316 |</span>
<span id="cb41-456"><a href="#cb41-456" aria-hidden="true" tabindex="-1"></a>  4. |   82   5252.845 |</span>
<span id="cb41-457"><a href="#cb41-457" aria-hidden="true" tabindex="-1"></a>  5. |   83   5636.667 |</span>
<span id="cb41-458"><a href="#cb41-458" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb41-459"><a href="#cb41-459" aria-hidden="true" tabindex="-1"></a>  6. |   84    5862.13 |</span>
<span id="cb41-460"><a href="#cb41-460" aria-hidden="true" tabindex="-1"></a>  7. |   85   6130.052 |</span>
<span id="cb41-461"><a href="#cb41-461" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb41-462"><a href="#cb41-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-463"><a href="#cb41-463" aria-hidden="true" tabindex="-1"></a>. <span class="kw">restore</span></span>
<span id="cb41-464"><a href="#cb41-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-465"><a href="#cb41-465" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-466"><a href="#cb41-466" aria-hidden="true" tabindex="-1"></a>. <span class="kw">preserve</span></span>
<span id="cb41-467"><a href="#cb41-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-468"><a href="#cb41-468" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> ve==2</span>
<span id="cb41-469"><a href="#cb41-469" aria-hidden="true" tabindex="-1"></a>(179 observations deleted)</span>
<span id="cb41-470"><a href="#cb41-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-471"><a href="#cb41-471" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-472"><a href="#cb41-472" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> quality=<span class="fu">exp</span>(_b[d8]+_b[b2]+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*<span class="kw">h</span></span>
<span id="cb41-473"><a href="#cb41-473" aria-hidden="true" tabindex="-1"></a>&gt; p_t<span class="co">/*</span></span>
<span id="cb41-474"><a href="#cb41-474" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t)</span>
<span id="cb41-475"><a href="#cb41-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-476"><a href="#cb41-476" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-477"><a href="#cb41-477" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="fu">q</span></span>
<span id="cb41-478"><a href="#cb41-478" aria-hidden="true" tabindex="-1"></a>&gt; uality_t,<span class="kw">replace</span></span>
<span id="cb41-479"><a href="#cb41-479" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\qua</span>
<span id="cb41-480"><a href="#cb41-480" aria-hidden="true" tabindex="-1"></a>&gt; lity_t.dta saved</span>
<span id="cb41-481"><a href="#cb41-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-482"><a href="#cb41-482" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-483"><a href="#cb41-483" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nvalue=quality*quan_t</span>
<span id="cb41-484"><a href="#cb41-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-485"><a href="#cb41-485" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan_t),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb41-486"><a href="#cb41-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-487"><a href="#cb41-487" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> anvalue=<span class="kw">mean</span>(nvalue), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb41-488"><a href="#cb41-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-489"><a href="#cb41-489" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> uquality=anvalue/aquan</span>
<span id="cb41-490"><a href="#cb41-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-491"><a href="#cb41-491" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>)uquality, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb41-492"><a href="#cb41-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-493"><a href="#cb41-493" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb41-494"><a href="#cb41-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-495"><a href="#cb41-495" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb41-496"><a href="#cb41-496" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>   uquality |</span>
<span id="cb41-497"><a href="#cb41-497" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb41-498"><a href="#cb41-498" aria-hidden="true" tabindex="-1"></a>  1. |   79   4626.836 |</span>
<span id="cb41-499"><a href="#cb41-499" aria-hidden="true" tabindex="-1"></a>  2. |   80   4637.583 |</span>
<span id="cb41-500"><a href="#cb41-500" aria-hidden="true" tabindex="-1"></a>  3. |   81   4791.255 |</span>
<span id="cb41-501"><a href="#cb41-501" aria-hidden="true" tabindex="-1"></a>  4. |   82   4929.792 |</span>
<span id="cb41-502"><a href="#cb41-502" aria-hidden="true" tabindex="-1"></a>  5. |   83   4997.103 |</span>
<span id="cb41-503"><a href="#cb41-503" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb41-504"><a href="#cb41-504" aria-hidden="true" tabindex="-1"></a>  6. |   84   5009.971 |</span>
<span id="cb41-505"><a href="#cb41-505" aria-hidden="true" tabindex="-1"></a>  7. |   85   5432.772 |</span>
<span id="cb41-506"><a href="#cb41-506" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb41-507"><a href="#cb41-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-508"><a href="#cb41-508" aria-hidden="true" tabindex="-1"></a>. <span class="kw">restore</span></span>
<span id="cb41-509"><a href="#cb41-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-510"><a href="#cb41-510" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb41-511"><a href="#cb41-511" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb41-512"><a href="#cb41-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-513"><a href="#cb41-513" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb41-514"><a href="#cb41-514" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb41-515"><a href="#cb41-515" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb41-516"><a href="#cb41-516" aria-hidden="true" tabindex="-1"></a>&gt; er-8\unit_quality.<span class="fu">log</span></span>
<span id="cb41-517"><a href="#cb41-517" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb41-518"><a href="#cb41-518" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 23:03:38</span>
<span id="cb41-519"><a href="#cb41-519" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb41-520"><a href="#cb41-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-521"><a href="#cb41-521" aria-hidden="true" tabindex="-1"></a>. <span class="kw">exit</span></span>
<span id="cb41-522"><a href="#cb41-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-523"><a href="#cb41-523" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="qindex_c.do" class="level4">
<h4 class="anchored" data-anchor-id="qindex_c.do">qindex_c.do</h4>
<div class="sourceCode" id="cb42"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\qindex_c.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\quality_c,<span class="kw">clear</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="fu">year</span> <span class="kw">model</span> <span class="dv">type</span> quality quan_c</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ren</span> quan_c quan</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="kw">preserve</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span>==80</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">model</span> <span class="dv">type</span> quality quan</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a><span class="kw">ren</span> quality quality_80</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a><span class="kw">ren</span> quan quan_80</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\quality_80_c,<span class="kw">replace</span></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a><span class="kw">restore</span></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a><span class="kw">merge</span> <span class="kw">model</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\quality_80_c</span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> <span class="dt">_merge</span>==3</span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="dt">_merge</span></span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="fu">year</span> <span class="kw">model</span></span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_80=<span class="kw">sum</span>(quality_80*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_cp=<span class="kw">sum</span>(quality*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> lasp=value_cp/value_80</span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_c=<span class="kw">sum</span>(quality*quan),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_cq=<span class="kw">sum</span>(quality_80*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> pasp=value_c/value_cq</span>
<span id="cb42-31"><a href="#cb42-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-32"><a href="#cb42-32" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> qindex=(lasp*pasp)^0.5</span>
<span id="cb42-33"><a href="#cb42-33" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>) qindex, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb42-34"><a href="#cb42-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-35"><a href="#cb42-35" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span></span>
<span id="cb42-36"><a href="#cb42-36" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\qindex_c.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\qindex_c.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>&gt; er-8\qindex_c.<span class="fu">log</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 23:06:51</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\qu</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>&gt; ality_c,<span class="kw">clear</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="fu">year</span> <span class="kw">model</span> <span class="dv">type</span> quality quan_c</span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quan_c quan</span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>. <span class="kw">preserve</span></span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span>==80</span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>(155 observations deleted)</span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">model</span> <span class="dv">type</span> quality quan</span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quality quality_80</span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quan quan_80</span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-36"><a href="#cb43-36" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb43-37"><a href="#cb43-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-38"><a href="#cb43-38" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="fu">q</span></span>
<span id="cb43-39"><a href="#cb43-39" aria-hidden="true" tabindex="-1"></a>&gt; uality_80_c,<span class="kw">replace</span></span>
<span id="cb43-40"><a href="#cb43-40" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\qua</span>
<span id="cb43-41"><a href="#cb43-41" aria-hidden="true" tabindex="-1"></a>&gt; lity_80_c.dta saved</span>
<span id="cb43-42"><a href="#cb43-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-43"><a href="#cb43-43" aria-hidden="true" tabindex="-1"></a>. <span class="kw">restore</span></span>
<span id="cb43-44"><a href="#cb43-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-45"><a href="#cb43-45" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb43-46"><a href="#cb43-46" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb43-47"><a href="#cb43-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-48"><a href="#cb43-48" aria-hidden="true" tabindex="-1"></a>. <span class="kw">merge</span> <span class="kw">model</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-editio</span>
<span id="cb43-49"><a href="#cb43-49" aria-hidden="true" tabindex="-1"></a>&gt; n\Chapter-8\quality_80_c</span>
<span id="cb43-50"><a href="#cb43-50" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: you are <span class="kw">using</span> old <span class="kw">merge</span> <span class="kw">syntax</span>; see [R] <span class="kw">merge</span> <span class="kw">for</span> <span class="kw">new</span> <span class="kw">syntax</span>)</span>
<span id="cb43-51"><a href="#cb43-51" aria-hidden="true" tabindex="-1"></a><span class="kw">variable</span> <span class="kw">model</span> does <span class="kw">not</span> uniquely identify observations <span class="kw">in</span> the master <span class="kw">data</span></span>
<span id="cb43-52"><a href="#cb43-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-53"><a href="#cb43-53" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="dt">_merge</span>==3</span>
<span id="cb43-54"><a href="#cb43-54" aria-hidden="true" tabindex="-1"></a>(23 observations deleted)</span>
<span id="cb43-55"><a href="#cb43-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-56"><a href="#cb43-56" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="dt">_merge</span></span>
<span id="cb43-57"><a href="#cb43-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-58"><a href="#cb43-58" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb43-59"><a href="#cb43-59" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="fu">year</span> <span class="kw">model</span></span>
<span id="cb43-60"><a href="#cb43-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-61"><a href="#cb43-61" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_80=<span class="kw">sum</span>(quality_80*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb43-62"><a href="#cb43-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-63"><a href="#cb43-63" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cp=<span class="kw">sum</span>(quality*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb43-64"><a href="#cb43-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-65"><a href="#cb43-65" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> lasp=value_cp/value_80</span>
<span id="cb43-66"><a href="#cb43-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-67"><a href="#cb43-67" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb43-68"><a href="#cb43-68" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_c=<span class="kw">sum</span>(quality*quan),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb43-69"><a href="#cb43-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-70"><a href="#cb43-70" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cq=<span class="kw">sum</span>(quality_80*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb43-71"><a href="#cb43-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-72"><a href="#cb43-72" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> pasp=value_c/value_cq</span>
<span id="cb43-73"><a href="#cb43-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-74"><a href="#cb43-74" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb43-75"><a href="#cb43-75" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> qindex=(lasp*pasp)^0.5</span>
<span id="cb43-76"><a href="#cb43-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-77"><a href="#cb43-77" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>) qindex, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb43-78"><a href="#cb43-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-79"><a href="#cb43-79" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb43-80"><a href="#cb43-80" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb43-81"><a href="#cb43-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-82"><a href="#cb43-82" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb43-83"><a href="#cb43-83" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>     qindex |</span>
<span id="cb43-84"><a href="#cb43-84" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb43-85"><a href="#cb43-85" aria-hidden="true" tabindex="-1"></a>  1. |   79    .986878 |</span>
<span id="cb43-86"><a href="#cb43-86" aria-hidden="true" tabindex="-1"></a>  2. |   80          1 |</span>
<span id="cb43-87"><a href="#cb43-87" aria-hidden="true" tabindex="-1"></a>  3. |   81   1.085813 |</span>
<span id="cb43-88"><a href="#cb43-88" aria-hidden="true" tabindex="-1"></a>  4. |   82    1.15183 |</span>
<span id="cb43-89"><a href="#cb43-89" aria-hidden="true" tabindex="-1"></a>  5. |   83   1.212675 |</span>
<span id="cb43-90"><a href="#cb43-90" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb43-91"><a href="#cb43-91" aria-hidden="true" tabindex="-1"></a>  6. |   84   1.266379 |</span>
<span id="cb43-92"><a href="#cb43-92" aria-hidden="true" tabindex="-1"></a>  7. |   85   1.305744 |</span>
<span id="cb43-93"><a href="#cb43-93" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb43-94"><a href="#cb43-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-95"><a href="#cb43-95" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb43-96"><a href="#cb43-96" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb43-97"><a href="#cb43-97" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb43-98"><a href="#cb43-98" aria-hidden="true" tabindex="-1"></a>&gt; er-8\qindex_c.<span class="fu">log</span></span>
<span id="cb43-99"><a href="#cb43-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb43-100"><a href="#cb43-100" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 23:06:53</span>
<span id="cb43-101"><a href="#cb43-101" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb43-102"><a href="#cb43-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-103"><a href="#cb43-103" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb43-104"><a href="#cb43-104" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="qindex_t.do" class="level4">
<h4 class="anchored" data-anchor-id="qindex_t.do">qindex_t.do</h4>
<div class="sourceCode" id="cb44"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\qindex_t.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\qindex_t.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>&gt; er-8\qindex_t.<span class="fu">log</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 23:09:00</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\qu</span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>&gt; ality_t,<span class="kw">clear</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="fu">year</span> <span class="kw">model</span> <span class="dv">type</span> quality quan_t</span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quan_t quan</span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>. <span class="kw">preserve</span></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span>==80</span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>(65 observations deleted)</span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">model</span> <span class="dv">type</span> quality quan</span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quality quality_80</span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quan quan_80</span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="fu">q</span></span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a>&gt; uality_80_t,<span class="kw">replace</span></span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\qua</span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true" tabindex="-1"></a>&gt; lity_80_t.dta saved</span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-43"><a href="#cb44-43" aria-hidden="true" tabindex="-1"></a>. <span class="kw">restore</span></span>
<span id="cb44-44"><a href="#cb44-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-45"><a href="#cb44-45" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb44-46"><a href="#cb44-46" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb44-47"><a href="#cb44-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-48"><a href="#cb44-48" aria-hidden="true" tabindex="-1"></a>. <span class="kw">merge</span> <span class="kw">model</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-editio</span>
<span id="cb44-49"><a href="#cb44-49" aria-hidden="true" tabindex="-1"></a>&gt; n\Chapter-8\quality_80_t</span>
<span id="cb44-50"><a href="#cb44-50" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: you are <span class="kw">using</span> old <span class="kw">merge</span> <span class="kw">syntax</span>; see [R] <span class="kw">merge</span> <span class="kw">for</span> <span class="kw">new</span> <span class="kw">syntax</span>)</span>
<span id="cb44-51"><a href="#cb44-51" aria-hidden="true" tabindex="-1"></a><span class="kw">variable</span> <span class="kw">model</span> does <span class="kw">not</span> uniquely identify observations <span class="kw">in</span> the master <span class="kw">data</span></span>
<span id="cb44-52"><a href="#cb44-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-53"><a href="#cb44-53" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="dt">_merge</span>==3</span>
<span id="cb44-54"><a href="#cb44-54" aria-hidden="true" tabindex="-1"></a>(14 observations deleted)</span>
<span id="cb44-55"><a href="#cb44-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-56"><a href="#cb44-56" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="dt">_merge</span></span>
<span id="cb44-57"><a href="#cb44-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-58"><a href="#cb44-58" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb44-59"><a href="#cb44-59" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="fu">year</span> <span class="kw">model</span></span>
<span id="cb44-60"><a href="#cb44-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-61"><a href="#cb44-61" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_80=<span class="kw">sum</span>(quality_80*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb44-62"><a href="#cb44-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-63"><a href="#cb44-63" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cp=<span class="kw">sum</span>(quality*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb44-64"><a href="#cb44-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-65"><a href="#cb44-65" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> lasp=value_cp/value_80</span>
<span id="cb44-66"><a href="#cb44-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-67"><a href="#cb44-67" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb44-68"><a href="#cb44-68" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_c=<span class="kw">sum</span>(quality*quan),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb44-69"><a href="#cb44-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-70"><a href="#cb44-70" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cq=<span class="kw">sum</span>(quality_80*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb44-71"><a href="#cb44-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-72"><a href="#cb44-72" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> pasp=value_c/value_cq</span>
<span id="cb44-73"><a href="#cb44-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-74"><a href="#cb44-74" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb44-75"><a href="#cb44-75" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> qindex=(lasp*pasp)^0.5</span>
<span id="cb44-76"><a href="#cb44-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-77"><a href="#cb44-77" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>) qindex, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb44-78"><a href="#cb44-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-79"><a href="#cb44-79" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb44-80"><a href="#cb44-80" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb44-81"><a href="#cb44-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-82"><a href="#cb44-82" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb44-83"><a href="#cb44-83" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>     qindex |</span>
<span id="cb44-84"><a href="#cb44-84" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb44-85"><a href="#cb44-85" aria-hidden="true" tabindex="-1"></a>  1. |   79   .9956951 |</span>
<span id="cb44-86"><a href="#cb44-86" aria-hidden="true" tabindex="-1"></a>  2. |   80          1 |</span>
<span id="cb44-87"><a href="#cb44-87" aria-hidden="true" tabindex="-1"></a>  3. |   81   1.035043 |</span>
<span id="cb44-88"><a href="#cb44-88" aria-hidden="true" tabindex="-1"></a>  4. |   82   1.058717 |</span>
<span id="cb44-89"><a href="#cb44-89" aria-hidden="true" tabindex="-1"></a>  5. |   83   1.057227 |</span>
<span id="cb44-90"><a href="#cb44-90" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb44-91"><a href="#cb44-91" aria-hidden="true" tabindex="-1"></a>  6. |   84   1.053449 |</span>
<span id="cb44-92"><a href="#cb44-92" aria-hidden="true" tabindex="-1"></a>  7. |   85   1.160353 |</span>
<span id="cb44-93"><a href="#cb44-93" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb44-94"><a href="#cb44-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-95"><a href="#cb44-95" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb44-96"><a href="#cb44-96" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb44-97"><a href="#cb44-97" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb44-98"><a href="#cb44-98" aria-hidden="true" tabindex="-1"></a>&gt; er-8\qindex_t.<span class="fu">log</span></span>
<span id="cb44-99"><a href="#cb44-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb44-100"><a href="#cb44-100" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 23:09:01</span>
<span id="cb44-101"><a href="#cb44-101" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb44-102"><a href="#cb44-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-103"><a href="#cb44-103" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb44-104"><a href="#cb44-104" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="my-code-3" class="level3">
<h3 class="anchored" data-anchor-id="my-code-3">My code</h3>
<section id="unit_quality.do-1" class="level4">
<h4 class="anchored" data-anchor-id="unit_quality.do-1">unit_quality.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;</span> <span class="dv">86</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ve =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">quan_t =</span> quan,</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_t =</span> wdth,</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_t =</span> hght,</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_t =</span> weight,</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_t =</span> hp,</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_t =</span> four,</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_t =</span> tran,</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_t =</span> ps,</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_t =</span> ac</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;</span> <span class="dv">86</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ve =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">quan_c =</span> quan,</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_c =</span> wdth,</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_c =</span> hght,</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_c =</span> wght,</span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_c =</span> hp,</span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_c =</span> four,</span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_c =</span> tran,</span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_c =</span> ps,</span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_c =</span> ac</span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(car_7990) <span class="sc">%&gt;%</span></span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wdth_c), <span class="dv">0</span>, wdth_c),</span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hght_c), <span class="dv">0</span>, hght_c),</span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wght_c), <span class="dv">0</span>, wght_c),</span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hp_c), <span class="dv">0</span>, hp_c),</span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(four_c), <span class="dv">0</span>, four_c),</span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(tran_c), <span class="dv">0</span>, tran_c),</span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ps_c), <span class="dv">0</span>, ps_c),</span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ac_c), <span class="dv">0</span>, ac_c),</span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wdth_t), <span class="dv">0</span>, wdth_t),</span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hght_t), <span class="dv">0</span>, hght_t),</span>
<span id="cb45-44"><a href="#cb45-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wght_t), <span class="dv">0</span>, wght_t),</span>
<span id="cb45-45"><a href="#cb45-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hp_t), <span class="dv">0</span>, hp_t),</span>
<span id="cb45-46"><a href="#cb45-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(four_t), <span class="dv">0</span>, four_t),</span>
<span id="cb45-47"><a href="#cb45-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(tran_t), <span class="dv">0</span>, tran_t),</span>
<span id="cb45-48"><a href="#cb45-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ps_t), <span class="dv">0</span>, ps_t),</span>
<span id="cb45-49"><a href="#cb45-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ac_t), <span class="dv">0</span>, ac_t)</span>
<span id="cb45-50"><a href="#cb45-50" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-51"><a href="#cb45-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-52"><a href="#cb45-52" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb45-53"><a href="#cb45-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb45-54"><a href="#cb45-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb45-55"><a href="#cb45-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb45-56"><a href="#cb45-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-57"><a href="#cb45-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent =</span> freq <span class="sc">/</span> <span class="fu">sum</span>(freq) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb45-58"><a href="#cb45-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">cum =</span> <span class="fu">cumsum</span>(percent)</span>
<span id="cb45-59"><a href="#cb45-59" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
   year  freq percent   cum
  &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;
1    79    31    12.2  12.2
2    80    34    13.4  25.6
3    81    35    13.8  39.4
4    82    35    13.8  53.1
5    83    36    14.2  67.3
6    84    40    15.7  83.1
7    85    43    16.9 100  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yd =</span> <span class="fu">as.factor</span>(year <span class="sc">-</span> <span class="fu">min</span>(year) <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>truck_7990_dummy <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span> yd <span class="sc">-</span> <span class="dv">1</span>, <span class="at">data =</span> truck_7990)</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">as.data.frame</span>(truck_7990_dummy))</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd2 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd2),</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd3 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd3),</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd4 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd4),</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd5 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd5),</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd6 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd6),</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd7 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd7),</span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd2 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd2),</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd3 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd3),</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd4 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd4),</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd5 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd5),</span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd6 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd6),</span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd7 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd7)</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>initial_values <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">a3 =</span> <span class="dv">1</span>, <span class="at">a4 =</span> <span class="dv">1</span>, <span class="at">a5 =</span> <span class="dv">1</span>, <span class="at">a6 =</span> <span class="dv">1</span>, <span class="at">a7 =</span> <span class="dv">1</span>,</span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">b2 =</span> <span class="fl">0.1</span>, <span class="at">b3 =</span> <span class="fl">0.1</span>, <span class="at">b4 =</span> <span class="fl">0.1</span>, <span class="at">b5 =</span> <span class="fl">0.1</span>, <span class="at">b6 =</span> <span class="fl">0.1</span>, <span class="at">b7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">c1 =</span> <span class="fl">0.1</span>, <span class="at">c2 =</span> <span class="fl">0.1</span>, <span class="at">c3 =</span> <span class="fl">0.1</span>, <span class="at">c4 =</span> <span class="fl">0.1</span>, <span class="at">c5 =</span> <span class="fl">0.1</span>, <span class="at">c6 =</span> <span class="fl">0.1</span>, <span class="at">c7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">c8 =</span> <span class="fl">0.1</span>, <span class="at">c9 =</span> <span class="fl">0.1</span>,</span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">d1 =</span> <span class="fl">0.1</span>, <span class="at">d2 =</span> <span class="fl">0.1</span>, <span class="at">d3 =</span> <span class="fl">0.1</span>, <span class="at">d4 =</span> <span class="fl">0.1</span>, <span class="at">d5 =</span> <span class="fl">0.1</span>, <span class="at">d6 =</span> <span class="fl">0.1</span>, <span class="at">d7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">d8 =</span> <span class="fl">0.1</span></span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a>  price <span class="sc">~</span> a3 <span class="sc">*</span> cyd3 <span class="sc">+</span> a4 <span class="sc">*</span> cyd4 <span class="sc">+</span> a5 <span class="sc">*</span> cyd5 <span class="sc">+</span> a6 <span class="sc">*</span> cyd6 <span class="sc">+</span> a7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(b2 <span class="sc">*</span> cyd2 <span class="sc">+</span> b3 <span class="sc">*</span> cyd3 <span class="sc">+</span> b4 <span class="sc">*</span> cyd4 <span class="sc">+</span> b5 <span class="sc">*</span> cyd5 <span class="sc">+</span> b6 <span class="sc">*</span> cyd6 <span class="sc">+</span></span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a>      b7 <span class="sc">*</span> cyd7 <span class="sc">+</span> c1 <span class="sc">*</span> wght_c <span class="sc">+</span> c2 <span class="sc">*</span> wdth_c <span class="sc">+</span> c3 <span class="sc">*</span> hght_c <span class="sc">+</span> c4 <span class="sc">*</span> hp_c <span class="sc">+</span></span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a>      c5 <span class="sc">*</span> tran_c <span class="sc">+</span> c6 <span class="sc">*</span> ps_c <span class="sc">+</span> c7 <span class="sc">*</span> ac_c <span class="sc">+</span> c8) <span class="sc">+</span></span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(b2 <span class="sc">*</span> tyd2 <span class="sc">+</span> (b3 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd3 <span class="sc">+</span> (b4 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd4 <span class="sc">+</span></span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a>      (b5 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd5 <span class="sc">+</span> (b6 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd6 <span class="sc">+</span> c9 <span class="sc">*</span> tyd7 <span class="sc">+</span> d1 <span class="sc">*</span> wght_t <span class="sc">+</span></span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a>      d2 <span class="sc">*</span> wdth_t <span class="sc">+</span> d3 <span class="sc">*</span> hght_t <span class="sc">+</span> d4 <span class="sc">*</span> hp_t <span class="sc">+</span> d5 <span class="sc">*</span> tran_t <span class="sc">+</span> d6 <span class="sc">*</span> ps_t <span class="sc">+</span></span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a>      d7 <span class="sc">*</span> four_t <span class="sc">+</span> d8),</span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values</span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-47"><a href="#cb47-47" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: price ~ a3 * cyd3 + a4 * cyd4 + a5 * cyd5 + a6 * cyd6 + a7 * 
    cyd7 + exp(b2 * cyd2 + b3 * cyd3 + b4 * cyd4 + b5 * cyd5 + 
    b6 * cyd6 + b7 * cyd7 + c1 * wght_c + c2 * wdth_c + c3 * 
    hght_c + c4 * hp_c + c5 * tran_c + c6 * ps_c + c7 * ac_c + 
    c8) + exp(b2 * tyd2 + (b3 + 0.16) * tyd3 + (b4 + 0.16) * 
    tyd4 + (b5 + 0.16) * tyd5 + (b6 + 0.16) * tyd6 + c9 * tyd7 + 
    d1 * wght_t + d2 * wdth_t + d3 * hght_t + d4 * hp_t + d5 * 
    tran_t + d6 * ps_t + d7 * four_t + d8)

Parameters:
     Estimate Std. Error t value Pr(&gt;|t|)    
a3  2.542e+02  3.171e+02   0.802 0.423598    
a4  5.052e+02  3.256e+02   1.552 0.122150    
a5  7.090e+02  3.173e+02   2.235 0.026415 *  
a6  1.082e+03  3.224e+02   3.356 0.000926 ***
a7  1.063e+03  3.739e+02   2.843 0.004876 ** 
b2  4.065e-03  3.290e-02   0.124 0.901779    
b3  7.559e-02  4.906e-02   1.541 0.124732    
b4  8.284e-02  4.904e-02   1.689 0.092555 .  
b5  3.276e-02  5.070e-02   0.646 0.518840    
b6  3.510e-02  5.147e-02   0.682 0.495934    
b7  8.254e-02  5.576e-02   1.480 0.140197    
c1  3.261e-02  1.117e-01   0.292 0.770715    
c2  3.860e-01  1.204e-01   3.205 0.001545 ** 
c3 -1.929e-01  5.683e-02  -3.395 0.000811 ***
c4  7.152e-01  7.362e-02   9.715  &lt; 2e-16 ***
c5  1.579e-01  3.382e-02   4.668 5.21e-06 ***
c6  6.412e-02  2.471e-02   2.595 0.010082 *  
c7  1.830e-01  2.428e-02   7.535 1.16e-12 ***
c8  6.599e+00  7.307e-01   9.032  &lt; 2e-16 ***
c9  1.172e-01  6.342e-02   1.848 0.065932 .  
d1  4.917e-01  7.958e-02   6.179 2.97e-09 ***
d2  2.621e-01  1.757e-01   1.492 0.137107    
d3 -4.513e-02  6.770e-02  -0.667 0.505752    
d4  3.031e-01  1.701e-01   1.782 0.076158 .  
d5  3.978e-02  3.627e-02   1.097 0.273899    
d6  9.676e-02  5.018e-02   1.928 0.055072 .  
d7  3.052e-01  7.156e-02   4.265 2.94e-05 ***
d8  6.300e+00  9.620e-01   6.549 3.85e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 666.9 on 226 degrees of freedom

Number of iterations to convergence: 30 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>fit_coef <span class="ot">&lt;-</span> <span class="fu">coef</span>(fit)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">winv =</span> <span class="fu">case_when</span>(</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>      ve <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>(fit_coef[<span class="st">"b2"</span>] <span class="sc">*</span> cyd2 <span class="sc">+</span> fit_coef[<span class="st">"b3"</span>] <span class="sc">*</span> cyd3 <span class="sc">+</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"b4"</span>] <span class="sc">*</span> cyd4 <span class="sc">+</span> fit_coef[<span class="st">"b5"</span>] <span class="sc">*</span> cyd5 <span class="sc">+</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"b6"</span>] <span class="sc">*</span> cyd6 <span class="sc">+</span> fit_coef[<span class="st">"b7"</span>] <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c1"</span>] <span class="sc">*</span> wght_c <span class="sc">+</span> fit_coef[<span class="st">"c2"</span>] <span class="sc">*</span> wdth_c <span class="sc">+</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c3"</span>] <span class="sc">*</span> hght_c <span class="sc">+</span> fit_coef[<span class="st">"c4"</span>] <span class="sc">*</span> hp_c <span class="sc">+</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c5"</span>] <span class="sc">*</span> tran_c <span class="sc">+</span> fit_coef[<span class="st">"c6"</span>] <span class="sc">*</span> ps_c <span class="sc">+</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c7"</span>] <span class="sc">*</span> ac_c <span class="sc">+</span> fit_coef[<span class="st">"c8"</span>]),</span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>      ve <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>((fit_coef[<span class="st">"b2"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd2 <span class="sc">+</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>        (fit_coef[<span class="st">"b3"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd3 <span class="sc">+</span> (fit_coef[<span class="st">"b4"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd4 <span class="sc">+</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>        (fit_coef[<span class="st">"b5"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd5 <span class="sc">+</span> (fit_coef[<span class="st">"b6"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd6 <span class="sc">+</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c9"</span>] <span class="sc">*</span> tyd7 <span class="sc">+</span> fit_coef[<span class="st">"d1"</span>] <span class="sc">*</span> wght_t <span class="sc">+</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"d2"</span>] <span class="sc">*</span> wdth_t <span class="sc">+</span> fit_coef[<span class="st">"d3"</span>] <span class="sc">*</span> hght_t <span class="sc">+</span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"d4"</span>] <span class="sc">*</span> hp_t <span class="sc">+</span> fit_coef[<span class="st">"d5"</span>] <span class="sc">*</span> tran_t <span class="sc">+</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"d6"</span>] <span class="sc">*</span> ps_t <span class="sc">+</span> fit_coef[<span class="st">"d7"</span>] <span class="sc">*</span> four_t <span class="sc">+</span> fit_coef[<span class="st">"d8"</span>])</span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">nprice =</span> price <span class="sc">*</span> winv</span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>fit2 <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>  nprice <span class="sc">~</span> winv <span class="sc">*</span> (a3 <span class="sc">*</span> cyd3 <span class="sc">+</span> a4 <span class="sc">*</span> cyd4 <span class="sc">+</span> a5 <span class="sc">*</span> cyd5 <span class="sc">+</span> a6 <span class="sc">*</span> cyd6 <span class="sc">+</span> a7 <span class="sc">*</span> cyd7) <span class="sc">+</span></span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(b2 <span class="sc">*</span> cyd2 <span class="sc">+</span> b3 <span class="sc">*</span> cyd3 <span class="sc">+</span> b4 <span class="sc">*</span> cyd4 <span class="sc">+</span> b5 <span class="sc">*</span> cyd5 <span class="sc">+</span> b6 <span class="sc">*</span> cyd6 <span class="sc">+</span></span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>      b7 <span class="sc">*</span> cyd7 <span class="sc">+</span> c1 <span class="sc">*</span> wght_c <span class="sc">+</span> c2 <span class="sc">*</span> wdth_c <span class="sc">+</span> c3 <span class="sc">*</span> hght_c <span class="sc">+</span> c4 <span class="sc">*</span> hp_c <span class="sc">+</span></span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a>      c5 <span class="sc">*</span> tran_c <span class="sc">+</span> c6 <span class="sc">*</span> ps_c <span class="sc">+</span> c7 <span class="sc">*</span> ac_c <span class="sc">+</span> c8) <span class="sc">+</span></span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(b2 <span class="sc">*</span> tyd2 <span class="sc">+</span> (b3 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd3 <span class="sc">+</span> (b4 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd4 <span class="sc">+</span></span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true" tabindex="-1"></a>      (b5 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd5 <span class="sc">+</span> (b6 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd6 <span class="sc">+</span> c9 <span class="sc">*</span> tyd7 <span class="sc">+</span> d1 <span class="sc">*</span> wght_t <span class="sc">+</span></span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true" tabindex="-1"></a>      d2 <span class="sc">*</span> wdth_t <span class="sc">+</span> d3 <span class="sc">*</span> hght_t <span class="sc">+</span> d4 <span class="sc">*</span> hp_t <span class="sc">+</span> d5 <span class="sc">*</span> tran_t <span class="sc">+</span> d6 <span class="sc">*</span> ps_t <span class="sc">+</span></span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true" tabindex="-1"></a>      d7 <span class="sc">*</span> four_t <span class="sc">+</span> d8),</span>
<span id="cb49-33"><a href="#cb49-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb49-34"><a href="#cb49-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values</span>
<span id="cb49-35"><a href="#cb49-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-36"><a href="#cb49-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-37"><a href="#cb49-37" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: nprice ~ winv * (a3 * cyd3 + a4 * cyd4 + a5 * cyd5 + a6 * cyd6 + 
    a7 * cyd7) + winv * exp(b2 * cyd2 + b3 * cyd3 + b4 * cyd4 + 
    b5 * cyd5 + b6 * cyd6 + b7 * cyd7 + c1 * wght_c + c2 * wdth_c + 
    c3 * hght_c + c4 * hp_c + c5 * tran_c + c6 * ps_c + c7 * 
    ac_c + c8) + winv * exp(b2 * tyd2 + (b3 + 0.16) * tyd3 + 
    (b4 + 0.16) * tyd4 + (b5 + 0.16) * tyd5 + (b6 + 0.16) * tyd6 + 
    c9 * tyd7 + d1 * wght_t + d2 * wdth_t + d3 * hght_t + d4 * 
    hp_t + d5 * tran_t + d6 * ps_t + d7 * four_t + d8)

Parameters:
     Estimate Std. Error t value Pr(&gt;|t|)    
a3  3.679e+02  2.391e+02   1.539 0.125219    
a4  6.005e+02  2.543e+02   2.362 0.019041 *  
a5  8.879e+02  2.436e+02   3.645 0.000332 ***
a6  1.104e+03  2.511e+02   4.399 1.68e-05 ***
a7  8.556e+02  3.663e+02   2.336 0.020379 *  
b2  1.304e-02  3.031e-02   0.430 0.667488    
b3  6.745e-02  4.252e-02   1.586 0.114086    
b4  7.013e-02  4.419e-02   1.587 0.113886    
b5 -5.484e-04  4.708e-02  -0.012 0.990718    
b6  1.801e-02  4.740e-02   0.380 0.704268    
b7  1.008e-01  6.416e-02   1.571 0.117554    
c1  4.925e-02  1.311e-01   0.376 0.707523    
c2  3.908e-01  1.383e-01   2.825 0.005153 ** 
c3 -6.182e-02  6.114e-02  -1.011 0.313088    
c4  8.103e-01  1.038e-01   7.807 2.17e-13 ***
c5  1.779e-01  3.552e-02   5.009 1.10e-06 ***
c6  6.936e-02  3.049e-02   2.275 0.023864 *  
c7  1.567e-01  3.604e-02   4.348 2.08e-05 ***
c8  5.839e+00  8.619e-01   6.775 1.07e-10 ***
c9  1.060e-01  5.506e-02   1.925 0.055494 .  
d1  4.760e-01  1.172e-01   4.060 6.76e-05 ***
d2  2.121e-01  1.420e-01   1.493 0.136773    
d3 -2.704e-02  7.406e-02  -0.365 0.715380    
d4  2.443e-01  1.517e-01   1.611 0.108659    
d5  5.301e-02  3.562e-02   1.488 0.138112    
d6  5.751e-02  6.396e-02   0.899 0.369534    
d7  2.972e-01  5.670e-02   5.242 3.64e-07 ***
d8  6.630e+00  7.655e-01   8.661 8.98e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1144 on 226 degrees of freedom

Number of iterations to convergence: 31 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>fit2_coef <span class="ot">&lt;-</span> <span class="fu">coef</span>(fit2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>truck_7990_2 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ve <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">quality =</span> <span class="fu">exp</span>(fit2_coef[<span class="st">"c8"</span>] <span class="sc">+</span> fit2_coef[<span class="st">"b2"</span>] <span class="sc">+</span> fit2_coef[<span class="st">"c1"</span>] <span class="sc">*</span> wght_c <span class="sc">+</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>      fit2_coef[<span class="st">"c2"</span>] <span class="sc">*</span> wdth_c <span class="sc">+</span> fit2_coef[<span class="st">"c3"</span>] <span class="sc">*</span> hght_c <span class="sc">+</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>      fit2_coef[<span class="st">"c4"</span>] <span class="sc">*</span> hp_c <span class="sc">+</span> fit2_coef[<span class="st">"c5"</span>] <span class="sc">*</span> tran_c <span class="sc">+</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>      fit2_coef[<span class="st">"c6"</span>] <span class="sc">*</span> ps_c <span class="sc">+</span> fit2_coef[<span class="st">"c7"</span>] <span class="sc">*</span> ac_c),</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">nvalue =</span> quality <span class="sc">*</span> quan_c</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>car_uquality <span class="ot">&lt;-</span> truck_7990_2 <span class="sc">%&gt;%</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">aquan =</span> <span class="fu">mean</span>(quan_c),</span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">anvalue =</span> <span class="fu">mean</span>(nvalue)</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">uquality =</span> anvalue <span class="sc">/</span> aquan) <span class="sc">%&gt;%</span></span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_uquality =</span> <span class="fu">mean</span>(uquality))</span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>car_uquality</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
   year mean_uquality
  &lt;dbl&gt;         &lt;dbl&gt;
1    79         4361.
2    80         4473.
3    81         4868.
4    82         5253.
5    83         5637.
6    84         5862.
7    85         6130.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>truck_7990_3 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ve <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">quality =</span> <span class="fu">exp</span>(fit2_coef[<span class="st">"d8"</span>] <span class="sc">+</span> fit2_coef[<span class="st">"b2"</span>] <span class="sc">+</span> fit2_coef[<span class="st">"d1"</span>] <span class="sc">*</span> wght_t <span class="sc">+</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>      fit2_coef[<span class="st">"d2"</span>] <span class="sc">*</span> wdth_t <span class="sc">+</span> fit2_coef[<span class="st">"d3"</span>] <span class="sc">*</span> hght_t <span class="sc">+</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>      fit2_coef[<span class="st">"d4"</span>] <span class="sc">*</span> hp_t <span class="sc">+</span> fit2_coef[<span class="st">"d5"</span>] <span class="sc">*</span> tran_t <span class="sc">+</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>      fit2_coef[<span class="st">"d6"</span>] <span class="sc">*</span> ps_t <span class="sc">+</span> fit2_coef[<span class="st">"d7"</span>] <span class="sc">*</span> four_t),</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">nvalue =</span> quality <span class="sc">*</span> quan_t</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>truck_uquality <span class="ot">&lt;-</span> truck_7990_3 <span class="sc">%&gt;%</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">aquan =</span> <span class="fu">mean</span>(quan_t),</span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">anvalue =</span> <span class="fu">mean</span>(nvalue)</span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">uquality =</span> anvalue <span class="sc">/</span> aquan) <span class="sc">%&gt;%</span></span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_uquality =</span> <span class="fu">mean</span>(uquality))</span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>truck_uquality</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
   year mean_uquality
  &lt;dbl&gt;         &lt;dbl&gt;
1    79         4627.
2    80         4637.
3    81         4791.
4    82         4930.
5    83         4997.
6    84         5010.
7    85         5433.</code></pre>
</div>
</div>
</section>
<section id="qindex_c.do-1" class="level4">
<h4 class="anchored" data-anchor-id="qindex_c.do-1">qindex_c.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>car_7990_2_80 <span class="ot">&lt;-</span> truck_7990_2 <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">80</span>) <span class="sc">%&gt;%</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(model, type, quality, quan_c) <span class="sc">%&gt;%</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">quality_80 =</span> quality,</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">quan_80 =</span> quan_c</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>car_qindex <span class="ot">&lt;-</span> truck_7990_2 <span class="sc">%&gt;%</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, model, type, quality, quan_c) <span class="sc">%&gt;%</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(car_7990_2_80, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"model"</span>, <span class="st">"type"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, model) <span class="sc">%&gt;%</span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_80 =</span> <span class="fu">sum</span>(quality_80 <span class="sc">*</span> quan_80),</span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_cp =</span> <span class="fu">sum</span>(quality <span class="sc">*</span> quan_80),</span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">lasp =</span> value_cp <span class="sc">/</span> value_80</span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_c =</span> <span class="fu">sum</span>(quality <span class="sc">*</span> quan_c),</span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_cq =</span> <span class="fu">sum</span>(quality_80 <span class="sc">*</span> quan_c),</span>
<span id="cb56-22"><a href="#cb56-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">pasp =</span> value_c <span class="sc">/</span> value_cq,</span>
<span id="cb56-23"><a href="#cb56-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">qindex =</span> <span class="fu">sqrt</span>(lasp <span class="sc">*</span> pasp)</span>
<span id="cb56-24"><a href="#cb56-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb56-25"><a href="#cb56-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_qindex =</span> <span class="fu">mean</span>(qindex))</span>
<span id="cb56-26"><a href="#cb56-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-27"><a href="#cb56-27" aria-hidden="true" tabindex="-1"></a>car_qindex</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
   year mean_qindex
  &lt;dbl&gt;       &lt;dbl&gt;
1    79       0.985
2    80       1    
3    81       1.09 
4    82       1.14 
5    83       1.20 
6    84       1.26 
7    85       1.33 </code></pre>
</div>
</div>
</section>
<section id="qindex_t.do-1" class="level4">
<h4 class="anchored" data-anchor-id="qindex_t.do-1">qindex_t.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>truck_7990_3_80 <span class="ot">&lt;-</span> truck_7990_3 <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">80</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(model, type, quality, quan_t) <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">quality_80 =</span> quality,</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">quan_80 =</span> quan_t</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>truck_qindex <span class="ot">&lt;-</span> truck_7990_3 <span class="sc">%&gt;%</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, model, type, quality, quan_t) <span class="sc">%&gt;%</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(truck_7990_3_80, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"model"</span>, <span class="st">"type"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, model) <span class="sc">%&gt;%</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_80 =</span> <span class="fu">sum</span>(quality_80 <span class="sc">*</span> quan_80),</span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_tp =</span> <span class="fu">sum</span>(quality <span class="sc">*</span> quan_80),</span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">lasp =</span> value_tp <span class="sc">/</span> value_80</span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_t =</span> <span class="fu">sum</span>(quality <span class="sc">*</span> quan_t),</span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_tq =</span> <span class="fu">sum</span>(quality_80 <span class="sc">*</span> quan_t),</span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">pasp =</span> value_t <span class="sc">/</span> value_tq,</span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">qindex =</span> <span class="fu">sqrt</span>(lasp <span class="sc">*</span> pasp)</span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb58-25"><a href="#cb58-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_qindex =</span> <span class="fu">mean</span>(qindex))</span>
<span id="cb58-26"><a href="#cb58-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-27"><a href="#cb58-27" aria-hidden="true" tabindex="-1"></a>truck_qindex</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
   year mean_qindex
  &lt;dbl&gt;       &lt;dbl&gt;
1    79       0.983
2    80       1    
3    81       1.03 
4    82       1.06 
5    83       1.05 
6    84       1.07 
7    85       1.17 </code></pre>
</div>
</div>
</section>
</section>
<section id="extra-step-formatting-the-tables-2" class="level3">
<h3 class="anchored" data-anchor-id="extra-step-formatting-the-tables-2">Extra step: formatting the tables</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># function to avoid code quadruplication</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>reshape_qindex <span class="ot">&lt;-</span> <span class="cf">function</span>(data, mean_qindex_col, group, measurement) {</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">mean_qindex =</span> <span class="sc">!!</span>mean_qindex_col) <span class="sc">%&gt;%</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">qindex_pct =</span> (mean_qindex <span class="sc">-</span> <span class="fu">lag</span>(mean_qindex)) <span class="sc">/</span> mean_qindex</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">cols =</span> <span class="fu">c</span>(mean_qindex, qindex_pct),</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">names_to =</span> <span class="st">"metric"</span>,</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year, <span class="at">values_from =</span> value) <span class="sc">%&gt;%</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">type =</span> group) <span class="sc">%&gt;%</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">metric =</span> <span class="fu">c</span>(measurement, <span class="fu">paste</span>(measurement, <span class="st">"(% Change)"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(type, metric, <span class="fu">everything</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span> <span class="fu">round</span>(., <span class="dv">3</span>))</span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a>table83 <span class="ot">&lt;-</span> <span class="fu">reshape_qindex</span>(car_uquality, <span class="st">"mean_uquality"</span>, <span class="st">"Japanese Cars"</span>, <span class="st">"Unit quality"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">reshape_qindex</span>(car_qindex, <span class="st">"mean_qindex"</span>, <span class="st">"Japanese Cars"</span>, <span class="st">"Quality index"</span>)</span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb60-25"><a href="#cb60-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">reshape_qindex</span>(truck_uquality, <span class="st">"mean_uquality"</span>, <span class="st">"Japanese Trucks"</span>, <span class="st">"Unit quality"</span>)</span>
<span id="cb60-26"><a href="#cb60-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb60-27"><a href="#cb60-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb60-28"><a href="#cb60-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">reshape_qindex</span>(truck_qindex, <span class="st">"mean_qindex"</span>, <span class="st">"Japanese Trucks"</span>, <span class="st">"Quality index"</span>)</span>
<span id="cb60-29"><a href="#cb60-29" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb60-30"><a href="#cb60-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-31"><a href="#cb60-31" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(table83) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Type"</span>, <span class="st">"Metric"</span>, <span class="fu">paste0</span>(<span class="st">"19"</span>, <span class="dv">79</span><span class="sc">:</span><span class="dv">85</span>))</span>
<span id="cb60-32"><a href="#cb60-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-33"><a href="#cb60-33" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(table83)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 15%">
<col style="width: 24%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Metric</th>
<th style="text-align: right;">1979</th>
<th style="text-align: right;">1980</th>
<th style="text-align: right;">1981</th>
<th style="text-align: right;">1982</th>
<th style="text-align: right;">1983</th>
<th style="text-align: right;">1984</th>
<th style="text-align: right;">1985</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Japanese Cars</td>
<td style="text-align: left;">Unit quality</td>
<td style="text-align: right;">4361.162</td>
<td style="text-align: right;">4473.178</td>
<td style="text-align: right;">4867.702</td>
<td style="text-align: right;">5253.221</td>
<td style="text-align: right;">5637.037</td>
<td style="text-align: right;">5862.490</td>
<td style="text-align: right;">6130.408</td>
</tr>
<tr class="even">
<td style="text-align: left;">Japanese Cars</td>
<td style="text-align: left;">Unit quality (% Change)</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.025</td>
<td style="text-align: right;">0.081</td>
<td style="text-align: right;">0.073</td>
<td style="text-align: right;">0.068</td>
<td style="text-align: right;">0.038</td>
<td style="text-align: right;">0.044</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Japanese Cars</td>
<td style="text-align: left;">Quality index</td>
<td style="text-align: right;">0.985</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">1.085</td>
<td style="text-align: right;">1.144</td>
<td style="text-align: right;">1.204</td>
<td style="text-align: right;">1.263</td>
<td style="text-align: right;">1.328</td>
</tr>
<tr class="even">
<td style="text-align: left;">Japanese Cars</td>
<td style="text-align: left;">Quality index (% Change)</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.015</td>
<td style="text-align: right;">0.079</td>
<td style="text-align: right;">0.052</td>
<td style="text-align: right;">0.049</td>
<td style="text-align: right;">0.047</td>
<td style="text-align: right;">0.049</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Japanese Trucks</td>
<td style="text-align: left;">Unit quality</td>
<td style="text-align: right;">4626.649</td>
<td style="text-align: right;">4637.404</td>
<td style="text-align: right;">4791.084</td>
<td style="text-align: right;">4929.624</td>
<td style="text-align: right;">4996.917</td>
<td style="text-align: right;">5009.782</td>
<td style="text-align: right;">5432.585</td>
</tr>
<tr class="even">
<td style="text-align: left;">Japanese Trucks</td>
<td style="text-align: left;">Unit quality (% Change)</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">0.032</td>
<td style="text-align: right;">0.028</td>
<td style="text-align: right;">0.013</td>
<td style="text-align: right;">0.003</td>
<td style="text-align: right;">0.078</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Japanese Trucks</td>
<td style="text-align: left;">Quality index</td>
<td style="text-align: right;">0.983</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">1.032</td>
<td style="text-align: right;">1.056</td>
<td style="text-align: right;">1.054</td>
<td style="text-align: right;">1.068</td>
<td style="text-align: right;">1.167</td>
</tr>
<tr class="even">
<td style="text-align: left;">Japanese Trucks</td>
<td style="text-align: left;">Quality index (% Change)</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.017</td>
<td style="text-align: right;">0.031</td>
<td style="text-align: right;">0.023</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.013</td>
<td style="text-align: right;">0.085</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="exercise-5" class="level2">
<h2 class="anchored" data-anchor-id="exercise-5">Exercise 5</h2>
<p>Pooling car and truck data, run <code>system_nocom.do</code> and <code>system_wcon.do</code> to reproduce columns (1) - (4) in Table 8.5, with constraints specified in equation (8.22).</p>
<section id="feenstras-code-4" class="level3">
<h3 class="anchored" data-anchor-id="feenstras-code-4">Feenstra’s code</h3>
<section id="system_nocom.do" class="level4">
<h4 class="anchored" data-anchor-id="system_nocom.do">system_nocom.do</h4>
<p>In the original code:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd10=yd10</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd10=yd10</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=10 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=10 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd11=yd11</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd11=yd11</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=11 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=11 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd12=yd12</span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd12=yd12</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=12 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=12 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Can be simplified to:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd10=yd10</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd10=yd10</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd11=yd11</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd11=yd11</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd12=yd12</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd12=yd12</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=12 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=12 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The original code is:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\system_nocon.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span> <span class="dv">matsize</span> 400</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_7990,<span class="kw">clear</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> ve=2</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wdth wdth_t</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hght hght_t</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">weight</span> wght_t</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hp hp_t</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> four four_t</span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> tran tran_t</span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> ps ps_t</span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">ac</span> ac_t</span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_temp,<span class="kw">replace</span></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_7990,<span class="kw">clear</span></span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> ve=1</span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wdth wdth_c</span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hght hght_c</span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wght wght_c</span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hp hp_c</span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> four four_c</span>
<span id="cb63-26"><a href="#cb63-26" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> tran tran_c</span>
<span id="cb63-27"><a href="#cb63-27" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> ps ps_c</span>
<span id="cb63-28"><a href="#cb63-28" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">ac</span> ac_c</span>
<span id="cb63-29"><a href="#cb63-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-30"><a href="#cb63-30" aria-hidden="true" tabindex="-1"></a><span class="kw">append</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_temp</span>
<span id="cb63-31"><a href="#cb63-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-32"><a href="#cb63-32" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wdth_c=0 <span class="kw">if</span> wdth_c==.</span>
<span id="cb63-33"><a href="#cb63-33" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hght_c=0 <span class="kw">if</span> hght_c==.</span>
<span id="cb63-34"><a href="#cb63-34" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wght_c=0 <span class="kw">if</span> wght_c==.</span>
<span id="cb63-35"><a href="#cb63-35" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hp_c=0 <span class="kw">if</span> hp_c==.</span>
<span id="cb63-36"><a href="#cb63-36" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> four_c=0 <span class="kw">if</span> four_c==.</span>
<span id="cb63-37"><a href="#cb63-37" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tran_c=0 <span class="kw">if</span> tran_c==.</span>
<span id="cb63-38"><a href="#cb63-38" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ps_c=0 <span class="kw">if</span> ps_c==.</span>
<span id="cb63-39"><a href="#cb63-39" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ac_c=0 <span class="kw">if</span> ac_c==.</span>
<span id="cb63-40"><a href="#cb63-40" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wdth_t=0 <span class="kw">if</span> wdth_t==.</span>
<span id="cb63-41"><a href="#cb63-41" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hght_t=0 <span class="kw">if</span> hght_t==.</span>
<span id="cb63-42"><a href="#cb63-42" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wght_t=0 <span class="kw">if</span> wght_t==.</span>
<span id="cb63-43"><a href="#cb63-43" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hp_t=0 <span class="kw">if</span> hp_t==.</span>
<span id="cb63-44"><a href="#cb63-44" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> four_t=0 <span class="kw">if</span> four_t==.</span>
<span id="cb63-45"><a href="#cb63-45" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tran_t=0 <span class="kw">if</span> tran_t==.</span>
<span id="cb63-46"><a href="#cb63-46" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ps_t=0 <span class="kw">if</span> ps_t==.</span>
<span id="cb63-47"><a href="#cb63-47" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ac_t=0 <span class="kw">if</span> ac_t==.</span>
<span id="cb63-48"><a href="#cb63-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-49"><a href="#cb63-49" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb63-50"><a href="#cb63-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-51"><a href="#cb63-51" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd2=yd2</span>
<span id="cb63-52"><a href="#cb63-52" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd2=yd2</span>
<span id="cb63-53"><a href="#cb63-53" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd2=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb63-54"><a href="#cb63-54" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd2=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb63-55"><a href="#cb63-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-56"><a href="#cb63-56" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd3=yd3</span>
<span id="cb63-57"><a href="#cb63-57" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd3=yd3</span>
<span id="cb63-58"><a href="#cb63-58" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd3=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb63-59"><a href="#cb63-59" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd3=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb63-60"><a href="#cb63-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-61"><a href="#cb63-61" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd4=yd4</span>
<span id="cb63-62"><a href="#cb63-62" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd4=yd4</span>
<span id="cb63-63"><a href="#cb63-63" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd4=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb63-64"><a href="#cb63-64" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd4=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb63-65"><a href="#cb63-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-66"><a href="#cb63-66" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd5=yd5</span>
<span id="cb63-67"><a href="#cb63-67" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd5=yd5</span>
<span id="cb63-68"><a href="#cb63-68" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd5=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb63-69"><a href="#cb63-69" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd5=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb63-70"><a href="#cb63-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-71"><a href="#cb63-71" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd6=yd6</span>
<span id="cb63-72"><a href="#cb63-72" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd6=yd6</span>
<span id="cb63-73"><a href="#cb63-73" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd6=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb63-74"><a href="#cb63-74" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd6=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb63-75"><a href="#cb63-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-76"><a href="#cb63-76" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd7=yd7</span>
<span id="cb63-77"><a href="#cb63-77" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd7=yd7</span>
<span id="cb63-78"><a href="#cb63-78" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb63-79"><a href="#cb63-79" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb63-80"><a href="#cb63-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-81"><a href="#cb63-81" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd8=yd8</span>
<span id="cb63-82"><a href="#cb63-82" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd8=yd8</span>
<span id="cb63-83"><a href="#cb63-83" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd8=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb63-84"><a href="#cb63-84" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd8=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb63-85"><a href="#cb63-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-86"><a href="#cb63-86" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd9=yd9</span>
<span id="cb63-87"><a href="#cb63-87" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd9=yd9</span>
<span id="cb63-88"><a href="#cb63-88" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd9=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb63-89"><a href="#cb63-89" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd9=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb63-90"><a href="#cb63-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-91"><a href="#cb63-91" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd10=yd10</span>
<span id="cb63-92"><a href="#cb63-92" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd10=yd10</span>
<span id="cb63-93"><a href="#cb63-93" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=10 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb63-94"><a href="#cb63-94" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=10 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb63-95"><a href="#cb63-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-96"><a href="#cb63-96" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd11=yd11</span>
<span id="cb63-97"><a href="#cb63-97" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd11=yd11</span>
<span id="cb63-98"><a href="#cb63-98" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=11 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb63-99"><a href="#cb63-99" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=11 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb63-100"><a href="#cb63-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-101"><a href="#cb63-101" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd12=yd12</span>
<span id="cb63-102"><a href="#cb63-102" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd12=yd12</span>
<span id="cb63-103"><a href="#cb63-103" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=12 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb63-104"><a href="#cb63-104" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=12 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb63-105"><a href="#cb63-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-106"><a href="#cb63-106" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlct_1</span>
<span id="cb63-107"><a href="#cb63-107" aria-hidden="true" tabindex="-1"></a><span class="kw">version</span> 7.0</span>
<span id="cb63-108"><a href="#cb63-108" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb63-109"><a href="#cb63-109" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 a8 a9 a10 a11 a12 b2 b3 b4 b5 b6 b7 b8 b9 b10 b11 b12 c1 c2 c3 c4 c5 c6 c7 c8 d1 d2 d3 d4 d5 d6 d7 d8 e2 e3 e4 e5 e6 e7 e8 e9 e10 e11 e12"</span></span>
<span id="cb63-110"><a href="#cb63-110" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a3=1</span>
<span id="cb63-111"><a href="#cb63-111" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a4=1</span>
<span id="cb63-112"><a href="#cb63-112" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a5=1</span>
<span id="cb63-113"><a href="#cb63-113" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a6=1</span>
<span id="cb63-114"><a href="#cb63-114" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a7=1</span>
<span id="cb63-115"><a href="#cb63-115" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a8=1</span>
<span id="cb63-116"><a href="#cb63-116" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a9=1</span>
<span id="cb63-117"><a href="#cb63-117" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a10=1</span>
<span id="cb63-118"><a href="#cb63-118" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a11=1</span>
<span id="cb63-119"><a href="#cb63-119" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a12=1</span>
<span id="cb63-120"><a href="#cb63-120" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b2=.1</span>
<span id="cb63-121"><a href="#cb63-121" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b3=.1</span>
<span id="cb63-122"><a href="#cb63-122" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b4=.1</span>
<span id="cb63-123"><a href="#cb63-123" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b5=.1</span>
<span id="cb63-124"><a href="#cb63-124" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b6=.1</span>
<span id="cb63-125"><a href="#cb63-125" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b7=.1</span>
<span id="cb63-126"><a href="#cb63-126" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b8=.1</span>
<span id="cb63-127"><a href="#cb63-127" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b9=.1</span>
<span id="cb63-128"><a href="#cb63-128" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b10=.1</span>
<span id="cb63-129"><a href="#cb63-129" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b11=.1</span>
<span id="cb63-130"><a href="#cb63-130" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b12=.1</span>
<span id="cb63-131"><a href="#cb63-131" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c1=.1</span>
<span id="cb63-132"><a href="#cb63-132" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c2=.1</span>
<span id="cb63-133"><a href="#cb63-133" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c3=.1</span>
<span id="cb63-134"><a href="#cb63-134" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c4=.1</span>
<span id="cb63-135"><a href="#cb63-135" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c5=.1</span>
<span id="cb63-136"><a href="#cb63-136" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c6=.1</span>
<span id="cb63-137"><a href="#cb63-137" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c7=.1</span>
<span id="cb63-138"><a href="#cb63-138" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c8=.1</span>
<span id="cb63-139"><a href="#cb63-139" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d1=.1</span>
<span id="cb63-140"><a href="#cb63-140" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d2=.1</span>
<span id="cb63-141"><a href="#cb63-141" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d3=.1</span>
<span id="cb63-142"><a href="#cb63-142" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d4=.1</span>
<span id="cb63-143"><a href="#cb63-143" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d5=.1</span>
<span id="cb63-144"><a href="#cb63-144" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d6=.1</span>
<span id="cb63-145"><a href="#cb63-145" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d7=.1</span>
<span id="cb63-146"><a href="#cb63-146" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d8=.1</span>
<span id="cb63-147"><a href="#cb63-147" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e2=.1</span>
<span id="cb63-148"><a href="#cb63-148" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e3=.1</span>
<span id="cb63-149"><a href="#cb63-149" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e4=.1</span>
<span id="cb63-150"><a href="#cb63-150" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e5=.1</span>
<span id="cb63-151"><a href="#cb63-151" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e6=.1</span>
<span id="cb63-152"><a href="#cb63-152" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e7=.1</span>
<span id="cb63-153"><a href="#cb63-153" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e8=.1</span>
<span id="cb63-154"><a href="#cb63-154" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e9=.1</span>
<span id="cb63-155"><a href="#cb63-155" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e10=.1</span>
<span id="cb63-156"><a href="#cb63-156" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e11=.1</span>
<span id="cb63-157"><a href="#cb63-157" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e12=.1</span>
<span id="cb63-158"><a href="#cb63-158" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span>
<span id="cb63-159"><a href="#cb63-159" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb63-160"><a href="#cb63-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-161"><a href="#cb63-161" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb63-162"><a href="#cb63-162" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$a8</span>*cyd8+<span class="ot">$a9</span>*cyd9+<span class="ot">$a10</span>*cyd10+<span class="ot">$a11</span>*cyd11+<span class="ot">$a12</span>*cyd12<span class="co">/*</span></span>
<span id="cb63-163"><a href="#cb63-163" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb63-164"><a href="#cb63-164" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$b8</span>*cyd8+<span class="ot">$b9</span>*cyd9+<span class="ot">$b10</span>*cyd10+<span class="ot">$b11</span>*cyd11+<span class="ot">$b12</span>*cyd12<span class="co">/*</span></span>
<span id="cb63-165"><a href="#cb63-165" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb63-166"><a href="#cb63-166" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c8</span>)+<span class="fu">exp</span>(<span class="ot">$e2</span>*tyd2+<span class="ot">$e3</span>*tyd3+<span class="ot">$e4</span>*tyd4+<span class="ot">$e5</span>*tyd5+<span class="ot">$e6</span>*tyd6+<span class="ot">$e7</span>*tyd7<span class="co">/*</span></span>
<span id="cb63-167"><a href="#cb63-167" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$e8</span>*tyd8+<span class="ot">$e9</span>*tyd9+<span class="ot">$e10</span>*tyd10+<span class="ot">$e11</span>*tyd11+<span class="ot">$e12</span>*tyd12<span class="co">/*</span></span>
<span id="cb63-168"><a href="#cb63-168" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb63-169"><a href="#cb63-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-170"><a href="#cb63-170" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb63-171"><a href="#cb63-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-172"><a href="#cb63-172" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> ct_1 price</span>
<span id="cb63-173"><a href="#cb63-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-174"><a href="#cb63-174" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*cyd2+_b[b3]*cyd3+_b[b4]*cyd4+_b[b5]*cyd5+_b[b6]*cyd6+_b[b7]*cyd7<span class="co">/*</span></span>
<span id="cb63-175"><a href="#cb63-175" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[b8]*cyd8+_b[b9]*cyd9+_b[b10]*cyd10+_b[b11]*cyd11+_b[b12]*cyd12<span class="co">/*</span></span>
<span id="cb63-176"><a href="#cb63-176" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*hp_c+_b[c5]*tran_c+_b[c6]*ps_c<span class="co">/*</span></span>
<span id="cb63-177"><a href="#cb63-177" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c7]*ac_c+_b[c8])</span>
<span id="cb63-178"><a href="#cb63-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-179"><a href="#cb63-179" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> winv=1/<span class="fu">exp</span>(_b[e2]*tyd2+_b[e3]*tyd3+_b[e4]*tyd4+_b[e5]*tyd5+_b[e6]*tyd6<span class="co">/*</span></span>
<span id="cb63-180"><a href="#cb63-180" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[e7]*tyd7+_b[e8]*tyd8+_b[e9]*tyd9+_b[e10]*tyd10+_b[e11]*tyd11+_b[e12]*tyd12<span class="co">/*</span></span>
<span id="cb63-181"><a href="#cb63-181" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*hp_t<span class="co">/*</span></span>
<span id="cb63-182"><a href="#cb63-182" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t+_b[d8]) <span class="kw">if</span> ve==2</span>
<span id="cb63-183"><a href="#cb63-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-184"><a href="#cb63-184" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nprice=price*winv</span>
<span id="cb63-185"><a href="#cb63-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-186"><a href="#cb63-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-187"><a href="#cb63-187" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlct_2</span>
<span id="cb63-188"><a href="#cb63-188" aria-hidden="true" tabindex="-1"></a><span class="kw">version</span> 7.0</span>
<span id="cb63-189"><a href="#cb63-189" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb63-190"><a href="#cb63-190" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 a8 a9 a10 a11 a12 b2 b3 b4 b5 b6 b7 b8 b9 b10 b11 b12 c1 c2 c3 c4 c5 c6 c7 c8 d1 d2 d3 d4 d5 d6 d7 d8 e2 e3 e4 e5 e6 e7 e8 e9 e10 e11 e12"</span></span>
<span id="cb63-191"><a href="#cb63-191" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a3=1</span>
<span id="cb63-192"><a href="#cb63-192" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a4=1</span>
<span id="cb63-193"><a href="#cb63-193" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a5=1</span>
<span id="cb63-194"><a href="#cb63-194" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a6=1</span>
<span id="cb63-195"><a href="#cb63-195" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a7=1</span>
<span id="cb63-196"><a href="#cb63-196" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a8=1</span>
<span id="cb63-197"><a href="#cb63-197" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a9=1</span>
<span id="cb63-198"><a href="#cb63-198" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a10=1</span>
<span id="cb63-199"><a href="#cb63-199" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a11=1</span>
<span id="cb63-200"><a href="#cb63-200" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a12=1</span>
<span id="cb63-201"><a href="#cb63-201" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b2=.1</span>
<span id="cb63-202"><a href="#cb63-202" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b3=.1</span>
<span id="cb63-203"><a href="#cb63-203" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b4=.1</span>
<span id="cb63-204"><a href="#cb63-204" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b5=.1</span>
<span id="cb63-205"><a href="#cb63-205" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b6=.1</span>
<span id="cb63-206"><a href="#cb63-206" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b7=.1</span>
<span id="cb63-207"><a href="#cb63-207" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b8=.1</span>
<span id="cb63-208"><a href="#cb63-208" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b9=.1</span>
<span id="cb63-209"><a href="#cb63-209" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b10=.1</span>
<span id="cb63-210"><a href="#cb63-210" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b11=.1</span>
<span id="cb63-211"><a href="#cb63-211" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b12=.1</span>
<span id="cb63-212"><a href="#cb63-212" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c1=.1</span>
<span id="cb63-213"><a href="#cb63-213" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c2=.1</span>
<span id="cb63-214"><a href="#cb63-214" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c3=.1</span>
<span id="cb63-215"><a href="#cb63-215" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c4=.1</span>
<span id="cb63-216"><a href="#cb63-216" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c5=.1</span>
<span id="cb63-217"><a href="#cb63-217" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c6=.1</span>
<span id="cb63-218"><a href="#cb63-218" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c7=.1</span>
<span id="cb63-219"><a href="#cb63-219" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c8=.1</span>
<span id="cb63-220"><a href="#cb63-220" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d1=.1</span>
<span id="cb63-221"><a href="#cb63-221" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d2=.1</span>
<span id="cb63-222"><a href="#cb63-222" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d3=.1</span>
<span id="cb63-223"><a href="#cb63-223" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d4=.1</span>
<span id="cb63-224"><a href="#cb63-224" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d5=.1</span>
<span id="cb63-225"><a href="#cb63-225" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d6=.1</span>
<span id="cb63-226"><a href="#cb63-226" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d7=.1</span>
<span id="cb63-227"><a href="#cb63-227" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d8=.1</span>
<span id="cb63-228"><a href="#cb63-228" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e2=.1</span>
<span id="cb63-229"><a href="#cb63-229" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e3=.1</span>
<span id="cb63-230"><a href="#cb63-230" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e4=.1</span>
<span id="cb63-231"><a href="#cb63-231" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e5=.1</span>
<span id="cb63-232"><a href="#cb63-232" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e6=.1</span>
<span id="cb63-233"><a href="#cb63-233" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e7=.1</span>
<span id="cb63-234"><a href="#cb63-234" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e8=.1</span>
<span id="cb63-235"><a href="#cb63-235" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e9=.1</span>
<span id="cb63-236"><a href="#cb63-236" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e10=.1</span>
<span id="cb63-237"><a href="#cb63-237" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e11=.1</span>
<span id="cb63-238"><a href="#cb63-238" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e12=.1</span>
<span id="cb63-239"><a href="#cb63-239" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span>
<span id="cb63-240"><a href="#cb63-240" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb63-241"><a href="#cb63-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-242"><a href="#cb63-242" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">`1'</span>=winv*(<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb63-243"><a href="#cb63-243" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$a8</span>*cyd8+<span class="ot">$a9</span>*cyd9+<span class="ot">$a10</span>*cyd10+<span class="ot">$a11</span>*cyd11+<span class="ot">$a12</span>*cyd12)<span class="co">/*</span></span>
<span id="cb63-244"><a href="#cb63-244" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb63-245"><a href="#cb63-245" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$b8</span>*cyd8+<span class="ot">$b9</span>*cyd9+<span class="ot">$b10</span>*cyd10+<span class="ot">$b11</span>*cyd11+<span class="ot">$b12</span>*cyd12<span class="co">/*</span></span>
<span id="cb63-246"><a href="#cb63-246" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb63-247"><a href="#cb63-247" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c8</span>)+winv*<span class="fu">exp</span>(<span class="ot">$e2</span>*tyd2+<span class="ot">$e3</span>*tyd3+<span class="ot">$e4</span>*tyd4+<span class="ot">$e5</span>*tyd5+<span class="ot">$e6</span>*tyd6+<span class="ot">$e7</span>*tyd7<span class="co">/*</span></span>
<span id="cb63-248"><a href="#cb63-248" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$e8</span>*tyd8+<span class="ot">$e9</span>*tyd9+<span class="ot">$e10</span>*tyd10+<span class="ot">$e11</span>*tyd11+<span class="ot">$e12</span>*tyd12<span class="co">/*</span></span>
<span id="cb63-249"><a href="#cb63-249" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb63-250"><a href="#cb63-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-251"><a href="#cb63-251" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb63-252"><a href="#cb63-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-253"><a href="#cb63-253" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> ct_2 nprice</span>
<span id="cb63-254"><a href="#cb63-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-255"><a href="#cb63-255" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb63-256"><a href="#cb63-256" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb63-257"><a href="#cb63-257" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\system_nocon.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>&gt; er-8\system_nocon.<span class="fu">log</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:   6 Jul 2024, 23:01:56</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>. <span class="kw">set</span> <span class="dv">matsize</span> 400</span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a>Current <span class="dv">memory</span> allocation</span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>                    current                                 <span class="dv">memory</span> usage</span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>    settable          <span class="ot">value</span>     description                 (1M = 1024k)</span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>    --------------------------------------------------------------------</span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> <span class="dv">maxvar</span>         5000     <span class="fu">max</span>. variables allowed           1.909M</span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> <span class="dv">memory</span>           50M    <span class="fu">max</span>. <span class="kw">data</span> space                 50.000M</span>
<span id="cb64-23"><a href="#cb64-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> <span class="dv">matsize</span>         400     <span class="fu">max</span>. RHS vars <span class="kw">in</span> models          1.254M</span>
<span id="cb64-24"><a href="#cb64-24" aria-hidden="true" tabindex="-1"></a>                                                            -----------</span>
<span id="cb64-25"><a href="#cb64-25" aria-hidden="true" tabindex="-1"></a>                                                                53.163M</span>
<span id="cb64-26"><a href="#cb64-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-27"><a href="#cb64-27" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-28"><a href="#cb64-28" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tr</span>
<span id="cb64-29"><a href="#cb64-29" aria-hidden="true" tabindex="-1"></a>&gt; uck_7990,<span class="kw">clear</span></span>
<span id="cb64-30"><a href="#cb64-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-31"><a href="#cb64-31" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> ve=2</span>
<span id="cb64-32"><a href="#cb64-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-33"><a href="#cb64-33" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wdth wdth_t</span>
<span id="cb64-34"><a href="#cb64-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-35"><a href="#cb64-35" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hght hght_t</span>
<span id="cb64-36"><a href="#cb64-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-37"><a href="#cb64-37" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">weight</span> wght_t</span>
<span id="cb64-38"><a href="#cb64-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-39"><a href="#cb64-39" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hp hp_t</span>
<span id="cb64-40"><a href="#cb64-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-41"><a href="#cb64-41" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> four four_t</span>
<span id="cb64-42"><a href="#cb64-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-43"><a href="#cb64-43" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> tran tran_t</span>
<span id="cb64-44"><a href="#cb64-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-45"><a href="#cb64-45" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> ps ps_t</span>
<span id="cb64-46"><a href="#cb64-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-47"><a href="#cb64-47" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">ac</span> ac_t</span>
<span id="cb64-48"><a href="#cb64-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-49"><a href="#cb64-49" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-50"><a href="#cb64-50" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\t</span>
<span id="cb64-51"><a href="#cb64-51" aria-hidden="true" tabindex="-1"></a>&gt; ruck_temp,<span class="kw">replace</span></span>
<span id="cb64-52"><a href="#cb64-52" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tru</span>
<span id="cb64-53"><a href="#cb64-53" aria-hidden="true" tabindex="-1"></a>&gt; ck_temp.dta saved</span>
<span id="cb64-54"><a href="#cb64-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-55"><a href="#cb64-55" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-56"><a href="#cb64-56" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="kw">ca</span></span>
<span id="cb64-57"><a href="#cb64-57" aria-hidden="true" tabindex="-1"></a>&gt; r_7990,<span class="kw">clear</span></span>
<span id="cb64-58"><a href="#cb64-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-59"><a href="#cb64-59" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> ve=1</span>
<span id="cb64-60"><a href="#cb64-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-61"><a href="#cb64-61" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wdth wdth_c</span>
<span id="cb64-62"><a href="#cb64-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-63"><a href="#cb64-63" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hght hght_c</span>
<span id="cb64-64"><a href="#cb64-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-65"><a href="#cb64-65" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wght wght_c</span>
<span id="cb64-66"><a href="#cb64-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-67"><a href="#cb64-67" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hp hp_c</span>
<span id="cb64-68"><a href="#cb64-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-69"><a href="#cb64-69" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> four four_c</span>
<span id="cb64-70"><a href="#cb64-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-71"><a href="#cb64-71" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> tran tran_c</span>
<span id="cb64-72"><a href="#cb64-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-73"><a href="#cb64-73" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> ps ps_c</span>
<span id="cb64-74"><a href="#cb64-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-75"><a href="#cb64-75" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">ac</span> ac_c</span>
<span id="cb64-76"><a href="#cb64-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-77"><a href="#cb64-77" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-78"><a href="#cb64-78" aria-hidden="true" tabindex="-1"></a>. <span class="kw">append</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Cha</span>
<span id="cb64-79"><a href="#cb64-79" aria-hidden="true" tabindex="-1"></a>&gt; pter-8\truck_temp</span>
<span id="cb64-80"><a href="#cb64-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-81"><a href="#cb64-81" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-82"><a href="#cb64-82" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wdth_c=0 <span class="kw">if</span> wdth_c==.</span>
<span id="cb64-83"><a href="#cb64-83" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb64-84"><a href="#cb64-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-85"><a href="#cb64-85" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hght_c=0 <span class="kw">if</span> hght_c==.</span>
<span id="cb64-86"><a href="#cb64-86" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb64-87"><a href="#cb64-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-88"><a href="#cb64-88" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wght_c=0 <span class="kw">if</span> wght_c==.</span>
<span id="cb64-89"><a href="#cb64-89" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb64-90"><a href="#cb64-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-91"><a href="#cb64-91" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hp_c=0 <span class="kw">if</span> hp_c==.</span>
<span id="cb64-92"><a href="#cb64-92" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb64-93"><a href="#cb64-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-94"><a href="#cb64-94" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> four_c=0 <span class="kw">if</span> four_c==.</span>
<span id="cb64-95"><a href="#cb64-95" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb64-96"><a href="#cb64-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-97"><a href="#cb64-97" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tran_c=0 <span class="kw">if</span> tran_c==.</span>
<span id="cb64-98"><a href="#cb64-98" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb64-99"><a href="#cb64-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-100"><a href="#cb64-100" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ps_c=0 <span class="kw">if</span> ps_c==.</span>
<span id="cb64-101"><a href="#cb64-101" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb64-102"><a href="#cb64-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-103"><a href="#cb64-103" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ac_c=0 <span class="kw">if</span> ac_c==.</span>
<span id="cb64-104"><a href="#cb64-104" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb64-105"><a href="#cb64-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-106"><a href="#cb64-106" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wdth_t=0 <span class="kw">if</span> wdth_t==.</span>
<span id="cb64-107"><a href="#cb64-107" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb64-108"><a href="#cb64-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-109"><a href="#cb64-109" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hght_t=0 <span class="kw">if</span> hght_t==.</span>
<span id="cb64-110"><a href="#cb64-110" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb64-111"><a href="#cb64-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-112"><a href="#cb64-112" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wght_t=0 <span class="kw">if</span> wght_t==.</span>
<span id="cb64-113"><a href="#cb64-113" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb64-114"><a href="#cb64-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-115"><a href="#cb64-115" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hp_t=0 <span class="kw">if</span> hp_t==.</span>
<span id="cb64-116"><a href="#cb64-116" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb64-117"><a href="#cb64-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-118"><a href="#cb64-118" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> four_t=0 <span class="kw">if</span> four_t==.</span>
<span id="cb64-119"><a href="#cb64-119" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb64-120"><a href="#cb64-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-121"><a href="#cb64-121" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tran_t=0 <span class="kw">if</span> tran_t==.</span>
<span id="cb64-122"><a href="#cb64-122" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb64-123"><a href="#cb64-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-124"><a href="#cb64-124" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ps_t=0 <span class="kw">if</span> ps_t==.</span>
<span id="cb64-125"><a href="#cb64-125" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb64-126"><a href="#cb64-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-127"><a href="#cb64-127" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ac_t=0 <span class="kw">if</span> ac_t==.</span>
<span id="cb64-128"><a href="#cb64-128" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb64-129"><a href="#cb64-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-130"><a href="#cb64-130" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-131"><a href="#cb64-131" aria-hidden="true" tabindex="-1"></a>. <span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb64-132"><a href="#cb64-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-133"><a href="#cb64-133" aria-hidden="true" tabindex="-1"></a>       <span class="fu">year</span> |      Freq.     Percent        Cum.</span>
<span id="cb64-134"><a href="#cb64-134" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb64-135"><a href="#cb64-135" aria-hidden="true" tabindex="-1"></a>         79 |         31        7.67        7.67</span>
<span id="cb64-136"><a href="#cb64-136" aria-hidden="true" tabindex="-1"></a>         80 |         34        8.42       16.09</span>
<span id="cb64-137"><a href="#cb64-137" aria-hidden="true" tabindex="-1"></a>         81 |         35        8.66       24.75</span>
<span id="cb64-138"><a href="#cb64-138" aria-hidden="true" tabindex="-1"></a>         82 |         35        8.66       33.42</span>
<span id="cb64-139"><a href="#cb64-139" aria-hidden="true" tabindex="-1"></a>         83 |         36        8.91       42.33</span>
<span id="cb64-140"><a href="#cb64-140" aria-hidden="true" tabindex="-1"></a>         84 |         40        9.90       52.23</span>
<span id="cb64-141"><a href="#cb64-141" aria-hidden="true" tabindex="-1"></a>         85 |         43       10.64       62.87</span>
<span id="cb64-142"><a href="#cb64-142" aria-hidden="true" tabindex="-1"></a>         86 |         33        8.17       71.04</span>
<span id="cb64-143"><a href="#cb64-143" aria-hidden="true" tabindex="-1"></a>         87 |         35        8.66       79.70</span>
<span id="cb64-144"><a href="#cb64-144" aria-hidden="true" tabindex="-1"></a>         88 |         30        7.43       87.13</span>
<span id="cb64-145"><a href="#cb64-145" aria-hidden="true" tabindex="-1"></a>         89 |         26        6.44       93.56</span>
<span id="cb64-146"><a href="#cb64-146" aria-hidden="true" tabindex="-1"></a>         90 |         26        6.44      100.00</span>
<span id="cb64-147"><a href="#cb64-147" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb64-148"><a href="#cb64-148" aria-hidden="true" tabindex="-1"></a>      Total |        404      100.00</span>
<span id="cb64-149"><a href="#cb64-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-150"><a href="#cb64-150" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-151"><a href="#cb64-151" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd2=yd2</span>
<span id="cb64-152"><a href="#cb64-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-153"><a href="#cb64-153" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd2=yd2</span>
<span id="cb64-154"><a href="#cb64-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-155"><a href="#cb64-155" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd2=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb64-156"><a href="#cb64-156" aria-hidden="true" tabindex="-1"></a>(8 <span class="fu">real</span> changes made)</span>
<span id="cb64-157"><a href="#cb64-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-158"><a href="#cb64-158" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd2=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb64-159"><a href="#cb64-159" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb64-160"><a href="#cb64-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-161"><a href="#cb64-161" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-162"><a href="#cb64-162" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd3=yd3</span>
<span id="cb64-163"><a href="#cb64-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-164"><a href="#cb64-164" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd3=yd3</span>
<span id="cb64-165"><a href="#cb64-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-166"><a href="#cb64-166" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd3=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb64-167"><a href="#cb64-167" aria-hidden="true" tabindex="-1"></a>(9 <span class="fu">real</span> changes made)</span>
<span id="cb64-168"><a href="#cb64-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-169"><a href="#cb64-169" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd3=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb64-170"><a href="#cb64-170" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb64-171"><a href="#cb64-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-172"><a href="#cb64-172" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-173"><a href="#cb64-173" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd4=yd4</span>
<span id="cb64-174"><a href="#cb64-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-175"><a href="#cb64-175" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd4=yd4</span>
<span id="cb64-176"><a href="#cb64-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-177"><a href="#cb64-177" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd4=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb64-178"><a href="#cb64-178" aria-hidden="true" tabindex="-1"></a>(9 <span class="fu">real</span> changes made)</span>
<span id="cb64-179"><a href="#cb64-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-180"><a href="#cb64-180" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd4=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb64-181"><a href="#cb64-181" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb64-182"><a href="#cb64-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-183"><a href="#cb64-183" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-184"><a href="#cb64-184" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd5=yd5</span>
<span id="cb64-185"><a href="#cb64-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-186"><a href="#cb64-186" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd5=yd5</span>
<span id="cb64-187"><a href="#cb64-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-188"><a href="#cb64-188" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd5=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb64-189"><a href="#cb64-189" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb64-190"><a href="#cb64-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-191"><a href="#cb64-191" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd5=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb64-192"><a href="#cb64-192" aria-hidden="true" tabindex="-1"></a>(29 <span class="fu">real</span> changes made)</span>
<span id="cb64-193"><a href="#cb64-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-194"><a href="#cb64-194" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-195"><a href="#cb64-195" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd6=yd6</span>
<span id="cb64-196"><a href="#cb64-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-197"><a href="#cb64-197" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd6=yd6</span>
<span id="cb64-198"><a href="#cb64-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-199"><a href="#cb64-199" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd6=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb64-200"><a href="#cb64-200" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb64-201"><a href="#cb64-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-202"><a href="#cb64-202" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd6=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb64-203"><a href="#cb64-203" aria-hidden="true" tabindex="-1"></a>(33 <span class="fu">real</span> changes made)</span>
<span id="cb64-204"><a href="#cb64-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-205"><a href="#cb64-205" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-206"><a href="#cb64-206" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd7=yd7</span>
<span id="cb64-207"><a href="#cb64-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-208"><a href="#cb64-208" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd7=yd7</span>
<span id="cb64-209"><a href="#cb64-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-210"><a href="#cb64-210" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd7=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb64-211"><a href="#cb64-211" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb64-212"><a href="#cb64-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-213"><a href="#cb64-213" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd7=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb64-214"><a href="#cb64-214" aria-hidden="true" tabindex="-1"></a>(36 <span class="fu">real</span> changes made)</span>
<span id="cb64-215"><a href="#cb64-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-216"><a href="#cb64-216" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-217"><a href="#cb64-217" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd8=yd8</span>
<span id="cb64-218"><a href="#cb64-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-219"><a href="#cb64-219" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd8=yd8</span>
<span id="cb64-220"><a href="#cb64-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-221"><a href="#cb64-221" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd8=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb64-222"><a href="#cb64-222" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb64-223"><a href="#cb64-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-224"><a href="#cb64-224" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd8=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb64-225"><a href="#cb64-225" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb64-226"><a href="#cb64-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-227"><a href="#cb64-227" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-228"><a href="#cb64-228" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd9=yd9</span>
<span id="cb64-229"><a href="#cb64-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-230"><a href="#cb64-230" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd9=yd9</span>
<span id="cb64-231"><a href="#cb64-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-232"><a href="#cb64-232" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd9=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb64-233"><a href="#cb64-233" aria-hidden="true" tabindex="-1"></a>(6 <span class="fu">real</span> changes made)</span>
<span id="cb64-234"><a href="#cb64-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-235"><a href="#cb64-235" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd9=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb64-236"><a href="#cb64-236" aria-hidden="true" tabindex="-1"></a>(29 <span class="fu">real</span> changes made)</span>
<span id="cb64-237"><a href="#cb64-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-238"><a href="#cb64-238" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-239"><a href="#cb64-239" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd10=yd10</span>
<span id="cb64-240"><a href="#cb64-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-241"><a href="#cb64-241" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd10=yd10</span>
<span id="cb64-242"><a href="#cb64-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-243"><a href="#cb64-243" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd7=10 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb64-244"><a href="#cb64-244" aria-hidden="true" tabindex="-1"></a>(84 <span class="fu">real</span> changes made)</span>
<span id="cb64-245"><a href="#cb64-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-246"><a href="#cb64-246" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd7=10 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb64-247"><a href="#cb64-247" aria-hidden="true" tabindex="-1"></a>(320 <span class="fu">real</span> changes made)</span>
<span id="cb64-248"><a href="#cb64-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-249"><a href="#cb64-249" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-250"><a href="#cb64-250" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd11=yd11</span>
<span id="cb64-251"><a href="#cb64-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-252"><a href="#cb64-252" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd11=yd11</span>
<span id="cb64-253"><a href="#cb64-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-254"><a href="#cb64-254" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd7=11 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb64-255"><a href="#cb64-255" aria-hidden="true" tabindex="-1"></a>(84 <span class="fu">real</span> changes made)</span>
<span id="cb64-256"><a href="#cb64-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-257"><a href="#cb64-257" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd7=11 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb64-258"><a href="#cb64-258" aria-hidden="true" tabindex="-1"></a>(320 <span class="fu">real</span> changes made)</span>
<span id="cb64-259"><a href="#cb64-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-260"><a href="#cb64-260" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-261"><a href="#cb64-261" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd12=yd12</span>
<span id="cb64-262"><a href="#cb64-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-263"><a href="#cb64-263" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd12=yd12</span>
<span id="cb64-264"><a href="#cb64-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-265"><a href="#cb64-265" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd7=12 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb64-266"><a href="#cb64-266" aria-hidden="true" tabindex="-1"></a>(84 <span class="fu">real</span> changes made)</span>
<span id="cb64-267"><a href="#cb64-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-268"><a href="#cb64-268" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd7=12 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb64-269"><a href="#cb64-269" aria-hidden="true" tabindex="-1"></a>(320 <span class="fu">real</span> changes made)</span>
<span id="cb64-270"><a href="#cb64-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-271"><a href="#cb64-271" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-272"><a href="#cb64-272" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlct_1</span>
<span id="cb64-273"><a href="#cb64-273" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb64-274"><a href="#cb64-274" aria-hidden="true" tabindex="-1"></a>  2. <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb64-275"><a href="#cb64-275" aria-hidden="true" tabindex="-1"></a>  3. <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 a8 a9 a10 a11 a12 b2 b3 b4 b5 b6 b7 b8 b9 b10 b11 </span></span>
<span id="cb64-276"><a href="#cb64-276" aria-hidden="true" tabindex="-1"></a><span class="st">&gt; b12 c1 c2 c3 c4 c5 c6 c7 c8 d1 d2 d3 d4 d5 d6 d7 d8 e2 e3 e4 e5 e6 e7 e8 e9 e10 </span></span>
<span id="cb64-277"><a href="#cb64-277" aria-hidden="true" tabindex="-1"></a><span class="st">&gt; e11 e12"</span></span>
<span id="cb64-278"><a href="#cb64-278" aria-hidden="true" tabindex="-1"></a>  4. <span class="kw">global</span> a3=1</span>
<span id="cb64-279"><a href="#cb64-279" aria-hidden="true" tabindex="-1"></a>  5. <span class="kw">global</span> a4=1</span>
<span id="cb64-280"><a href="#cb64-280" aria-hidden="true" tabindex="-1"></a>  6. <span class="kw">global</span> a5=1</span>
<span id="cb64-281"><a href="#cb64-281" aria-hidden="true" tabindex="-1"></a>  7. <span class="kw">global</span> a6=1</span>
<span id="cb64-282"><a href="#cb64-282" aria-hidden="true" tabindex="-1"></a>  8. <span class="kw">global</span> a7=1</span>
<span id="cb64-283"><a href="#cb64-283" aria-hidden="true" tabindex="-1"></a>  9. <span class="kw">global</span> a8=1</span>
<span id="cb64-284"><a href="#cb64-284" aria-hidden="true" tabindex="-1"></a> 10. <span class="kw">global</span> a9=1</span>
<span id="cb64-285"><a href="#cb64-285" aria-hidden="true" tabindex="-1"></a> 11. <span class="kw">global</span> a10=1</span>
<span id="cb64-286"><a href="#cb64-286" aria-hidden="true" tabindex="-1"></a> 12. <span class="kw">global</span> a11=1</span>
<span id="cb64-287"><a href="#cb64-287" aria-hidden="true" tabindex="-1"></a> 13. <span class="kw">global</span> a12=1</span>
<span id="cb64-288"><a href="#cb64-288" aria-hidden="true" tabindex="-1"></a> 14. <span class="kw">global</span> b2=.1</span>
<span id="cb64-289"><a href="#cb64-289" aria-hidden="true" tabindex="-1"></a> 15. <span class="kw">global</span> b3=.1</span>
<span id="cb64-290"><a href="#cb64-290" aria-hidden="true" tabindex="-1"></a> 16. <span class="kw">global</span> b4=.1</span>
<span id="cb64-291"><a href="#cb64-291" aria-hidden="true" tabindex="-1"></a> 17. <span class="kw">global</span> b5=.1</span>
<span id="cb64-292"><a href="#cb64-292" aria-hidden="true" tabindex="-1"></a> 18. <span class="kw">global</span> b6=.1</span>
<span id="cb64-293"><a href="#cb64-293" aria-hidden="true" tabindex="-1"></a> 19. <span class="kw">global</span> b7=.1</span>
<span id="cb64-294"><a href="#cb64-294" aria-hidden="true" tabindex="-1"></a> 20. <span class="kw">global</span> b8=.1</span>
<span id="cb64-295"><a href="#cb64-295" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">global</span> b9=.1</span>
<span id="cb64-296"><a href="#cb64-296" aria-hidden="true" tabindex="-1"></a> 22. <span class="kw">global</span> b10=.1</span>
<span id="cb64-297"><a href="#cb64-297" aria-hidden="true" tabindex="-1"></a> 23. <span class="kw">global</span> b11=.1</span>
<span id="cb64-298"><a href="#cb64-298" aria-hidden="true" tabindex="-1"></a> 24. <span class="kw">global</span> b12=.1</span>
<span id="cb64-299"><a href="#cb64-299" aria-hidden="true" tabindex="-1"></a> 25. <span class="kw">global</span> c1=.1</span>
<span id="cb64-300"><a href="#cb64-300" aria-hidden="true" tabindex="-1"></a> 26. <span class="kw">global</span> c2=.1</span>
<span id="cb64-301"><a href="#cb64-301" aria-hidden="true" tabindex="-1"></a> 27. <span class="kw">global</span> c3=.1</span>
<span id="cb64-302"><a href="#cb64-302" aria-hidden="true" tabindex="-1"></a> 28. <span class="kw">global</span> c4=.1</span>
<span id="cb64-303"><a href="#cb64-303" aria-hidden="true" tabindex="-1"></a> 29. <span class="kw">global</span> c5=.1</span>
<span id="cb64-304"><a href="#cb64-304" aria-hidden="true" tabindex="-1"></a> 30. <span class="kw">global</span> c6=.1</span>
<span id="cb64-305"><a href="#cb64-305" aria-hidden="true" tabindex="-1"></a> 31. <span class="kw">global</span> c7=.1</span>
<span id="cb64-306"><a href="#cb64-306" aria-hidden="true" tabindex="-1"></a> 32. <span class="kw">global</span> c8=.1</span>
<span id="cb64-307"><a href="#cb64-307" aria-hidden="true" tabindex="-1"></a> 33. <span class="kw">global</span> d1=.1</span>
<span id="cb64-308"><a href="#cb64-308" aria-hidden="true" tabindex="-1"></a> 34. <span class="kw">global</span> d2=.1</span>
<span id="cb64-309"><a href="#cb64-309" aria-hidden="true" tabindex="-1"></a> 35. <span class="kw">global</span> d3=.1</span>
<span id="cb64-310"><a href="#cb64-310" aria-hidden="true" tabindex="-1"></a> 36. <span class="kw">global</span> d4=.1</span>
<span id="cb64-311"><a href="#cb64-311" aria-hidden="true" tabindex="-1"></a> 37. <span class="kw">global</span> d5=.1</span>
<span id="cb64-312"><a href="#cb64-312" aria-hidden="true" tabindex="-1"></a> 38. <span class="kw">global</span> d6=.1</span>
<span id="cb64-313"><a href="#cb64-313" aria-hidden="true" tabindex="-1"></a> 39. <span class="kw">global</span> d7=.1</span>
<span id="cb64-314"><a href="#cb64-314" aria-hidden="true" tabindex="-1"></a> 40. <span class="kw">global</span> d8=.1</span>
<span id="cb64-315"><a href="#cb64-315" aria-hidden="true" tabindex="-1"></a> 41. <span class="kw">global</span> e2=.1</span>
<span id="cb64-316"><a href="#cb64-316" aria-hidden="true" tabindex="-1"></a> 42. <span class="kw">global</span> e3=.1</span>
<span id="cb64-317"><a href="#cb64-317" aria-hidden="true" tabindex="-1"></a> 43. <span class="kw">global</span> e4=.1</span>
<span id="cb64-318"><a href="#cb64-318" aria-hidden="true" tabindex="-1"></a> 44. <span class="kw">global</span> e5=.1</span>
<span id="cb64-319"><a href="#cb64-319" aria-hidden="true" tabindex="-1"></a> 45. <span class="kw">global</span> e6=.1</span>
<span id="cb64-320"><a href="#cb64-320" aria-hidden="true" tabindex="-1"></a> 46. <span class="kw">global</span> e7=.1</span>
<span id="cb64-321"><a href="#cb64-321" aria-hidden="true" tabindex="-1"></a> 47. <span class="kw">global</span> e8=.1</span>
<span id="cb64-322"><a href="#cb64-322" aria-hidden="true" tabindex="-1"></a> 48. <span class="kw">global</span> e9=.1</span>
<span id="cb64-323"><a href="#cb64-323" aria-hidden="true" tabindex="-1"></a> 49. <span class="kw">global</span> e10=.1</span>
<span id="cb64-324"><a href="#cb64-324" aria-hidden="true" tabindex="-1"></a> 50. <span class="kw">global</span> e11=.1</span>
<span id="cb64-325"><a href="#cb64-325" aria-hidden="true" tabindex="-1"></a> 51. <span class="kw">global</span> e12=.1</span>
<span id="cb64-326"><a href="#cb64-326" aria-hidden="true" tabindex="-1"></a> 52. <span class="kw">exit</span></span>
<span id="cb64-327"><a href="#cb64-327" aria-hidden="true" tabindex="-1"></a> 53. }</span>
<span id="cb64-328"><a href="#cb64-328" aria-hidden="true" tabindex="-1"></a> 54. </span>
<span id="cb64-329"><a href="#cb64-329" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb64-330"><a href="#cb64-330" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$a8</span>*cyd8+<span class="ot">$a9</span>*cyd9+<span class="ot">$a10</span>*cyd10+<span class="ot">$a11</span>*cyd11+<span class="ot">$a12</span>*cyd12<span class="co">/*</span></span>
<span id="cb64-331"><a href="#cb64-331" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb64-332"><a href="#cb64-332" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$b8</span>*cyd8+<span class="ot">$b9</span>*cyd9+<span class="ot">$b10</span>*cyd10+<span class="ot">$b11</span>*cyd11+<span class="ot">$b12</span>*cyd12<span class="co">/*</span></span>
<span id="cb64-333"><a href="#cb64-333" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb64-334"><a href="#cb64-334" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c8</span>)+<span class="fu">exp</span>(<span class="ot">$e2</span>*tyd2+<span class="ot">$e3</span>*tyd3+<span class="ot">$e4</span>*tyd4+<span class="ot">$e5</span>*tyd5+<span class="ot">$e6</span>*tyd6+<span class="ot">$e7</span>*tyd7<span class="co">/*</span></span>
<span id="cb64-335"><a href="#cb64-335" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$e8</span>*tyd8+<span class="ot">$e9</span>*tyd9+<span class="ot">$e10</span>*tyd10+<span class="ot">$e11</span>*tyd11+<span class="ot">$e12</span>*tyd12<span class="co">/*</span></span>
<span id="cb64-336"><a href="#cb64-336" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb64-337"><a href="#cb64-337" aria-hidden="true" tabindex="-1"></a> 55. </span>
<span id="cb64-338"><a href="#cb64-338" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb64-339"><a href="#cb64-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-340"><a href="#cb64-340" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-341"><a href="#cb64-341" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> ct_1 price</span>
<span id="cb64-342"><a href="#cb64-342" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 404)</span>
<span id="cb64-343"><a href="#cb64-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-344"><a href="#cb64-344" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  3.68e+10</span>
<span id="cb64-345"><a href="#cb64-345" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb64-346"><a href="#cb64-346" aria-hidden="true" tabindex="-1"></a>Iteration 24:  residual SS =  3.13e+08</span>
<span id="cb64-347"><a href="#cb64-347" aria-hidden="true" tabindex="-1"></a>Iteration 25:  residual SS =  3.13e+08</span>
<span id="cb64-348"><a href="#cb64-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-349"><a href="#cb64-349" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       404</span>
<span id="cb64-350"><a href="#cb64-350" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 46,   357) =    147.07</span>
<span id="cb64-351"><a href="#cb64-351" aria-hidden="true" tabindex="-1"></a>       Model |  5.9297e+09    46   128906902         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb64-352"><a href="#cb64-352" aria-hidden="true" tabindex="-1"></a>    Residual |   312918865   357  876523.431         R-squared     =    0.9499</span>
<span id="cb64-353"><a href="#cb64-353" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9434</span>
<span id="cb64-354"><a href="#cb64-354" aria-hidden="true" tabindex="-1"></a>       Total |  6.2426e+09   403  15490412.8         Root MSE      =  936.2283</span>
<span id="cb64-355"><a href="#cb64-355" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     =  6624.758</span>
<span id="cb64-356"><a href="#cb64-356" aria-hidden="true" tabindex="-1"></a>(ct_1)</span>
<span id="cb64-357"><a href="#cb64-357" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb64-358"><a href="#cb64-358" aria-hidden="true" tabindex="-1"></a>       price |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb64-359"><a href="#cb64-359" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb64-360"><a href="#cb64-360" aria-hidden="true" tabindex="-1"></a>          a3 |   277.0869   551.2618     0.50   0.616    -807.0417    1361.215</span>
<span id="cb64-361"><a href="#cb64-361" aria-hidden="true" tabindex="-1"></a>          a4 |   21.66828   535.0463     0.04   0.968    -1030.571    1073.907</span>
<span id="cb64-362"><a href="#cb64-362" aria-hidden="true" tabindex="-1"></a>          a5 |   147.2889   494.2067     0.30   0.766    -824.6333    1119.211</span>
<span id="cb64-363"><a href="#cb64-363" aria-hidden="true" tabindex="-1"></a>          a6 |    556.957   484.3219     1.15   0.251    -395.5256     1509.44</span>
<span id="cb64-364"><a href="#cb64-364" aria-hidden="true" tabindex="-1"></a>          a7 |  -7.057291   101.5543    -0.07   0.945    -206.7772    192.6626</span>
<span id="cb64-365"><a href="#cb64-365" aria-hidden="true" tabindex="-1"></a>          a8 |   771.0952   521.6698     1.48   0.140     -254.837    1797.027</span>
<span id="cb64-366"><a href="#cb64-366" aria-hidden="true" tabindex="-1"></a>          a9 |    1191.93   517.0276     2.31   0.022     175.1272    2208.733</span>
<span id="cb64-367"><a href="#cb64-367" aria-hidden="true" tabindex="-1"></a>         a10 |   657.8229   728.4691     0.90   0.367    -774.8072    2090.453</span>
<span id="cb64-368"><a href="#cb64-368" aria-hidden="true" tabindex="-1"></a>         a11 |  -450.8028   817.0406    -0.55   0.581     -2057.62    1156.015</span>
<span id="cb64-369"><a href="#cb64-369" aria-hidden="true" tabindex="-1"></a>         a12 |  -433.4064   772.5761    -0.56   0.575    -1952.779    1085.966</span>
<span id="cb64-370"><a href="#cb64-370" aria-hidden="true" tabindex="-1"></a>          b2 |  -.0841009     .04192    -2.01   0.046    -.1665421   -.0016597</span>
<span id="cb64-371"><a href="#cb64-371" aria-hidden="true" tabindex="-1"></a>          b3 |  -.0056866   .0864787    -0.07   0.948    -.1757583    .1643851</span>
<span id="cb64-372"><a href="#cb64-372" aria-hidden="true" tabindex="-1"></a>          b4 |   .0872793   .0747481     1.17   0.244    -.0597227    .2342813</span>
<span id="cb64-373"><a href="#cb64-373" aria-hidden="true" tabindex="-1"></a>          b5 |   .0666161   .0692594     0.96   0.337    -.0695916    .2028239</span>
<span id="cb64-374"><a href="#cb64-374" aria-hidden="true" tabindex="-1"></a>          b6 |   .0749652   .0668452     1.12   0.263    -.0564948    .2064251</span>
<span id="cb64-375"><a href="#cb64-375" aria-hidden="true" tabindex="-1"></a>          b7 |   .1526226   .0314581     4.85   0.000     .0907562    .2144891</span>
<span id="cb64-376"><a href="#cb64-376" aria-hidden="true" tabindex="-1"></a>          b8 |   .1437711    .065557     2.19   0.029     .0148446    .2726975</span>
<span id="cb64-377"><a href="#cb64-377" aria-hidden="true" tabindex="-1"></a>          b9 |   .1988908    .062616     3.18   0.002     .0757482    .3220335</span>
<span id="cb64-378"><a href="#cb64-378" aria-hidden="true" tabindex="-1"></a>         b10 |   .2857005   .0719646     3.97   0.000     .1441727    .4272282</span>
<span id="cb64-379"><a href="#cb64-379" aria-hidden="true" tabindex="-1"></a>         b11 |   .4104976   .0690287     5.95   0.000     .2747436    .5462515</span>
<span id="cb64-380"><a href="#cb64-380" aria-hidden="true" tabindex="-1"></a>         b12 |   .3679665   .0684655     5.37   0.000     .2333201    .5026129</span>
<span id="cb64-381"><a href="#cb64-381" aria-hidden="true" tabindex="-1"></a>          c1 |   .4662111   .0865907     5.38   0.000     .2959191    .6365031</span>
<span id="cb64-382"><a href="#cb64-382" aria-hidden="true" tabindex="-1"></a>          c2 |   .5300141   .0640388     8.28   0.000     .4040735    .6559547</span>
<span id="cb64-383"><a href="#cb64-383" aria-hidden="true" tabindex="-1"></a>          c3 |  -.3625191   .0443666    -8.17   0.000    -.4497719   -.2752663</span>
<span id="cb64-384"><a href="#cb64-384" aria-hidden="true" tabindex="-1"></a>          c4 |   .2502107   .0387283     6.46   0.000     .1740464     .326375</span>
<span id="cb64-385"><a href="#cb64-385" aria-hidden="true" tabindex="-1"></a>          c5 |    .063748   .0203705     3.13   0.002     .0236867    .1038093</span>
<span id="cb64-386"><a href="#cb64-386" aria-hidden="true" tabindex="-1"></a>          c6 |    .108309   .0205511     5.27   0.000     .0678925    .1487255</span>
<span id="cb64-387"><a href="#cb64-387" aria-hidden="true" tabindex="-1"></a>          c7 |   .1667295   .0205709     8.11   0.000     .1262742    .2071848</span>
<span id="cb64-388"><a href="#cb64-388" aria-hidden="true" tabindex="-1"></a>          c8 |   6.664738   .3769454    17.68   0.000     5.923426    7.406051</span>
<span id="cb64-389"><a href="#cb64-389" aria-hidden="true" tabindex="-1"></a>          d1 |   .4827909   .0948538     5.09   0.000     .2962486    .6693333</span>
<span id="cb64-390"><a href="#cb64-390" aria-hidden="true" tabindex="-1"></a>          d2 |   .6237576   .3207663     1.94   0.053    -.0070714    1.254587</span>
<span id="cb64-391"><a href="#cb64-391" aria-hidden="true" tabindex="-1"></a>          d3 |  -.1758063   .0807852    -2.18   0.030    -.3346811   -.0169316</span>
<span id="cb64-392"><a href="#cb64-392" aria-hidden="true" tabindex="-1"></a>          d4 |   .4714717   .1961516     2.40   0.017     .0857138    .8572296</span>
<span id="cb64-393"><a href="#cb64-393" aria-hidden="true" tabindex="-1"></a>          d5 |   .0368238   .0705556     0.52   0.602     -.101933    .1755805</span>
<span id="cb64-394"><a href="#cb64-394" aria-hidden="true" tabindex="-1"></a>          d6 |   .0595696    .060131     0.99   0.323    -.0586858     .177825</span>
<span id="cb64-395"><a href="#cb64-395" aria-hidden="true" tabindex="-1"></a>          d7 |    .184348   .0926225     1.99   0.047     .0021937    .3665023</span>
<span id="cb64-396"><a href="#cb64-396" aria-hidden="true" tabindex="-1"></a>          d8 |   2.773037   1.807071     1.53   0.126    -.7808051     6.32688</span>
<span id="cb64-397"><a href="#cb64-397" aria-hidden="true" tabindex="-1"></a>          e2 |  -2.59e+09          .        .       .            .           .</span>
<span id="cb64-398"><a href="#cb64-398" aria-hidden="true" tabindex="-1"></a>          e3 |   1.002811   .5449131     1.84   0.067    -.0688323    2.074454</span>
<span id="cb64-399"><a href="#cb64-399" aria-hidden="true" tabindex="-1"></a>          e4 |   1.089538   .5484653     1.99   0.048     .0109092    2.168167</span>
<span id="cb64-400"><a href="#cb64-400" aria-hidden="true" tabindex="-1"></a>          e5 |   .7809413   .5636633     1.39   0.167    -.3275767    1.889459</span>
<span id="cb64-401"><a href="#cb64-401" aria-hidden="true" tabindex="-1"></a>          e6 |   .8176126   .5623188     1.45   0.147    -.2882611    1.923486</span>
<span id="cb64-402"><a href="#cb64-402" aria-hidden="true" tabindex="-1"></a>          e7 |   .1963533   .0542407     3.62   0.000     .0896819    .3030248</span>
<span id="cb64-403"><a href="#cb64-403" aria-hidden="true" tabindex="-1"></a>          e8 |   .9909852   .5576036     1.78   0.076    -.1056155    2.087586</span>
<span id="cb64-404"><a href="#cb64-404" aria-hidden="true" tabindex="-1"></a>          e9 |   1.011894   .5669185     1.78   0.075    -.1030257    2.126813</span>
<span id="cb64-405"><a href="#cb64-405" aria-hidden="true" tabindex="-1"></a>         e10 |   .0766676   .1003499     0.76   0.445    -.1206836    .2740188</span>
<span id="cb64-406"><a href="#cb64-406" aria-hidden="true" tabindex="-1"></a>         e11 |   .3305375   .0754574     4.38   0.000     .1821406    .4789343</span>
<span id="cb64-407"><a href="#cb64-407" aria-hidden="true" tabindex="-1"></a>         e12 |   .4674833   .0740926     6.31   0.000     .3217704    .6131961</span>
<span id="cb64-408"><a href="#cb64-408" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb64-409"><a href="#cb64-409" aria-hidden="true" tabindex="-1"></a>* Parameter e2 taken <span class="kw">as</span> constant term <span class="kw">in</span> <span class="kw">model</span> &amp; ANOVA <span class="kw">table</span></span>
<span id="cb64-410"><a href="#cb64-410" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb64-411"><a href="#cb64-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-412"><a href="#cb64-412" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-413"><a href="#cb64-413" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*cyd2+_b[b3]*cyd3+_b[b4]*cyd4+_b[b5]*cyd5+_b[b6]*cyd6+_b[b7</span>
<span id="cb64-414"><a href="#cb64-414" aria-hidden="true" tabindex="-1"></a>&gt; ]*cyd7<span class="co">/*</span></span>
<span id="cb64-415"><a href="#cb64-415" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[b8]*cyd8+_b[b9]*cyd9+_b[b10]*cyd10+_b[b11]*cyd11+_b[b12]*cyd12<span class="co">/*</span></span>
<span id="cb64-416"><a href="#cb64-416" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*hp_c+_b[c5]*tran_c+_b[c6]*ps</span>
<span id="cb64-417"><a href="#cb64-417" aria-hidden="true" tabindex="-1"></a>&gt; _c<span class="co">/*</span></span>
<span id="cb64-418"><a href="#cb64-418" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c7]*ac_c+_b[c8])</span>
<span id="cb64-419"><a href="#cb64-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-420"><a href="#cb64-420" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-421"><a href="#cb64-421" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> winv=1/<span class="fu">exp</span>(_b[e2]*tyd2+_b[e3]*tyd3+_b[e4]*tyd4+_b[e5]*tyd5+_b[e6]*tyd6<span class="co">/*</span></span>
<span id="cb64-422"><a href="#cb64-422" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[e7]*tyd7+_b[e8]*tyd8+_b[e9]*tyd9+_b[e10]*tyd10+_b[e11]*tyd11+_b[e12]*tyd12</span>
<span id="cb64-423"><a href="#cb64-423" aria-hidden="true" tabindex="-1"></a>&gt; <span class="co">/*</span></span>
<span id="cb64-424"><a href="#cb64-424" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*hp_t<span class="co">/*</span></span>
<span id="cb64-425"><a href="#cb64-425" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t+_b[d8]) <span class="kw">if</span> ve==2</span>
<span id="cb64-426"><a href="#cb64-426" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made, 8 to <span class="fu">missing</span>)</span>
<span id="cb64-427"><a href="#cb64-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-428"><a href="#cb64-428" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-429"><a href="#cb64-429" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nprice=price*winv</span>
<span id="cb64-430"><a href="#cb64-430" aria-hidden="true" tabindex="-1"></a>(8 <span class="fu">missing</span> <span class="kw">values</span> generated)</span>
<span id="cb64-431"><a href="#cb64-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-432"><a href="#cb64-432" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-433"><a href="#cb64-433" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-434"><a href="#cb64-434" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlct_2</span>
<span id="cb64-435"><a href="#cb64-435" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb64-436"><a href="#cb64-436" aria-hidden="true" tabindex="-1"></a>  2. <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb64-437"><a href="#cb64-437" aria-hidden="true" tabindex="-1"></a>  3. <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 a8 a9 a10 a11 a12 b2 b3 b4 b5 b6 b7 b8 b9 b10 b11 </span></span>
<span id="cb64-438"><a href="#cb64-438" aria-hidden="true" tabindex="-1"></a><span class="st">&gt; b12 c1 c2 c3 c4 c5 c6 c7 c8 d1 d2 d3 d4 d5 d6 d7 d8 e2 e3 e4 e5 e6 e7 e8 e9 e10 </span></span>
<span id="cb64-439"><a href="#cb64-439" aria-hidden="true" tabindex="-1"></a><span class="st">&gt; e11 e12"</span></span>
<span id="cb64-440"><a href="#cb64-440" aria-hidden="true" tabindex="-1"></a>  4. <span class="kw">global</span> a3=1</span>
<span id="cb64-441"><a href="#cb64-441" aria-hidden="true" tabindex="-1"></a>  5. <span class="kw">global</span> a4=1</span>
<span id="cb64-442"><a href="#cb64-442" aria-hidden="true" tabindex="-1"></a>  6. <span class="kw">global</span> a5=1</span>
<span id="cb64-443"><a href="#cb64-443" aria-hidden="true" tabindex="-1"></a>  7. <span class="kw">global</span> a6=1</span>
<span id="cb64-444"><a href="#cb64-444" aria-hidden="true" tabindex="-1"></a>  8. <span class="kw">global</span> a7=1</span>
<span id="cb64-445"><a href="#cb64-445" aria-hidden="true" tabindex="-1"></a>  9. <span class="kw">global</span> a8=1</span>
<span id="cb64-446"><a href="#cb64-446" aria-hidden="true" tabindex="-1"></a> 10. <span class="kw">global</span> a9=1</span>
<span id="cb64-447"><a href="#cb64-447" aria-hidden="true" tabindex="-1"></a> 11. <span class="kw">global</span> a10=1</span>
<span id="cb64-448"><a href="#cb64-448" aria-hidden="true" tabindex="-1"></a> 12. <span class="kw">global</span> a11=1</span>
<span id="cb64-449"><a href="#cb64-449" aria-hidden="true" tabindex="-1"></a> 13. <span class="kw">global</span> a12=1</span>
<span id="cb64-450"><a href="#cb64-450" aria-hidden="true" tabindex="-1"></a> 14. <span class="kw">global</span> b2=.1</span>
<span id="cb64-451"><a href="#cb64-451" aria-hidden="true" tabindex="-1"></a> 15. <span class="kw">global</span> b3=.1</span>
<span id="cb64-452"><a href="#cb64-452" aria-hidden="true" tabindex="-1"></a> 16. <span class="kw">global</span> b4=.1</span>
<span id="cb64-453"><a href="#cb64-453" aria-hidden="true" tabindex="-1"></a> 17. <span class="kw">global</span> b5=.1</span>
<span id="cb64-454"><a href="#cb64-454" aria-hidden="true" tabindex="-1"></a> 18. <span class="kw">global</span> b6=.1</span>
<span id="cb64-455"><a href="#cb64-455" aria-hidden="true" tabindex="-1"></a> 19. <span class="kw">global</span> b7=.1</span>
<span id="cb64-456"><a href="#cb64-456" aria-hidden="true" tabindex="-1"></a> 20. <span class="kw">global</span> b8=.1</span>
<span id="cb64-457"><a href="#cb64-457" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">global</span> b9=.1</span>
<span id="cb64-458"><a href="#cb64-458" aria-hidden="true" tabindex="-1"></a> 22. <span class="kw">global</span> b10=.1</span>
<span id="cb64-459"><a href="#cb64-459" aria-hidden="true" tabindex="-1"></a> 23. <span class="kw">global</span> b11=.1</span>
<span id="cb64-460"><a href="#cb64-460" aria-hidden="true" tabindex="-1"></a> 24. <span class="kw">global</span> b12=.1</span>
<span id="cb64-461"><a href="#cb64-461" aria-hidden="true" tabindex="-1"></a> 25. <span class="kw">global</span> c1=.1</span>
<span id="cb64-462"><a href="#cb64-462" aria-hidden="true" tabindex="-1"></a> 26. <span class="kw">global</span> c2=.1</span>
<span id="cb64-463"><a href="#cb64-463" aria-hidden="true" tabindex="-1"></a> 27. <span class="kw">global</span> c3=.1</span>
<span id="cb64-464"><a href="#cb64-464" aria-hidden="true" tabindex="-1"></a> 28. <span class="kw">global</span> c4=.1</span>
<span id="cb64-465"><a href="#cb64-465" aria-hidden="true" tabindex="-1"></a> 29. <span class="kw">global</span> c5=.1</span>
<span id="cb64-466"><a href="#cb64-466" aria-hidden="true" tabindex="-1"></a> 30. <span class="kw">global</span> c6=.1</span>
<span id="cb64-467"><a href="#cb64-467" aria-hidden="true" tabindex="-1"></a> 31. <span class="kw">global</span> c7=.1</span>
<span id="cb64-468"><a href="#cb64-468" aria-hidden="true" tabindex="-1"></a> 32. <span class="kw">global</span> c8=.1</span>
<span id="cb64-469"><a href="#cb64-469" aria-hidden="true" tabindex="-1"></a> 33. <span class="kw">global</span> d1=.1</span>
<span id="cb64-470"><a href="#cb64-470" aria-hidden="true" tabindex="-1"></a> 34. <span class="kw">global</span> d2=.1</span>
<span id="cb64-471"><a href="#cb64-471" aria-hidden="true" tabindex="-1"></a> 35. <span class="kw">global</span> d3=.1</span>
<span id="cb64-472"><a href="#cb64-472" aria-hidden="true" tabindex="-1"></a> 36. <span class="kw">global</span> d4=.1</span>
<span id="cb64-473"><a href="#cb64-473" aria-hidden="true" tabindex="-1"></a> 37. <span class="kw">global</span> d5=.1</span>
<span id="cb64-474"><a href="#cb64-474" aria-hidden="true" tabindex="-1"></a> 38. <span class="kw">global</span> d6=.1</span>
<span id="cb64-475"><a href="#cb64-475" aria-hidden="true" tabindex="-1"></a> 39. <span class="kw">global</span> d7=.1</span>
<span id="cb64-476"><a href="#cb64-476" aria-hidden="true" tabindex="-1"></a> 40. <span class="kw">global</span> d8=.1</span>
<span id="cb64-477"><a href="#cb64-477" aria-hidden="true" tabindex="-1"></a> 41. <span class="kw">global</span> e2=.1</span>
<span id="cb64-478"><a href="#cb64-478" aria-hidden="true" tabindex="-1"></a> 42. <span class="kw">global</span> e3=.1</span>
<span id="cb64-479"><a href="#cb64-479" aria-hidden="true" tabindex="-1"></a> 43. <span class="kw">global</span> e4=.1</span>
<span id="cb64-480"><a href="#cb64-480" aria-hidden="true" tabindex="-1"></a> 44. <span class="kw">global</span> e5=.1</span>
<span id="cb64-481"><a href="#cb64-481" aria-hidden="true" tabindex="-1"></a> 45. <span class="kw">global</span> e6=.1</span>
<span id="cb64-482"><a href="#cb64-482" aria-hidden="true" tabindex="-1"></a> 46. <span class="kw">global</span> e7=.1</span>
<span id="cb64-483"><a href="#cb64-483" aria-hidden="true" tabindex="-1"></a> 47. <span class="kw">global</span> e8=.1</span>
<span id="cb64-484"><a href="#cb64-484" aria-hidden="true" tabindex="-1"></a> 48. <span class="kw">global</span> e9=.1</span>
<span id="cb64-485"><a href="#cb64-485" aria-hidden="true" tabindex="-1"></a> 49. <span class="kw">global</span> e10=.1</span>
<span id="cb64-486"><a href="#cb64-486" aria-hidden="true" tabindex="-1"></a> 50. <span class="kw">global</span> e11=.1</span>
<span id="cb64-487"><a href="#cb64-487" aria-hidden="true" tabindex="-1"></a> 51. <span class="kw">global</span> e12=.1</span>
<span id="cb64-488"><a href="#cb64-488" aria-hidden="true" tabindex="-1"></a> 52. <span class="kw">exit</span></span>
<span id="cb64-489"><a href="#cb64-489" aria-hidden="true" tabindex="-1"></a> 53. }</span>
<span id="cb64-490"><a href="#cb64-490" aria-hidden="true" tabindex="-1"></a> 54. </span>
<span id="cb64-491"><a href="#cb64-491" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> <span class="ot">`1'</span>=winv*(<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb64-492"><a href="#cb64-492" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$a8</span>*cyd8+<span class="ot">$a9</span>*cyd9+<span class="ot">$a10</span>*cyd10+<span class="ot">$a11</span>*cyd11+<span class="ot">$a12</span>*cyd12)<span class="co">/*</span></span>
<span id="cb64-493"><a href="#cb64-493" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb64-494"><a href="#cb64-494" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$b8</span>*cyd8+<span class="ot">$b9</span>*cyd9+<span class="ot">$b10</span>*cyd10+<span class="ot">$b11</span>*cyd11+<span class="ot">$b12</span>*cyd12<span class="co">/*</span></span>
<span id="cb64-495"><a href="#cb64-495" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb64-496"><a href="#cb64-496" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c8</span>)+winv*<span class="fu">exp</span>(<span class="ot">$e2</span>*tyd2+<span class="ot">$e3</span>*tyd3+<span class="ot">$e4</span>*tyd4+<span class="ot">$e5</span>*tyd5+<span class="ot">$e6</span>*tyd6+<span class="ot">$e7</span>*tyd7<span class="co">/*</span></span>
<span id="cb64-497"><a href="#cb64-497" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$e8</span>*tyd8+<span class="ot">$e9</span>*tyd9+<span class="ot">$e10</span>*tyd10+<span class="ot">$e11</span>*tyd11+<span class="ot">$e12</span>*tyd12<span class="co">/*</span></span>
<span id="cb64-498"><a href="#cb64-498" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb64-499"><a href="#cb64-499" aria-hidden="true" tabindex="-1"></a> 55. </span>
<span id="cb64-500"><a href="#cb64-500" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb64-501"><a href="#cb64-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-502"><a href="#cb64-502" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-503"><a href="#cb64-503" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> ct_2 nprice</span>
<span id="cb64-504"><a href="#cb64-504" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 396)</span>
<span id="cb64-505"><a href="#cb64-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-506"><a href="#cb64-506" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  3738.817</span>
<span id="cb64-507"><a href="#cb64-507" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb64-508"><a href="#cb64-508" aria-hidden="true" tabindex="-1"></a>Iteration 32:  residual SS =  15.11498</span>
<span id="cb64-509"><a href="#cb64-509" aria-hidden="true" tabindex="-1"></a>Iteration 33:  residual SS =  15.11498</span>
<span id="cb64-510"><a href="#cb64-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-511"><a href="#cb64-511" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       396</span>
<span id="cb64-512"><a href="#cb64-512" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 46,   349) =   1037.51</span>
<span id="cb64-513"><a href="#cb64-513" aria-hidden="true" tabindex="-1"></a>       Model |  2066.95212    46  44.9337418         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb64-514"><a href="#cb64-514" aria-hidden="true" tabindex="-1"></a>    Residual |  15.1149771   349   .04330939         R-squared     =    0.9927</span>
<span id="cb64-515"><a href="#cb64-515" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9918</span>
<span id="cb64-516"><a href="#cb64-516" aria-hidden="true" tabindex="-1"></a>       Total |   2082.0671   395  5.27105594         Root MSE      =  .2081091</span>
<span id="cb64-517"><a href="#cb64-517" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     =  -169.429</span>
<span id="cb64-518"><a href="#cb64-518" aria-hidden="true" tabindex="-1"></a>(ct_2)</span>
<span id="cb64-519"><a href="#cb64-519" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb64-520"><a href="#cb64-520" aria-hidden="true" tabindex="-1"></a>      nprice |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb64-521"><a href="#cb64-521" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb64-522"><a href="#cb64-522" aria-hidden="true" tabindex="-1"></a>          a3 |   165.6435   524.1069     0.32   0.752    -865.1618    1196.449</span>
<span id="cb64-523"><a href="#cb64-523" aria-hidden="true" tabindex="-1"></a>          a4 |   255.2019   575.0953     0.44   0.657    -875.8867     1386.29</span>
<span id="cb64-524"><a href="#cb64-524" aria-hidden="true" tabindex="-1"></a>          a5 |    382.162   544.9258     0.70   0.484    -689.5897    1453.914</span>
<span id="cb64-525"><a href="#cb64-525" aria-hidden="true" tabindex="-1"></a>          a6 |    561.334   534.9376     1.05   0.295    -490.7731    1613.441</span>
<span id="cb64-526"><a href="#cb64-526" aria-hidden="true" tabindex="-1"></a>          a7 |    32.3127   99.45926     0.32   0.745    -163.3022    227.9276</span>
<span id="cb64-527"><a href="#cb64-527" aria-hidden="true" tabindex="-1"></a>          a8 |    427.688   694.9132     0.62   0.539    -939.0566    1794.433</span>
<span id="cb64-528"><a href="#cb64-528" aria-hidden="true" tabindex="-1"></a>          a9 |   1338.024   667.4732     2.00   0.046     25.24802      2650.8</span>
<span id="cb64-529"><a href="#cb64-529" aria-hidden="true" tabindex="-1"></a>         a10 |   1354.805   1272.661     1.06   0.288    -1148.245    3857.854</span>
<span id="cb64-530"><a href="#cb64-530" aria-hidden="true" tabindex="-1"></a>         a11 |   3732.851    1148.03     3.25   0.001     1474.923    5990.778</span>
<span id="cb64-531"><a href="#cb64-531" aria-hidden="true" tabindex="-1"></a>         a12 |   4310.495   998.1988     4.32   0.000     2347.253    6273.737</span>
<span id="cb64-532"><a href="#cb64-532" aria-hidden="true" tabindex="-1"></a>          b2 |   -.053796    .124424    -0.43   0.666    -.2985112    .1909192</span>
<span id="cb64-533"><a href="#cb64-533" aria-hidden="true" tabindex="-1"></a>          b3 |   .1024193   .1947552     0.53   0.599    -.2806223    .4854609</span>
<span id="cb64-534"><a href="#cb64-534" aria-hidden="true" tabindex="-1"></a>          b4 |   .1508038   .1964602     0.77   0.443    -.2355911    .5371987</span>
<span id="cb64-535"><a href="#cb64-535" aria-hidden="true" tabindex="-1"></a>          b5 |    .104406   .1879434     0.56   0.579    -.2652381      .47405</span>
<span id="cb64-536"><a href="#cb64-536" aria-hidden="true" tabindex="-1"></a>          b6 |    .161327   .1825493     0.88   0.377    -.1977082    .5203622</span>
<span id="cb64-537"><a href="#cb64-537" aria-hidden="true" tabindex="-1"></a>          b7 |    .299865   .1270196     2.36   0.019     .0500448    .5496851</span>
<span id="cb64-538"><a href="#cb64-538" aria-hidden="true" tabindex="-1"></a>          b8 |   .4180167   .1963952     2.13   0.034     .0317497    .8042836</span>
<span id="cb64-539"><a href="#cb64-539" aria-hidden="true" tabindex="-1"></a>          b9 |   .4275378    .190593     2.24   0.026     .0526824    .8023932</span>
<span id="cb64-540"><a href="#cb64-540" aria-hidden="true" tabindex="-1"></a>         b10 |    .473833   .1983748     2.39   0.017     .0836725    .8639936</span>
<span id="cb64-541"><a href="#cb64-541" aria-hidden="true" tabindex="-1"></a>         b11 |   .3078561    .206895     1.49   0.138    -.0990619    .7147741</span>
<span id="cb64-542"><a href="#cb64-542" aria-hidden="true" tabindex="-1"></a>         b12 |   .1790811   .2035596     0.88   0.380    -.2212767     .579439</span>
<span id="cb64-543"><a href="#cb64-543" aria-hidden="true" tabindex="-1"></a>          c1 |   .6665196   .3118486     2.14   0.033     .0531805    1.279859</span>
<span id="cb64-544"><a href="#cb64-544" aria-hidden="true" tabindex="-1"></a>          c2 |   1.066573   .3592669     2.97   0.003     .3599729    1.773174</span>
<span id="cb64-545"><a href="#cb64-545" aria-hidden="true" tabindex="-1"></a>          c3 |  -.3333017   .1511001    -2.21   0.028    -.6304831   -.0361203</span>
<span id="cb64-546"><a href="#cb64-546" aria-hidden="true" tabindex="-1"></a>          c4 |   .4277256   .1382984     3.09   0.002     .1557224    .6997287</span>
<span id="cb64-547"><a href="#cb64-547" aria-hidden="true" tabindex="-1"></a>          c5 |   .2157146   .0848215     2.54   0.011     .0488889    .3825402</span>
<span id="cb64-548"><a href="#cb64-548" aria-hidden="true" tabindex="-1"></a>          c6 |   .1948046   .0696014     2.80   0.005     .0579136    .3316957</span>
<span id="cb64-549"><a href="#cb64-549" aria-hidden="true" tabindex="-1"></a>          c7 |   .1545815   .0715104     2.16   0.031      .013936     .295227</span>
<span id="cb64-550"><a href="#cb64-550" aria-hidden="true" tabindex="-1"></a>          c8 |   2.456385    2.09751     1.17   0.242    -1.668965    6.581735</span>
<span id="cb64-551"><a href="#cb64-551" aria-hidden="true" tabindex="-1"></a>          d1 |   .5464099   .0950598     5.75   0.000     .3594477    .7333721</span>
<span id="cb64-552"><a href="#cb64-552" aria-hidden="true" tabindex="-1"></a>          d2 |   .0486571   .0432501     1.13   0.261    -.0364066    .1337208</span>
<span id="cb64-553"><a href="#cb64-553" aria-hidden="true" tabindex="-1"></a>          d3 |  -.0695537   .0449695    -1.55   0.123     -.157999    .0188915</span>
<span id="cb64-554"><a href="#cb64-554" aria-hidden="true" tabindex="-1"></a>          d4 |   .3998404   .0759349     5.27   0.000     .2504929    .5491879</span>
<span id="cb64-555"><a href="#cb64-555" aria-hidden="true" tabindex="-1"></a>          d5 |   .0875427   .0184166     4.75   0.000     .0513213    .1237641</span>
<span id="cb64-556"><a href="#cb64-556" aria-hidden="true" tabindex="-1"></a>          d6 |    .039679    .075099     0.53   0.598    -.1080246    .1873827</span>
<span id="cb64-557"><a href="#cb64-557" aria-hidden="true" tabindex="-1"></a>          d7 |  -.0740434   .1046904    -0.71   0.480    -.2799468      .13186</span>
<span id="cb64-558"><a href="#cb64-558" aria-hidden="true" tabindex="-1"></a>          d8 |   7.377294   .2976717    24.78   0.000     6.791838     7.96275</span>
<span id="cb64-559"><a href="#cb64-559" aria-hidden="true" tabindex="-1"></a>          e2 |         .1          .        .       .            .           .</span>
<span id="cb64-560"><a href="#cb64-560" aria-hidden="true" tabindex="-1"></a>          e3 |   .2699934   .0481155     5.61   0.000     .1753605    .3646263</span>
<span id="cb64-561"><a href="#cb64-561" aria-hidden="true" tabindex="-1"></a>          e4 |   .2654374    .048439     5.48   0.000     .1701684    .3607065</span>
<span id="cb64-562"><a href="#cb64-562" aria-hidden="true" tabindex="-1"></a>          e5 |   .1633878    .033666     4.85   0.000      .097174    .2296016</span>
<span id="cb64-563"><a href="#cb64-563" aria-hidden="true" tabindex="-1"></a>          e6 |   .1719965   .0352488     4.88   0.000     .1026697    .2413233</span>
<span id="cb64-564"><a href="#cb64-564" aria-hidden="true" tabindex="-1"></a>          e7 |   .0506695    .015178     3.34   0.001     .0208177    .0805213</span>
<span id="cb64-565"><a href="#cb64-565" aria-hidden="true" tabindex="-1"></a>          e8 |   .1550894   .0392545     3.95   0.000     .0778843    .2322944</span>
<span id="cb64-566"><a href="#cb64-566" aria-hidden="true" tabindex="-1"></a>          e9 |   .1318401   .0385509     3.42   0.001     .0560188    .2076615</span>
<span id="cb64-567"><a href="#cb64-567" aria-hidden="true" tabindex="-1"></a>         e10 |   -.047726   .2001646    -0.24   0.812    -.4414067    .3459547</span>
<span id="cb64-568"><a href="#cb64-568" aria-hidden="true" tabindex="-1"></a>         e11 |  -.5569037   .3050303    -1.83   0.069    -1.156833    .0430251</span>
<span id="cb64-569"><a href="#cb64-569" aria-hidden="true" tabindex="-1"></a>         e12 |  -.6348534    .314223    -2.02   0.044    -1.252862   -.0168445</span>
<span id="cb64-570"><a href="#cb64-570" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb64-571"><a href="#cb64-571" aria-hidden="true" tabindex="-1"></a>* Parameter e2 taken <span class="kw">as</span> constant term <span class="kw">in</span> <span class="kw">model</span> &amp; ANOVA <span class="kw">table</span></span>
<span id="cb64-572"><a href="#cb64-572" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb64-573"><a href="#cb64-573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-574"><a href="#cb64-574" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb64-575"><a href="#cb64-575" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb64-576"><a href="#cb64-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-577"><a href="#cb64-577" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb64-578"><a href="#cb64-578" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb64-579"><a href="#cb64-579" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb64-580"><a href="#cb64-580" aria-hidden="true" tabindex="-1"></a>&gt; er-8\system_nocon.<span class="fu">log</span></span>
<span id="cb64-581"><a href="#cb64-581" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb64-582"><a href="#cb64-582" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:   6 Jul 2024, 23:02:18</span>
<span id="cb64-583"><a href="#cb64-583" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb64-584"><a href="#cb64-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-585"><a href="#cb64-585" aria-hidden="true" tabindex="-1"></a>. <span class="kw">exit</span></span>
<span id="cb64-586"><a href="#cb64-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-587"><a href="#cb64-587" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="my-code-4" class="level3">
<h3 class="anchored" data-anchor-id="my-code-4">My code</h3>
<section id="system_nocom.do-1" class="level4">
<h4 class="anchored" data-anchor-id="system_nocom.do-1">system_nocom.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ve =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_t =</span> wdth, <span class="at">hght_t =</span> hght, <span class="at">wght_t =</span> weight, <span class="at">hp_t =</span> hp, <span class="at">four_t =</span> four,</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_t =</span> tran, <span class="at">ps_t =</span> ps, <span class="at">ac_t =</span> ac</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ve =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_c =</span> wdth, <span class="at">hght_c =</span> hght, <span class="at">wght_c =</span> wght, <span class="at">hp_c =</span> hp, <span class="at">four_c =</span> four,</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_c =</span> tran, <span class="at">ps_c =</span> ps, <span class="at">ac_c =</span> ac</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(car_7990) <span class="sc">%&gt;%</span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wdth_c), <span class="dv">0</span>, wdth_c),</span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hght_c), <span class="dv">0</span>, hght_c),</span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wght_c), <span class="dv">0</span>, wght_c),</span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hp_c), <span class="dv">0</span>, hp_c),</span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(four_c), <span class="dv">0</span>, four_c),</span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(tran_c), <span class="dv">0</span>, tran_c),</span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ps_c), <span class="dv">0</span>, ps_c),</span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ac_c), <span class="dv">0</span>, ac_c),</span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wdth_t), <span class="dv">0</span>, wdth_t),</span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hght_t), <span class="dv">0</span>, hght_t),</span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wght_t), <span class="dv">0</span>, wght_t),</span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hp_t), <span class="dv">0</span>, hp_t),</span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(four_t), <span class="dv">0</span>, four_t),</span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(tran_t), <span class="dv">0</span>, tran_t),</span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ps_t), <span class="dv">0</span>, ps_t),</span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ac_t), <span class="dv">0</span>, ac_t)</span>
<span id="cb65-34"><a href="#cb65-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb65-35"><a href="#cb65-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-36"><a href="#cb65-36" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb65-37"><a href="#cb65-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb65-38"><a href="#cb65-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb65-39"><a href="#cb65-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb65-40"><a href="#cb65-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb65-41"><a href="#cb65-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent =</span> freq <span class="sc">/</span> <span class="fu">sum</span>(freq) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb65-42"><a href="#cb65-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">cum =</span> <span class="fu">cumsum</span>(percent)</span>
<span id="cb65-43"><a href="#cb65-43" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
    year  freq percent    cum
   &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;
 1    79    31    7.67   7.67
 2    80    34    8.42  16.1 
 3    81    35    8.66  24.8 
 4    82    35    8.66  33.4 
 5    83    36    8.91  42.3 
 6    84    40    9.90  52.2 
 7    85    43   10.6   62.9 
 8    86    33    8.17  71.0 
 9    87    35    8.66  79.7 
10    88    30    7.43  87.1 
11    89    26    6.44  93.6 
12    90    26    6.44 100   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yd =</span> <span class="fu">as.factor</span>(year <span class="sc">-</span> <span class="fu">min</span>(year) <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>truck_7990_dummy <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span> yd <span class="sc">-</span> <span class="dv">1</span>, <span class="at">data =</span> truck_7990)</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">as.data.frame</span>(truck_7990_dummy))</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd2 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd2),</span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd3 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd3),</span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd4 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd4),</span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd5 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd5),</span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd6 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd6),</span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd7 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">12</span>, yd7),</span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd8 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd8),</span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd9 =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd9),</span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd10 =</span> yd10,</span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd11 =</span> yd11,</span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd12 =</span> yd12,</span>
<span id="cb67-22"><a href="#cb67-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd2 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd2),</span>
<span id="cb67-23"><a href="#cb67-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd3 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd3),</span>
<span id="cb67-24"><a href="#cb67-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd4 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd4),</span>
<span id="cb67-25"><a href="#cb67-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd5 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd5),</span>
<span id="cb67-26"><a href="#cb67-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd6 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd6),</span>
<span id="cb67-27"><a href="#cb67-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd7 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">12</span>, yd7),</span>
<span id="cb67-28"><a href="#cb67-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd8 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd8),</span>
<span id="cb67-29"><a href="#cb67-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd9 =</span> <span class="fu">ifelse</span>(type <span class="sc">!=</span> <span class="st">"JT"</span>, <span class="dv">0</span>, yd9),</span>
<span id="cb67-30"><a href="#cb67-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd10 =</span> yd10,</span>
<span id="cb67-31"><a href="#cb67-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd11 =</span> yd11,</span>
<span id="cb67-32"><a href="#cb67-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd12 =</span> yd12</span>
<span id="cb67-33"><a href="#cb67-33" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>initial_values <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">a3 =</span> <span class="dv">1</span>, <span class="at">a4 =</span> <span class="dv">1</span>, <span class="at">a5 =</span> <span class="dv">1</span>, <span class="at">a6 =</span> <span class="dv">1</span>, <span class="at">a7 =</span> <span class="dv">1</span>, <span class="at">a8 =</span> <span class="dv">1</span>, <span class="at">a9 =</span> <span class="dv">1</span>, <span class="at">a10 =</span> <span class="dv">1</span>, <span class="at">a11 =</span> <span class="dv">1</span>,</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">a12 =</span> <span class="dv">1</span>,</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">b2 =</span> <span class="fl">0.1</span>, <span class="at">b3 =</span> <span class="fl">0.1</span>, <span class="at">b4 =</span> <span class="fl">0.1</span>, <span class="at">b5 =</span> <span class="fl">0.1</span>, <span class="at">b6 =</span> <span class="fl">0.1</span>, <span class="at">b7 =</span> <span class="fl">0.1</span>, <span class="at">b8 =</span> <span class="fl">0.1</span>,</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">b9 =</span> <span class="fl">0.1</span>, <span class="at">b10 =</span> <span class="fl">0.1</span>, <span class="at">b11 =</span> <span class="fl">0.1</span>, <span class="at">b12 =</span> <span class="fl">0.1</span>,</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">c1 =</span> <span class="fl">0.1</span>, <span class="at">c2 =</span> <span class="fl">0.1</span>, <span class="at">c3 =</span> <span class="fl">0.1</span>, <span class="at">c4 =</span> <span class="fl">0.1</span>, <span class="at">c5 =</span> <span class="fl">0.1</span>, <span class="at">c6 =</span> <span class="fl">0.1</span>, <span class="at">c7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">c8 =</span> <span class="fl">0.1</span>,</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">d1 =</span> <span class="fl">0.1</span>, <span class="at">d2 =</span> <span class="fl">0.1</span>, <span class="at">d3 =</span> <span class="fl">0.1</span>, <span class="at">d4 =</span> <span class="fl">0.1</span>, <span class="at">d5 =</span> <span class="fl">0.1</span>, <span class="at">d6 =</span> <span class="fl">0.1</span>, <span class="at">d7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">d8 =</span> <span class="fl">0.1</span>,</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">e2 =</span> <span class="fl">0.1</span>, <span class="at">e3 =</span> <span class="fl">0.1</span>, <span class="at">e4 =</span> <span class="fl">0.1</span>, <span class="at">e5 =</span> <span class="fl">0.1</span>, <span class="at">e6 =</span> <span class="fl">0.1</span>, <span class="at">e7 =</span> <span class="fl">0.1</span>, <span class="at">e8 =</span> <span class="fl">0.1</span>,</span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">e9 =</span> <span class="fl">0.1</span>, <span class="at">e10 =</span> <span class="fl">0.1</span>, <span class="at">e11 =</span> <span class="fl">0.1</span>, <span class="at">e12 =</span> <span class="fl">0.1</span></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>  price <span class="sc">~</span> a3 <span class="sc">*</span> cyd3 <span class="sc">+</span> a4 <span class="sc">*</span> cyd4 <span class="sc">+</span> a5 <span class="sc">*</span> cyd5 <span class="sc">+</span> a6 <span class="sc">*</span> cyd6 <span class="sc">+</span> a7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>    a8 <span class="sc">*</span> cyd8 <span class="sc">+</span> a9 <span class="sc">*</span> cyd9 <span class="sc">+</span> a10 <span class="sc">*</span> cyd10 <span class="sc">+</span> a11 <span class="sc">*</span> cyd11 <span class="sc">+</span> a12 <span class="sc">*</span> cyd12 <span class="sc">+</span></span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(b2 <span class="sc">*</span> cyd2 <span class="sc">+</span> b3 <span class="sc">*</span> cyd3 <span class="sc">+</span> b4 <span class="sc">*</span> cyd4 <span class="sc">+</span> b5 <span class="sc">*</span> cyd5 <span class="sc">+</span> b6 <span class="sc">*</span> cyd6 <span class="sc">+</span> b7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>      b8 <span class="sc">*</span> cyd8 <span class="sc">+</span> b9 <span class="sc">*</span> cyd9 <span class="sc">+</span> b10 <span class="sc">*</span> cyd10 <span class="sc">+</span> b11 <span class="sc">*</span> cyd11 <span class="sc">+</span> b12 <span class="sc">*</span> cyd12 <span class="sc">+</span></span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>      c1 <span class="sc">*</span> wght_c <span class="sc">+</span> c2 <span class="sc">*</span> wdth_c <span class="sc">+</span> c3 <span class="sc">*</span> hght_c <span class="sc">+</span> c4 <span class="sc">*</span> hp_c <span class="sc">+</span> c5 <span class="sc">*</span> tran_c <span class="sc">+</span></span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>      c6 <span class="sc">*</span> ps_c <span class="sc">+</span> c7 <span class="sc">*</span> ac_c <span class="sc">+</span> c8) <span class="sc">+</span></span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(e2 <span class="sc">*</span> tyd2 <span class="sc">+</span> e3 <span class="sc">*</span> tyd3 <span class="sc">+</span> e4 <span class="sc">*</span> tyd4 <span class="sc">+</span> e5 <span class="sc">*</span> tyd5 <span class="sc">+</span> e6 <span class="sc">*</span> tyd6 <span class="sc">+</span> e7 <span class="sc">*</span> tyd7 <span class="sc">+</span></span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>      e8 <span class="sc">*</span> tyd8 <span class="sc">+</span> e9 <span class="sc">*</span> tyd9 <span class="sc">+</span> e10 <span class="sc">*</span> tyd10 <span class="sc">+</span> e11 <span class="sc">*</span> tyd11 <span class="sc">+</span> e12 <span class="sc">*</span> tyd12 <span class="sc">+</span></span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a>      d1 <span class="sc">*</span> wght_t <span class="sc">+</span> d2 <span class="sc">*</span> wdth_t <span class="sc">+</span> d3 <span class="sc">*</span> hght_t <span class="sc">+</span> d4 <span class="sc">*</span> hp_t <span class="sc">+</span> d5 <span class="sc">*</span> tran_t <span class="sc">+</span></span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>      d6 <span class="sc">*</span> ps_t <span class="sc">+</span> d7 <span class="sc">*</span> four_t <span class="sc">+</span> d8),</span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values,</span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># adjust parameters to account to slow convergence</span></span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">nls.lm.control</span>(<span class="at">maxiter =</span> <span class="dv">1000</span>, <span class="at">maxfev =</span> <span class="dv">10000</span>)</span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-31"><a href="#cb68-31" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: price ~ a3 * cyd3 + a4 * cyd4 + a5 * cyd5 + a6 * cyd6 + a7 * 
    cyd7 + a8 * cyd8 + a9 * cyd9 + a10 * cyd10 + a11 * cyd11 + 
    a12 * cyd12 + exp(b2 * cyd2 + b3 * cyd3 + b4 * cyd4 + b5 * 
    cyd5 + b6 * cyd6 + b7 * cyd7 + b8 * cyd8 + b9 * cyd9 + b10 * 
    cyd10 + b11 * cyd11 + b12 * cyd12 + c1 * wght_c + c2 * wdth_c + 
    c3 * hght_c + c4 * hp_c + c5 * tran_c + c6 * ps_c + c7 * 
    ac_c + c8) + exp(e2 * tyd2 + e3 * tyd3 + e4 * tyd4 + e5 * 
    tyd5 + e6 * tyd6 + e7 * tyd7 + e8 * tyd8 + e9 * tyd9 + e10 * 
    tyd10 + e11 * tyd11 + e12 * tyd12 + d1 * wght_t + d2 * wdth_t + 
    d3 * hght_t + d4 * hp_t + d5 * tran_t + d6 * ps_t + d7 * 
    four_t + d8)

Parameters:
      Estimate Std. Error t value Pr(&gt;|t|)    
a3   2.596e+02  5.491e+02   0.473  0.63663    
a4   2.159e+01  5.320e+02   0.041  0.96766    
a5   1.385e+02  4.921e+02   0.282  0.77849    
a6   5.621e+02  4.804e+02   1.170  0.24277    
a7  -2.020e+01  1.035e+02  -0.195  0.84547    
a8   7.438e+02  5.206e+02   1.429  0.15399    
a9   1.175e+03  5.175e+02   2.270  0.02378 *  
a10  7.411e+02  7.438e+02   0.996  0.31973    
a11 -4.744e+02  8.253e+02  -0.575  0.56579    
a12 -5.577e+02  7.820e+02  -0.713  0.47623    
b2  -8.778e-02  4.246e-02  -2.067  0.03943 *  
b3  -6.198e-03  8.692e-02  -0.071  0.94319    
b4   8.501e-02  7.549e-02   1.126  0.26086    
b5   6.504e-02  7.007e-02   0.928  0.35391    
b6   7.187e-02  6.775e-02   1.061  0.28952    
b7   1.512e-01  3.346e-02   4.519 8.46e-06 ***
b8   1.445e-01  6.653e-02   2.173  0.03046 *  
b9   1.986e-01  6.371e-02   3.117  0.00198 ** 
b10  2.789e-01  7.397e-02   3.771  0.00019 ***
b11  4.093e-01  7.059e-02   5.799 1.48e-08 ***
b12  3.709e-01  6.936e-02   5.347 1.60e-07 ***
c1   4.691e-01  8.868e-02   5.289 2.15e-07 ***
c2   5.440e-01  7.051e-02   7.715 1.23e-13 ***
c3  -3.623e-01  4.558e-02  -7.949 2.51e-14 ***
c4   2.486e-01  3.892e-02   6.388 5.25e-10 ***
c5   6.424e-02  2.068e-02   3.106  0.00205 ** 
c6   1.090e-01  2.102e-02   5.188 3.59e-07 ***
c7   1.667e-01  2.075e-02   8.033 1.41e-14 ***
c8   6.581e+00  4.161e-01  15.814  &lt; 2e-16 ***
d1   4.809e-01  9.247e-02   5.200 3.36e-07 ***
d2   5.697e-01  2.951e-01   1.930  0.05436 .  
d3  -1.723e-01  7.918e-02  -2.176  0.03021 *  
d4   4.761e-01  1.876e-01   2.538  0.01157 *  
d5   4.939e-02  6.314e-02   0.782  0.43462    
d6   5.430e-02  5.794e-02   0.937  0.34930    
d7   1.797e-01  9.133e-02   1.968  0.04986 *  
d8   3.724e+00  1.851e+00   2.012  0.04497 *  
e2  -2.764e-01  6.097e-01  -0.453  0.65061    
e3   6.840e-01  4.056e-01   1.687  0.09255 .  
e4   7.412e-01  4.242e-01   1.747  0.08141 .  
e5   5.277e-01  3.852e-01   1.370  0.17157    
e6   5.536e-01  3.897e-01   1.421  0.15624    
e7   1.408e-01  6.125e-02   2.298  0.02212 *  
e8   6.340e-01  4.319e-01   1.468  0.14302    
e9   6.354e-01  4.490e-01   1.415  0.15788    
e10  5.881e-02  1.012e-01   0.581  0.56144    
e11  3.243e-01  7.533e-02   4.305 2.16e-05 ***
e12  4.668e-01  7.319e-02   6.378 5.59e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 936.3 on 356 degrees of freedom

Number of iterations to convergence: 42 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>fit_coef <span class="ot">&lt;-</span> <span class="fu">coef</span>(fit)</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">winv =</span> <span class="fu">case_when</span>(</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>      ve <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>(fit_coef[<span class="st">"b2"</span>] <span class="sc">*</span> cyd2 <span class="sc">+</span> fit_coef[<span class="st">"b3"</span>] <span class="sc">*</span> cyd3 <span class="sc">+</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"b4"</span>] <span class="sc">*</span> cyd4 <span class="sc">+</span> fit_coef[<span class="st">"b5"</span>] <span class="sc">*</span> cyd5 <span class="sc">+</span> fit_coef[<span class="st">"b6"</span>] <span class="sc">*</span> cyd6 <span class="sc">+</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"b7"</span>] <span class="sc">*</span> cyd7 <span class="sc">+</span> fit_coef[<span class="st">"b8"</span>] <span class="sc">*</span> cyd8 <span class="sc">+</span> fit_coef[<span class="st">"b9"</span>] <span class="sc">*</span> cyd9 <span class="sc">+</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"b10"</span>] <span class="sc">*</span> cyd10 <span class="sc">+</span> fit_coef[<span class="st">"b11"</span>] <span class="sc">*</span> cyd11 <span class="sc">+</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"b12"</span>] <span class="sc">*</span> cyd12 <span class="sc">+</span> fit_coef[<span class="st">"c1"</span>] <span class="sc">*</span> wght_c <span class="sc">+</span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c2"</span>] <span class="sc">*</span> wdth_c <span class="sc">+</span> fit_coef[<span class="st">"c3"</span>] <span class="sc">*</span> hght_c <span class="sc">+</span></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c4"</span>] <span class="sc">*</span> hp_c <span class="sc">+</span> fit_coef[<span class="st">"c5"</span>] <span class="sc">*</span> tran_c <span class="sc">+</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c6"</span>] <span class="sc">*</span> ps_c <span class="sc">+</span> fit_coef[<span class="st">"c7"</span>] <span class="sc">*</span> ac_c <span class="sc">+</span> fit_coef[<span class="st">"c8"</span>]),</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>      ve <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>(fit_coef[<span class="st">"e2"</span>] <span class="sc">*</span> tyd2 <span class="sc">+</span> fit_coef[<span class="st">"e3"</span>] <span class="sc">*</span> tyd3 <span class="sc">+</span></span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"e4"</span>] <span class="sc">*</span> tyd4 <span class="sc">+</span> fit_coef[<span class="st">"e5"</span>] <span class="sc">*</span> tyd5 <span class="sc">+</span> fit_coef[<span class="st">"e6"</span>] <span class="sc">*</span> tyd6 <span class="sc">+</span></span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"e7"</span>] <span class="sc">*</span> tyd7 <span class="sc">+</span> fit_coef[<span class="st">"e8"</span>] <span class="sc">*</span> tyd8 <span class="sc">+</span> fit_coef[<span class="st">"e9"</span>] <span class="sc">*</span> tyd9 <span class="sc">+</span></span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"e10"</span>] <span class="sc">*</span> tyd10 <span class="sc">+</span> fit_coef[<span class="st">"e11"</span>] <span class="sc">*</span> tyd11 <span class="sc">+</span></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"e12"</span>] <span class="sc">*</span> tyd12 <span class="sc">+</span> fit_coef[<span class="st">"d1"</span>] <span class="sc">*</span> wght_t <span class="sc">+</span></span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"d2"</span>] <span class="sc">*</span> wdth_t <span class="sc">+</span> fit_coef[<span class="st">"d3"</span>] <span class="sc">*</span> hght_t <span class="sc">+</span></span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"d4"</span>] <span class="sc">*</span> hp_t <span class="sc">+</span> fit_coef[<span class="st">"d5"</span>] <span class="sc">*</span> tran_t <span class="sc">+</span></span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"d6"</span>] <span class="sc">*</span> ps_t <span class="sc">+</span> fit_coef[<span class="st">"d7"</span>] <span class="sc">*</span> four_t <span class="sc">+</span> fit_coef[<span class="st">"d8"</span>]),</span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb70-23"><a href="#cb70-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">nprice =</span> price <span class="sc">*</span> winv</span>
<span id="cb70-24"><a href="#cb70-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb70-25"><a href="#cb70-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-26"><a href="#cb70-26" aria-hidden="true" tabindex="-1"></a>fit2 <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb70-27"><a href="#cb70-27" aria-hidden="true" tabindex="-1"></a>  nprice <span class="sc">~</span> winv <span class="sc">*</span> (a3 <span class="sc">*</span> cyd3 <span class="sc">+</span> a4 <span class="sc">*</span> cyd4 <span class="sc">+</span> a5 <span class="sc">*</span> cyd5 <span class="sc">+</span> a6 <span class="sc">*</span> cyd6 <span class="sc">+</span> a7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb70-28"><a href="#cb70-28" aria-hidden="true" tabindex="-1"></a>    a8 <span class="sc">*</span> cyd8 <span class="sc">+</span> a9 <span class="sc">*</span> cyd9 <span class="sc">+</span> a10 <span class="sc">*</span> cyd10 <span class="sc">+</span> a11 <span class="sc">*</span> cyd11 <span class="sc">+</span> a12 <span class="sc">*</span> cyd12) <span class="sc">+</span></span>
<span id="cb70-29"><a href="#cb70-29" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(b2 <span class="sc">*</span> cyd2 <span class="sc">+</span> b3 <span class="sc">*</span> cyd3 <span class="sc">+</span> b4 <span class="sc">*</span> cyd4 <span class="sc">+</span> b5 <span class="sc">*</span> cyd5 <span class="sc">+</span> b6 <span class="sc">*</span> cyd6 <span class="sc">+</span></span>
<span id="cb70-30"><a href="#cb70-30" aria-hidden="true" tabindex="-1"></a>      b7 <span class="sc">*</span> cyd7 <span class="sc">+</span> b8 <span class="sc">*</span> cyd8 <span class="sc">+</span> b9 <span class="sc">*</span> cyd9 <span class="sc">+</span> b10 <span class="sc">*</span> cyd10 <span class="sc">+</span> b11 <span class="sc">*</span> cyd11 <span class="sc">+</span></span>
<span id="cb70-31"><a href="#cb70-31" aria-hidden="true" tabindex="-1"></a>      b12 <span class="sc">*</span> cyd12 <span class="sc">+</span> c1 <span class="sc">*</span> wght_c <span class="sc">+</span> c2 <span class="sc">*</span> wdth_c <span class="sc">+</span> c3 <span class="sc">*</span> hght_c <span class="sc">+</span> c4 <span class="sc">*</span> hp_c <span class="sc">+</span></span>
<span id="cb70-32"><a href="#cb70-32" aria-hidden="true" tabindex="-1"></a>      c5 <span class="sc">*</span> tran_c <span class="sc">+</span> c6 <span class="sc">*</span> ps_c <span class="sc">+</span> c7 <span class="sc">*</span> ac_c <span class="sc">+</span> c8) <span class="sc">+</span></span>
<span id="cb70-33"><a href="#cb70-33" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(e2 <span class="sc">*</span> tyd2 <span class="sc">+</span> e3 <span class="sc">*</span> tyd3 <span class="sc">+</span> e4 <span class="sc">*</span> tyd4 <span class="sc">+</span> e5 <span class="sc">*</span> tyd5 <span class="sc">+</span> e6 <span class="sc">*</span> tyd6 <span class="sc">+</span></span>
<span id="cb70-34"><a href="#cb70-34" aria-hidden="true" tabindex="-1"></a>      e7 <span class="sc">*</span> tyd7 <span class="sc">+</span> e8 <span class="sc">*</span> tyd8 <span class="sc">+</span> e9 <span class="sc">*</span> tyd9 <span class="sc">+</span> e10 <span class="sc">*</span> tyd10 <span class="sc">+</span> e11 <span class="sc">*</span> tyd11 <span class="sc">+</span></span>
<span id="cb70-35"><a href="#cb70-35" aria-hidden="true" tabindex="-1"></a>      e12 <span class="sc">*</span> tyd12 <span class="sc">+</span> d1 <span class="sc">*</span> wght_t <span class="sc">+</span> d2 <span class="sc">*</span> wdth_t <span class="sc">+</span> d3 <span class="sc">*</span> hght_t <span class="sc">+</span> d4 <span class="sc">*</span> hp_t <span class="sc">+</span></span>
<span id="cb70-36"><a href="#cb70-36" aria-hidden="true" tabindex="-1"></a>      d5 <span class="sc">*</span> tran_t <span class="sc">+</span> d6 <span class="sc">*</span> ps_t <span class="sc">+</span> d7 <span class="sc">*</span> four_t <span class="sc">+</span> d8),</span>
<span id="cb70-37"><a href="#cb70-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb70-38"><a href="#cb70-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values,</span>
<span id="cb70-39"><a href="#cb70-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">nls.lm.control</span>(<span class="at">maxiter =</span> <span class="dv">1000</span>, <span class="at">maxfev =</span> <span class="dv">10000</span>)</span>
<span id="cb70-40"><a href="#cb70-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb70-41"><a href="#cb70-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-42"><a href="#cb70-42" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: nprice ~ winv * (a3 * cyd3 + a4 * cyd4 + a5 * cyd5 + a6 * cyd6 + 
    a7 * cyd7 + a8 * cyd8 + a9 * cyd9 + a10 * cyd10 + a11 * cyd11 + 
    a12 * cyd12) + winv * exp(b2 * cyd2 + b3 * cyd3 + b4 * cyd4 + 
    b5 * cyd5 + b6 * cyd6 + b7 * cyd7 + b8 * cyd8 + b9 * cyd9 + 
    b10 * cyd10 + b11 * cyd11 + b12 * cyd12 + c1 * wght_c + c2 * 
    wdth_c + c3 * hght_c + c4 * hp_c + c5 * tran_c + c6 * ps_c + 
    c7 * ac_c + c8) + winv * exp(e2 * tyd2 + e3 * tyd3 + e4 * 
    tyd4 + e5 * tyd5 + e6 * tyd6 + e7 * tyd7 + e8 * tyd8 + e9 * 
    tyd9 + e10 * tyd10 + e11 * tyd11 + e12 * tyd12 + d1 * wght_t + 
    d2 * wdth_t + d3 * hght_t + d4 * hp_t + d5 * tran_t + d6 * 
    ps_t + d7 * four_t + d8)

Parameters:
      Estimate Std. Error t value Pr(&gt;|t|)    
a3   2.558e+02  4.717e+02   0.542 0.587994    
a4   3.602e+02  5.124e+02   0.703 0.482532    
a5   5.100e+02  4.823e+02   1.057 0.291011    
a6   6.946e+02  4.770e+02   1.456 0.146214    
a7   6.024e+01  9.338e+01   0.645 0.519292    
a8   6.719e+02  6.023e+02   1.116 0.265324    
a9   1.317e+03  5.831e+02   2.259 0.024505 *  
a10  8.590e+02  1.067e+03   0.805 0.421102    
a11  8.514e+02  1.135e+03   0.750 0.453477    
a12  8.496e+02  1.123e+03   0.756 0.449875    
b2  -4.359e-02  6.986e-02  -0.624 0.533015    
b3   6.083e-02  1.322e-01   0.460 0.645668    
b4   9.350e-02  1.340e-01   0.698 0.485782    
b5   5.018e-02  1.275e-01   0.393 0.694188    
b6   9.386e-02  1.238e-01   0.758 0.448940    
b7   2.288e-01  7.452e-02   3.071 0.002300 ** 
b8   2.835e-01  1.330e-01   2.131 0.033774 *  
b9   3.347e-01  1.255e-01   2.667 0.008003 ** 
b10  4.105e-01  1.389e-01   2.956 0.003328 ** 
b11  4.014e-01  1.454e-01   2.761 0.006058 ** 
b12  3.202e-01  1.418e-01   2.258 0.024519 *  
c1   4.797e-01  2.005e-01   2.392 0.017269 *  
c2   8.180e-01  2.096e-01   3.903 0.000114 ***
c3  -2.666e-01  9.648e-02  -2.763 0.006022 ** 
c4   4.243e-01  9.175e-02   4.624 5.27e-06 ***
c5   1.603e-01  5.221e-02   3.070 0.002302 ** 
c6   1.633e-01  4.580e-02   3.567 0.000411 ***
c7   1.522e-01  4.696e-02   3.241 0.001306 ** 
c8   4.049e+00  1.249e+00   3.243 0.001296 ** 
d1   4.943e-01  9.277e-02   5.328 1.77e-07 ***
d2   7.392e-02  6.277e-02   1.178 0.239734    
d3  -3.155e-02  5.003e-02  -0.631 0.528681    
d4   3.573e-01  8.138e-02   4.390 1.49e-05 ***
d5   9.111e-02  2.193e-02   4.154 4.10e-05 ***
d6   8.898e-03  5.962e-02   0.149 0.881454    
d7   8.680e-02  1.017e-01   0.853 0.394034    
d8   6.958e+00  4.030e-01  17.264  &lt; 2e-16 ***
e2  -6.496e-03  1.990e-02  -0.326 0.744316    
e3   3.050e-01  5.749e-02   5.306 1.98e-07 ***
e4   3.021e-01  5.829e-02   5.182 3.68e-07 ***
e5   1.918e-01  4.357e-02   4.402 1.42e-05 ***
e6   2.001e-01  4.508e-02   4.439 1.21e-05 ***
e7   5.227e-02  1.667e-02   3.135 0.001862 ** 
e8   2.051e-01  5.229e-02   3.923 0.000105 ***
e9   1.869e-01  5.223e-02   3.578 0.000395 ***
e10  5.322e-02  1.533e-01   0.347 0.728665    
e11  1.145e-01  1.635e-01   0.700 0.484378    
e12  2.044e-01  1.760e-01   1.161 0.246236    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1606 on 356 degrees of freedom

Number of iterations to convergence: 40 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
</div>
</section>
<section id="system_nocom.do-2" class="level4">
<h4 class="anchored" data-anchor-id="system_nocom.do-2">system_nocom.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>fit3 <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  nprice <span class="sc">~</span> a3 <span class="sc">*</span> cyd3 <span class="sc">+</span> a4 <span class="sc">*</span> cyd4 <span class="sc">+</span> a5 <span class="sc">*</span> cyd5 <span class="sc">+</span> a6 <span class="sc">*</span> cyd6 <span class="sc">+</span> a7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    a8 <span class="sc">*</span> cyd8 <span class="sc">+</span> a9 <span class="sc">*</span> cyd9 <span class="sc">+</span> a10 <span class="sc">*</span> cyd10 <span class="sc">+</span> a11 <span class="sc">*</span> cyd11 <span class="sc">+</span> a12 <span class="sc">*</span> cyd12 <span class="sc">+</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(b2 <span class="sc">*</span> cyd2 <span class="sc">+</span> b3 <span class="sc">*</span> cyd3 <span class="sc">+</span> b4 <span class="sc">*</span> cyd4 <span class="sc">+</span> b5 <span class="sc">*</span> cyd5 <span class="sc">+</span> b6 <span class="sc">*</span> cyd6 <span class="sc">+</span> b7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>      b8 <span class="sc">*</span> cyd8 <span class="sc">+</span> b9 <span class="sc">*</span> cyd9 <span class="sc">+</span> b10 <span class="sc">*</span> cyd10 <span class="sc">+</span> b11 <span class="sc">*</span> cyd11 <span class="sc">+</span> b12 <span class="sc">*</span> cyd12 <span class="sc">+</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>      c1 <span class="sc">*</span> wght_c <span class="sc">+</span> c2 <span class="sc">*</span> wdth_c <span class="sc">+</span> c3 <span class="sc">*</span> hght_c <span class="sc">+</span> c4 <span class="sc">*</span> hp_c <span class="sc">+</span> c5 <span class="sc">*</span> tran_c <span class="sc">+</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>      c6 <span class="sc">*</span> ps_c <span class="sc">+</span> c7 <span class="sc">*</span> ac_c <span class="sc">+</span> c8) <span class="sc">+</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(e2 <span class="sc">*</span> tyd2 <span class="sc">+</span> e3 <span class="sc">*</span> tyd3 <span class="sc">+</span> e4 <span class="sc">*</span> tyd4 <span class="sc">+</span> e5 <span class="sc">*</span> tyd5 <span class="sc">+</span> e6 <span class="sc">*</span> tyd6 <span class="sc">+</span> e7 <span class="sc">*</span> tyd7 <span class="sc">+</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>      e8 <span class="sc">*</span> tyd8 <span class="sc">+</span> e9 <span class="sc">*</span> tyd9 <span class="sc">+</span> e10 <span class="sc">*</span> tyd10 <span class="sc">+</span> e11 <span class="sc">*</span> tyd11 <span class="sc">+</span> e12 <span class="sc">*</span> tyd12 <span class="sc">+</span></span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>      d1 <span class="sc">*</span> wght_t <span class="sc">+</span> d2 <span class="sc">*</span> wdth_t <span class="sc">+</span> d3 <span class="sc">*</span> hght_t <span class="sc">+</span> d4 <span class="sc">*</span> hp_t <span class="sc">+</span> d5 <span class="sc">*</span> tran_t <span class="sc">+</span></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>      d6 <span class="sc">*</span> ps_t <span class="sc">+</span> d7 <span class="sc">*</span> four_t <span class="sc">+</span> d8),</span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values,</span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">nls.lm.control</span>(<span class="at">maxiter =</span> <span class="dv">1000</span>, <span class="at">maxfev =</span> <span class="dv">10000</span>)</span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: nprice ~ a3 * cyd3 + a4 * cyd4 + a5 * cyd5 + a6 * cyd6 + a7 * 
    cyd7 + a8 * cyd8 + a9 * cyd9 + a10 * cyd10 + a11 * cyd11 + 
    a12 * cyd12 + exp(b2 * cyd2 + b3 * cyd3 + b4 * cyd4 + b5 * 
    cyd5 + b6 * cyd6 + b7 * cyd7 + b8 * cyd8 + b9 * cyd9 + b10 * 
    cyd10 + b11 * cyd11 + b12 * cyd12 + c1 * wght_c + c2 * wdth_c + 
    c3 * hght_c + c4 * hp_c + c5 * tran_c + c6 * ps_c + c7 * 
    ac_c + c8) + exp(e2 * tyd2 + e3 * tyd3 + e4 * tyd4 + e5 * 
    tyd5 + e6 * tyd6 + e7 * tyd7 + e8 * tyd8 + e9 * tyd9 + e10 * 
    tyd10 + e11 * tyd11 + e12 * tyd12 + d1 * wght_t + d2 * wdth_t + 
    d3 * hght_t + d4 * hp_t + d5 * tran_t + d6 * ps_t + d7 * 
    four_t + d8)

Parameters:
      Estimate Std. Error t value Pr(&gt;|t|)    
a3   2.624e-02  4.140e-01   0.063 0.949491    
a4   8.697e-02  4.183e-01   0.208 0.835437    
a5  -8.312e-02  4.548e-01  -0.183 0.855098    
a6  -1.323e-01  4.526e-01  -0.292 0.770199    
a7   2.344e-01  1.482e-02  15.813  &lt; 2e-16 ***
a8   3.986e-01  3.092e-01   1.289 0.198254    
a9   5.016e-01  2.736e-01   1.833 0.067611 .  
a10  5.424e-01  3.662e-01   1.481 0.139457    
a11  9.750e-01  2.681e-01   3.637 0.000316 ***
a12  9.776e-01  3.251e-01   3.007 0.002822 ** 
b2   9.341e-02  5.898e-02   1.584 0.114102    
b3   1.123e-01  4.512e-01   0.249 0.803509    
b4  -1.732e-02  5.231e-01  -0.033 0.973612    
b5   1.847e-01  4.491e-01   0.411 0.681186    
b6   2.756e-01  3.967e-01   0.695 0.487667    
b7  -2.069e-01  7.952e-02  -2.602 0.009669 ** 
b8  -3.091e-01  5.138e-01  -0.602 0.547748    
b9  -3.748e-01  4.893e-01  -0.766 0.444214    
b10 -6.060e-01  7.450e-01  -0.813 0.416582    
b11 -1.343e+01  2.169e+05   0.000 0.999951    
b12 -7.439e+00  6.761e+02  -0.011 0.991227    
c1  -3.546e-01  1.945e-01  -1.823 0.069162 .  
c2  -3.473e-01  1.416e-01  -2.453 0.014648 *  
c3   3.854e-01  1.320e-01   2.919 0.003736 ** 
c4   3.652e-01  1.556e-01   2.346 0.019500 *  
c5   8.554e-02  4.351e-02   1.966 0.050062 .  
c6  -4.309e-02  4.620e-02  -0.933 0.351609    
c7  -4.548e-02  5.820e-02  -0.781 0.435036    
c8  -9.251e-03  9.580e-02  -0.097 0.923125    
d1  -1.943e-01  3.195e-01  -0.608 0.543525    
d2  -9.550e-01  1.593e-01  -5.995 5.00e-09 ***
d3   8.712e-01  1.543e-01   5.646 3.36e-08 ***
d4   9.527e-02  1.540e-01   0.619 0.536598    
d5   1.438e-01  5.331e-02   2.697 0.007324 ** 
d6   8.713e-02  2.299e+00   0.038 0.969795    
d7  -1.475e+00  3.011e+00  -0.490 0.624490    
d8   1.564e+00  8.814e-01   1.775 0.076812 .  
e2   6.017e-01  5.035e-02  11.951  &lt; 2e-16 ***
e3  -2.292e+00  7.305e-01  -3.138 0.001844 ** 
e4  -1.671e+01  1.301e+06   0.000 0.999990    
e5  -1.534e+00  2.857e-01  -5.371 1.42e-07 ***
e6  -1.676e+00  3.323e-01  -5.043 7.30e-07 ***
e7  -2.786e-01  5.847e-02  -4.765 2.76e-06 ***
e8  -1.922e+01  1.849e+07   0.000 0.999999    
e9  -1.872e+01  1.117e+07   0.000 0.999999    
e10  3.423e-02  1.998e-01   0.171 0.864101    
e11 -1.734e+00  6.989e-01  -2.482 0.013532 *  
e12 -1.259e+01  4.935e+04   0.000 0.999797    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1665 on 356 degrees of freedom

Number of iterations to convergence: 135 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>fit4 <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  nprice <span class="sc">~</span> winv <span class="sc">*</span> (a3 <span class="sc">*</span> cyd3 <span class="sc">+</span> a4 <span class="sc">*</span> cyd4 <span class="sc">+</span> a5 <span class="sc">*</span> cyd5 <span class="sc">+</span> a6 <span class="sc">*</span> cyd6 <span class="sc">+</span> a7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>    a8 <span class="sc">*</span> cyd8 <span class="sc">+</span> a9 <span class="sc">*</span> cyd9 <span class="sc">+</span> a10 <span class="sc">*</span> cyd10 <span class="sc">+</span> a11 <span class="sc">*</span> cyd11 <span class="sc">+</span> a12 <span class="sc">*</span> cyd12) <span class="sc">+</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(b2 <span class="sc">*</span> cyd2 <span class="sc">+</span> b3 <span class="sc">*</span> cyd3 <span class="sc">+</span> b4 <span class="sc">*</span> cyd4 <span class="sc">+</span> b5 <span class="sc">*</span> cyd5 <span class="sc">+</span> b6 <span class="sc">*</span> cyd6 <span class="sc">+</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>      b7 <span class="sc">*</span> cyd7 <span class="sc">+</span> b8 <span class="sc">*</span> cyd8 <span class="sc">+</span> b9 <span class="sc">*</span> cyd9 <span class="sc">+</span> b10 <span class="sc">*</span> cyd10 <span class="sc">+</span> b11 <span class="sc">*</span> cyd11 <span class="sc">+</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>      b12 <span class="sc">*</span> cyd12 <span class="sc">+</span> c1 <span class="sc">*</span> wght_c <span class="sc">+</span> c2 <span class="sc">*</span> wdth_c <span class="sc">+</span> c3 <span class="sc">*</span> hght_c <span class="sc">+</span> c4 <span class="sc">*</span> hp_c <span class="sc">+</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>      c5 <span class="sc">*</span> tran_c <span class="sc">+</span> c6 <span class="sc">*</span> ps_c <span class="sc">+</span> c7 <span class="sc">*</span> ac_c <span class="sc">+</span> c8) <span class="sc">+</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(e2 <span class="sc">*</span> tyd2 <span class="sc">+</span> e3 <span class="sc">*</span> tyd3 <span class="sc">+</span> e4 <span class="sc">*</span> tyd4 <span class="sc">+</span> e5 <span class="sc">*</span> tyd5 <span class="sc">+</span> e6 <span class="sc">*</span> tyd6 <span class="sc">+</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>      e7 <span class="sc">*</span> tyd7 <span class="sc">+</span> e8 <span class="sc">*</span> tyd8 <span class="sc">+</span> e9 <span class="sc">*</span> tyd9 <span class="sc">+</span> e10 <span class="sc">*</span> tyd10 <span class="sc">+</span> e11 <span class="sc">*</span> tyd11 <span class="sc">+</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>      e12 <span class="sc">*</span> tyd12 <span class="sc">+</span> d1 <span class="sc">*</span> wght_t <span class="sc">+</span> d2 <span class="sc">*</span> wdth_t <span class="sc">+</span> d3 <span class="sc">*</span> hght_t <span class="sc">+</span> d4 <span class="sc">*</span> hp_t <span class="sc">+</span></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>      d5 <span class="sc">*</span> tran_t <span class="sc">+</span> d6 <span class="sc">*</span> ps_t <span class="sc">+</span> d7 <span class="sc">*</span> four_t <span class="sc">+</span> d8),</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values,</span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">nls.lm.control</span>(<span class="at">maxiter =</span> <span class="dv">1000</span>, <span class="at">maxfev =</span> <span class="dv">10000</span>)</span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: nprice ~ winv * (a3 * cyd3 + a4 * cyd4 + a5 * cyd5 + a6 * cyd6 + 
    a7 * cyd7 + a8 * cyd8 + a9 * cyd9 + a10 * cyd10 + a11 * cyd11 + 
    a12 * cyd12) + winv * exp(b2 * cyd2 + b3 * cyd3 + b4 * cyd4 + 
    b5 * cyd5 + b6 * cyd6 + b7 * cyd7 + b8 * cyd8 + b9 * cyd9 + 
    b10 * cyd10 + b11 * cyd11 + b12 * cyd12 + c1 * wght_c + c2 * 
    wdth_c + c3 * hght_c + c4 * hp_c + c5 * tran_c + c6 * ps_c + 
    c7 * ac_c + c8) + winv * exp(e2 * tyd2 + e3 * tyd3 + e4 * 
    tyd4 + e5 * tyd5 + e6 * tyd6 + e7 * tyd7 + e8 * tyd8 + e9 * 
    tyd9 + e10 * tyd10 + e11 * tyd11 + e12 * tyd12 + d1 * wght_t + 
    d2 * wdth_t + d3 * hght_t + d4 * hp_t + d5 * tran_t + d6 * 
    ps_t + d7 * four_t + d8)

Parameters:
      Estimate Std. Error t value Pr(&gt;|t|)    
a3   2.558e+02  4.717e+02   0.542 0.587994    
a4   3.602e+02  5.124e+02   0.703 0.482532    
a5   5.100e+02  4.823e+02   1.057 0.291011    
a6   6.946e+02  4.770e+02   1.456 0.146214    
a7   6.024e+01  9.338e+01   0.645 0.519292    
a8   6.719e+02  6.023e+02   1.116 0.265324    
a9   1.317e+03  5.831e+02   2.259 0.024505 *  
a10  8.590e+02  1.067e+03   0.805 0.421102    
a11  8.514e+02  1.135e+03   0.750 0.453477    
a12  8.496e+02  1.123e+03   0.756 0.449875    
b2  -4.359e-02  6.986e-02  -0.624 0.533015    
b3   6.083e-02  1.322e-01   0.460 0.645668    
b4   9.350e-02  1.340e-01   0.698 0.485782    
b5   5.018e-02  1.275e-01   0.393 0.694188    
b6   9.386e-02  1.238e-01   0.758 0.448940    
b7   2.288e-01  7.452e-02   3.071 0.002300 ** 
b8   2.835e-01  1.330e-01   2.131 0.033774 *  
b9   3.347e-01  1.255e-01   2.667 0.008003 ** 
b10  4.105e-01  1.389e-01   2.956 0.003328 ** 
b11  4.014e-01  1.454e-01   2.761 0.006058 ** 
b12  3.202e-01  1.418e-01   2.258 0.024519 *  
c1   4.797e-01  2.005e-01   2.392 0.017269 *  
c2   8.180e-01  2.096e-01   3.903 0.000114 ***
c3  -2.666e-01  9.648e-02  -2.763 0.006022 ** 
c4   4.243e-01  9.175e-02   4.624 5.27e-06 ***
c5   1.603e-01  5.221e-02   3.070 0.002302 ** 
c6   1.633e-01  4.580e-02   3.567 0.000411 ***
c7   1.522e-01  4.696e-02   3.241 0.001306 ** 
c8   4.049e+00  1.249e+00   3.243 0.001296 ** 
d1   4.943e-01  9.277e-02   5.328 1.77e-07 ***
d2   7.392e-02  6.277e-02   1.178 0.239734    
d3  -3.155e-02  5.003e-02  -0.631 0.528681    
d4   3.573e-01  8.138e-02   4.390 1.49e-05 ***
d5   9.111e-02  2.193e-02   4.154 4.10e-05 ***
d6   8.898e-03  5.962e-02   0.149 0.881454    
d7   8.680e-02  1.017e-01   0.853 0.394034    
d8   6.958e+00  4.030e-01  17.264  &lt; 2e-16 ***
e2  -6.496e-03  1.990e-02  -0.326 0.744316    
e3   3.050e-01  5.749e-02   5.306 1.98e-07 ***
e4   3.021e-01  5.829e-02   5.182 3.68e-07 ***
e5   1.918e-01  4.357e-02   4.402 1.42e-05 ***
e6   2.001e-01  4.508e-02   4.439 1.21e-05 ***
e7   5.227e-02  1.667e-02   3.135 0.001862 ** 
e8   2.051e-01  5.229e-02   3.923 0.000105 ***
e9   1.869e-01  5.223e-02   3.578 0.000395 ***
e10  5.322e-02  1.533e-01   0.347 0.728665    
e11  1.145e-01  1.635e-01   0.700 0.484378    
e12  2.044e-01  1.760e-01   1.161 0.246236    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1606 on 356 degrees of freedom

Number of iterations to convergence: 40 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
</div>
</section>
</section>
<section id="extra-step-formatting-the-tables-3" class="level3">
<h3 class="anchored" data-anchor-id="extra-step-formatting-the-tables-3">Extra step: formatting the tables</h3>
<p>I need to replace variables such as “c1” with “Weight (tons)” to replicate Table 3.5. I can do this by looking at the coefficients of the variables in the non-linear regression function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># function to avoid repeating the same code four times</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>reshape_estimates <span class="ot">&lt;-</span> <span class="cf">function</span>(fit, vehicle, term_prefix, term_mappings) {</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(fit) <span class="sc">%&gt;%</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(term <span class="sc">%in%</span> <span class="fu">paste0</span>(term_prefix, <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">term =</span> <span class="fu">case_when</span>(</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"1"</span>) <span class="sc">~</span> term_mappings[<span class="dv">1</span>],</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"2"</span>) <span class="sc">~</span> term_mappings[<span class="dv">2</span>],</span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"3"</span>) <span class="sc">~</span> term_mappings[<span class="dv">3</span>],</span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"4"</span>) <span class="sc">~</span> term_mappings[<span class="dv">4</span>],</span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"5"</span>) <span class="sc">~</span> term_mappings[<span class="dv">5</span>],</span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"6"</span>) <span class="sc">~</span> term_mappings[<span class="dv">6</span>],</span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"7"</span>) <span class="sc">~</span> term_mappings[<span class="dv">7</span>],</span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a>        term <span class="sc">==</span> <span class="fu">paste0</span>(term_prefix, <span class="st">"8"</span>) <span class="sc">~</span> term_mappings[<span class="dv">8</span>]</span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(term, estimate, std.error) <span class="sc">%&gt;%</span></span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">cols =</span> <span class="fu">c</span>(estimate, std.error), <span class="at">names_to =</span> <span class="st">"stat"</span>,</span>
<span id="cb76-20"><a href="#cb76-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb76-21"><a href="#cb76-21" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb76-22"><a href="#cb76-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb76-23"><a href="#cb76-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">stat =</span> <span class="fu">if_else</span>(stat <span class="sc">==</span> <span class="st">"estimate"</span>, <span class="st">"Estimate"</span>, <span class="st">"Std. Error"</span>),</span>
<span id="cb76-24"><a href="#cb76-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">value =</span> <span class="fu">round</span>(value, <span class="dv">3</span>)</span>
<span id="cb76-25"><a href="#cb76-25" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb76-26"><a href="#cb76-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="sc">!!</span><span class="fu">sym</span>(vehicle) <span class="sc">:</span><span class="er">=</span> value)</span>
<span id="cb76-27"><a href="#cb76-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb76-28"><a href="#cb76-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-29"><a href="#cb76-29" aria-hidden="true" tabindex="-1"></a>car_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb76-30"><a href="#cb76-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Weight (tons)"</span>, <span class="st">"Width (feet)"</span>, <span class="st">"Height (feet)"</span>, <span class="st">"Horsepower (100)"</span>,</span>
<span id="cb76-31"><a href="#cb76-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Transmission (5-speed or auto)"</span>, <span class="st">"Power steering"</span>, <span class="st">"Air conditioning"</span>, <span class="st">"Constant"</span></span>
<span id="cb76-32"><a href="#cb76-32" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb76-33"><a href="#cb76-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-34"><a href="#cb76-34" aria-hidden="true" tabindex="-1"></a>truck_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb76-35"><a href="#cb76-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Weight (tons)"</span>, <span class="st">"Width (feet)"</span>, <span class="st">"Height (feet)"</span>, <span class="st">"Horsepower (100)"</span>,</span>
<span id="cb76-36"><a href="#cb76-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Transmission (5-speed or auto)"</span>, <span class="st">"Power steering"</span>, <span class="st">"Four-wheel drive"</span>, <span class="st">"Constant"</span></span>
<span id="cb76-37"><a href="#cb76-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb76-38"><a href="#cb76-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-39"><a href="#cb76-39" aria-hidden="true" tabindex="-1"></a>ordered_vars <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">c</span>(car_vars, truck_vars))</span>
<span id="cb76-40"><a href="#cb76-40" aria-hidden="true" tabindex="-1"></a>ordered_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Constant"</span>, ordered_vars[<span class="sc">!</span>ordered_vars <span class="sc">%in%</span> <span class="st">"Constant"</span>])</span>
<span id="cb76-41"><a href="#cb76-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-42"><a href="#cb76-42" aria-hidden="true" tabindex="-1"></a>table_85 <span class="ot">&lt;-</span> <span class="fu">reshape_estimates</span>(fit2, <span class="st">"cars"</span>, <span class="st">"c"</span>, car_vars) <span class="sc">%&gt;%</span></span>
<span id="cb76-43"><a href="#cb76-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(<span class="fu">reshape_estimates</span>(fit2, <span class="st">"trucks"</span>, <span class="st">"d"</span>, truck_vars)) <span class="sc">%&gt;%</span></span>
<span id="cb76-44"><a href="#cb76-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(<span class="fu">reshape_estimates</span>(fit4, <span class="st">"cars"</span>, <span class="st">"c"</span>, car_vars),</span>
<span id="cb76-45"><a href="#cb76-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"term"</span>, <span class="st">"stat"</span>)</span>
<span id="cb76-46"><a href="#cb76-46" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb76-47"><a href="#cb76-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(<span class="fu">reshape_estimates</span>(fit4, <span class="st">"trucks"</span>, <span class="st">"d"</span>, truck_vars),</span>
<span id="cb76-48"><a href="#cb76-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"term"</span>, <span class="st">"stat"</span>)</span>
<span id="cb76-49"><a href="#cb76-49" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb76-50"><a href="#cb76-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb76-51"><a href="#cb76-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">term =</span> <span class="fu">factor</span>(term, <span class="at">levels =</span> ordered_vars)</span>
<span id="cb76-52"><a href="#cb76-52" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb76-53"><a href="#cb76-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(term)</span>
<span id="cb76-54"><a href="#cb76-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-55"><a href="#cb76-55" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(table_85) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb76-56"><a href="#cb76-56" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Variable"</span>, <span class="st">"Statistic"</span>, <span class="st">"Cars (No Con)"</span>, <span class="st">"Trucks (No Con)"</span>,</span>
<span id="cb76-57"><a href="#cb76-57" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Cars (W Con)"</span>, <span class="st">"Trucks (W Con)"</span></span>
<span id="cb76-58"><a href="#cb76-58" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb76-59"><a href="#cb76-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-60"><a href="#cb76-60" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(table_85)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 31%">
<col style="width: 11%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 13%">
<col style="width: 15%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Statistic</th>
<th style="text-align: right;">Cars (No Con)</th>
<th style="text-align: right;">Trucks (No Con)</th>
<th style="text-align: right;">Cars (W Con)</th>
<th style="text-align: right;">Trucks (W Con)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Constant</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">4.049</td>
<td style="text-align: right;">6.958</td>
<td style="text-align: right;">4.049</td>
<td style="text-align: right;">6.958</td>
</tr>
<tr class="even">
<td style="text-align: left;">Constant</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">1.249</td>
<td style="text-align: right;">0.403</td>
<td style="text-align: right;">1.249</td>
<td style="text-align: right;">0.403</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Weight (tons)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.480</td>
<td style="text-align: right;">0.494</td>
<td style="text-align: right;">0.480</td>
<td style="text-align: right;">0.494</td>
</tr>
<tr class="even">
<td style="text-align: left;">Weight (tons)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.201</td>
<td style="text-align: right;">0.093</td>
<td style="text-align: right;">0.201</td>
<td style="text-align: right;">0.093</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Width (feet)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.818</td>
<td style="text-align: right;">0.074</td>
<td style="text-align: right;">0.818</td>
<td style="text-align: right;">0.074</td>
</tr>
<tr class="even">
<td style="text-align: left;">Width (feet)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.210</td>
<td style="text-align: right;">0.063</td>
<td style="text-align: right;">0.210</td>
<td style="text-align: right;">0.063</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Height (feet)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">-0.267</td>
<td style="text-align: right;">-0.032</td>
<td style="text-align: right;">-0.267</td>
<td style="text-align: right;">-0.032</td>
</tr>
<tr class="even">
<td style="text-align: left;">Height (feet)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.096</td>
<td style="text-align: right;">0.050</td>
<td style="text-align: right;">0.096</td>
<td style="text-align: right;">0.050</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Horsepower (100)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.424</td>
<td style="text-align: right;">0.357</td>
<td style="text-align: right;">0.424</td>
<td style="text-align: right;">0.357</td>
</tr>
<tr class="even">
<td style="text-align: left;">Horsepower (100)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.092</td>
<td style="text-align: right;">0.081</td>
<td style="text-align: right;">0.092</td>
<td style="text-align: right;">0.081</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Transmission (5-speed or auto)</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.160</td>
<td style="text-align: right;">0.091</td>
<td style="text-align: right;">0.160</td>
<td style="text-align: right;">0.091</td>
</tr>
<tr class="even">
<td style="text-align: left;">Transmission (5-speed or auto)</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.052</td>
<td style="text-align: right;">0.022</td>
<td style="text-align: right;">0.052</td>
<td style="text-align: right;">0.022</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Power steering</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.163</td>
<td style="text-align: right;">0.009</td>
<td style="text-align: right;">0.163</td>
<td style="text-align: right;">0.009</td>
</tr>
<tr class="even">
<td style="text-align: left;">Power steering</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.046</td>
<td style="text-align: right;">0.060</td>
<td style="text-align: right;">0.046</td>
<td style="text-align: right;">0.060</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Air conditioning</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">0.152</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.152</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Air conditioning</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">0.047</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.047</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Four-wheel drive</td>
<td style="text-align: left;">Estimate</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.087</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.087</td>
</tr>
<tr class="even">
<td style="text-align: left;">Four-wheel drive</td>
<td style="text-align: left;">Std. Error</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.102</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.102</td>
</tr>
</tbody>
</table>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./chapter7.html" class="pagination-link" aria-label="Chapter 7. Import Tariffs and Dumping">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">Chapter 7. Import Tariffs and Dumping</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./chapter9.html" class="pagination-link" aria-label="Chapter 9. Political Economy of Trade Policy">
        <span class="nav-page-text"><span class="chapter-title">Chapter 9. Political Economy of Trade Policy</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>